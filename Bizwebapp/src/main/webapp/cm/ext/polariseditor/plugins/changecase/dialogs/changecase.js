(function(){POLARIS.dialog.add("changecase",function(k){var g=k.lang.changecase,m=function(a,g,c,h,d){if(!(a.type!=POLARIS.NODE_TEXT||a.getLength()<h)){void 0==c&&(c=0);void 0==h&&(h=0);d=a.getText();for(var b="",e=0;e<a.getLength();e++)if(e<c||e>=h)b+=d.charAt(e);else{var f=d.charCodeAt(e);"upper"==g?b=97<=f&&122>=f?b+String.fromCharCode(f-32):b+d.charAt(e):"lower"==g?b=65<=f&&90>=f?b+String.fromCharCode(f+32):b+d.charAt(e):"upperAndLower"==g&&(b=97<=f&&122>=f?b+String.fromCharCode(f-32):65<=f&&
90>=f?b+String.fromCharCode(f+32):b+d.charAt(e))}a.setText(b);return a}};return{title:g.changeCase,minWidth:244,minHeight:40,resizable:POLARIS.DIALOG_RESIZE_NONE,contents:[{id:"info",label:g.changeCase,title:g.changeCase,elements:[{id:"caseOptions",label:g.ratio,title:g.ratio,type:"radio",order:"vertical","default":"upper",items:[[g.toUppercase,"upper"],[g.toLowercase,"lower"],[g.toUpperAndLowercase,"upperAndLower"]]}]}],onOk:function(){var a=k.getSelection().getRanges()[0];if(!a.collapsed){var g=
this.getContentElement("info","caseOptions").getValue(),c=new POLARIS.dom.walker(a);c.breakOnFalse=1;c.evaluator=function(a){return a.type==POLARIS.NODE_TEXT&&0<a.getLength()&&!a.isReadOnly()};for(var h=[],d;d=c.next();)h.push(d);for(var b,e,c=0;c<h.length;c++){d=h[c];var f=0;0==c&&a.startContainer.type==POLARIS.NODE_TEXT&&(f=a.startOffset);var l=d.getLength();c==h.length-1&&a.endContainer.type==POLARIS.NODE_TEXT&&(l=a.endOffset);d=m(d,g,f,l,k);0==c&&(b=d);c==h.length-1&&(e=d)}b&&e&&(a.setStart(b,
a.startOffset),a.endContainer.type==POLARIS.NODE_TEXT?a.setEnd(e,a.endOffset):a.setEnd(e,e.getLength()),a.select())}}}})})();