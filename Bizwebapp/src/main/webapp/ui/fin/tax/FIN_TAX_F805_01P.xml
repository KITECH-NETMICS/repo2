<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_programName="매출(세금)계산서발행" meta_author="이영희" meta_date="2022.09.29.">
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns=""/>
            </xf:instance>
            <w2:dataCollection baseNode="map">
            	<w2:dataList baseNode="list" repeatNode="map" id="dlt_billD" saveRemovedData="true">
            		<w2:columnInfo>
            			<w2:column id="tax_bill_no" name="계산서번호" dataType="text"></w2:column>
            			<w2:column id="odr" name="순번" dataType="text"></w2:column>
            			<w2:column id="issu_ymd" name="발행일자" dataType="text"></w2:column>
            			<w2:column id="item_cd" name="품목코드" dataType="text"></w2:column>
            			<w2:column id="item_nm" name="품명" dataType="text"></w2:column>
            			<w2:column id="std" name="규격" dataType="text"></w2:column>
            			<w2:column id="qty" name="수량" dataType="text"></w2:column>
            			<w2:column id="unit_price" name="단가" dataType="text"></w2:column>
            			<w2:column id="amt" name="공급가액" dataType="text"></w2:column>
            			<w2:column id="taxamt" name="세액" dataType="text"></w2:column>
            			<w2:column id="rmk" name="비고" dataType="text"></w2:column>
            			<w2:column id="supt_work_clsf" name="기술지원사업구분" dataType="text"></w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            	<w2:dataMap baseNode="map" id="dma_search" style="">
            		<w2:keyInfo>
            			<w2:key dataType="text" id="tax_bill_no" name="계산서번호"></w2:key>
            			<w2:key id="demnd_recv_clsf" name="청구영수구분" dataType="text"></w2:key>
            			<w2:key id="accnt_no" name="계정번호" dataType="text"></w2:key>
            			<w2:key id="vend_cd" name="거래처코드" dataType="text"></w2:key>
            			<w2:key id="biz_clsf" name="업무구분" dataType="text"></w2:key>
            			<w2:key id="bill_clsf" name="계산서구분" dataType="text"></w2:key>
            			<w2:key id="req_no_list" name="기술지원의뢰번호" dataType="text"></w2:key>
            			<w2:key id="tech_supt_req_no" name="기술지원의뢰번호" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataMap baseNode="map" id="dma_bill">
            		<w2:keyInfo>
            			<w2:key id="tax_bill_no" name="계산서번호" dataType="text"></w2:key>
            			<w2:key id="old_tax_bill_no" name="계산서번호(구)" dataType="text"></w2:key>
            			<w2:key id="issu_ymd" name="발행일자" dataType="text"></w2:key>
            			<w2:key id="accnt_no" name="계정번호" dataType="text"></w2:key>
            			<w2:key id="cls_ymd" name="계정종료일자" dataType="text"></w2:key>
            			<w2:key id="accnt_rspns" name="계정책임자" dataType="text"></w2:key>
            			<w2:key id="wrte_psn" name="작성자" dataType="text"></w2:key>
            			<w2:key id="suply_value" name="공급가액" dataType="text"></w2:key>
            			<w2:key id="taxamt" name="세액" dataType="text"></w2:key>
            			<w2:key id="totl_amt" name="합계금액" dataType="text"></w2:key>
            			<w2:key id="bill_clsf" name="계산서구분" dataType="text"></w2:key>
            			<w2:key id="bill_clsf1" name="결제방법" dataType="text"></w2:key>
            			<w2:key id="demnd_recv_clsf" name="청구영수구분" dataType="number"></w2:key>
            			<w2:key id="bill_knd" name="계산서종류(U-수정)" dataType="number"></w2:key>
            			<w2:key id="wrte_dept" name="작성부서" dataType="number"></w2:key>
            			<w2:key id="wrte_dept_nm" name="작성부서명" dataType="text"></w2:key>
            			<w2:key id="unslip_no" name="결의번호" dataType="text"></w2:key>
            			<w2:key id="prcs_clsf" name="처리구분" dataType="text"></w2:key>
            			<w2:key id="attach_file_no" name="첨부파일" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_post1" name="담당자우편번호1" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_nm1" name="담당자이름1" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_tel1" name="담당자전화1" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_email1" name="담당자이메일1" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_mobl1" name="담당자핸드폰1" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_post2" name="담당자우편번호2" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_nm2" name="담당자이름2" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_tel2" name="담당자전화2" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_email2" name="담당자이메일2" dataType="text"></w2:key>
            			<w2:key id="buyr_chrg_mobl2" name="담당자핸드폰2" dataType="text"></w2:key>
            			<w2:key id="buyr_code" name="종사업장번호" dataType="text"></w2:key>
            			<w2:key id="bizcatg" name="업태" dataType="text"></w2:key>
            			<w2:key id="biztyp" name="업종" dataType="text"></w2:key>
            			<w2:key id="sude_psn" name="업체코드" dataType="text"></w2:key>
            			<w2:key id="vend_abbr" name="거래처명" dataType="text"></w2:key>
            			<w2:key id="bsns_psn_regst_no" name="사업자번호" dataType="text"></w2:key>
            			<w2:key id="buyr_gb" name="공급받는자구분코드" dataType="text"></w2:key>
            			<w2:key id="charg" name="담당자" dataType="text"></w2:key>
            			<w2:key id="tel_no" name="전화번호" dataType="text"></w2:key>
            			<w2:key id="email_addr" name="이메일주소" dataType="text"></w2:key>
            			<w2:key id="prcs_clsf_nm" name="처리구분명" dataType="text"></w2:key>
            			<w2:key id="state_code" name="전자발행여부코드" dataType="text"></w2:key>
            			<w2:key id="state_nm" name="전자발행여부" dataType="text"></w2:key>
            			<w2:key id="addr" name="주소" dataType="text"></w2:key>
            			<w2:key id="mody_code" name="수정사유" dataType="text"></w2:key>
            			<w2:key id="issu_id" name="전자세금계산서번호" dataType="text"></w2:key>
            			<w2:key id="decsn_no" name="역전자발행번호" dataType="text"></w2:key>
            			<w2:key id="reprs_psn_nm" name="대표자성명" dataType="text"></w2:key>
            			<w2:key id="rmk1" name="비고" dataType="text"></w2:key>
            			<w2:key id="validAttachNo" name="첨부파일번호(공통)" dataType="text"></w2:key>
            			<w2:key id="tax_type" name="세금계산서종류" dataType="text"></w2:key>
            			<w2:key id="cud_type" name="cud타입" dataType="text"></w2:key>
            			<w2:key id="biz_clsf" name="업무구분" dataType="text"></w2:key>
            			<w2:key id="issu_req_no" name="입금의뢰번호(기업지원)" dataType="text"></w2:key>
            			<w2:key id="recp_yn" name="역전자발행여부" dataType="text"></w2:key>
            			<w2:key id="tech_supt_req_no" name="기술지원의뢰번호" dataType="text"></w2:key>
            			<w2:key id="prt_times" name="거래명세서포함여부" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataList baseNode="list" repeatNode="map" id="dlt_charg" saveRemovedData="true">
            		<w2:columnInfo>
            			<w2:column id="buyr_chrg_nm" name="공급받는자 담당자 성명" dataType="text"></w2:column>
            			<w2:column id="buyr_chrg_post" name="담당자부서" dataType="text"></w2:column>
            			<w2:column id="buyr_chrg_tel" name="담당자전화번호" dataType="text"></w2:column>
            			<w2:column id="buyr_chrg_email" name="공급받는자 담당자 이메일" dataType="text"></w2:column>
            			<w2:column id="buyr_chrg_mobl" name="공급받는자 담당자 모바일" dataType="text"></w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            	<w2:dataMap baseNode="map" id="dma_billCnt">
            		<w2:keyInfo>
            			<w2:key id="tax_bill_no" name="계산서번호" dataType="text"></w2:key>
            			<w2:key id="bill_knd" name="계산서종류(수정 U)" dataType="text"></w2:key>
            			<w2:key id="updt_cnt" name="수정발행전체개수" dataType="text"></w2:key>
            			<w2:key id="org_cnt" name="최초세금계산서 개수" dataType="text"></w2:key>
            			<w2:key id="updt_new_cnt" name="수정 발행개수" dataType="text"></w2:key>
            			<w2:key id="updt_minus_cnt" name="마이너스 발행 개수" dataType="text"></w2:key>
            			<w2:key id="updt_of_updt_cnt" name="수정의 수정 개수" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataMap baseNode="map" id="dma_sptTec">
            		<w2:keyInfo>
            			<w2:key id="bill_no" name=" 계산서번호" dataType="text"></w2:key>
            			<w2:key id="prcs_state" name="처리상태" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            </w2:dataCollection>
            <w2:workflowCollection/>
            <!-- 조회 -->
            <xf:submission id="sbm_selectBill" ref="data:json,dma_search" target='data:json,[{"id":"dma_bill","key":"billHVo"},{"id":"dlt_billD","key":"billDList"},{"id":"dma_billCnt","key":"billCntVo"}]' 
        	    action="SvcFINTAXR02.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 저장 -->
            <xf:submission id="sbm_saveTaxInfo" ref='data:json,[{"id":"dma_bill","key":"billHVo"},{"id":"dlt_billD","key":"billDList"}]' target='data:json,dma_search' 
        	    action="SvcFINTAXM01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 전자발행 -->
            <xf:submission id="sbm_sendTaxInfo" ref='data:json,[{"id":"dma_bill","key":"billHVo"},{"id":"dlt_billD","key":"billDList"}]' target='data:json,dma_search' 
        	    action="SvcFINTAXM02.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 수정발행 -->
            <xf:submission id="sbm_saveAmendIssu" ref='data:json,[{"id":"dma_bill","key":"billHVo"},{"id":"dlt_billD","key":"billDList"}]' target='data:json,dma_search' 
        	    action="SvcFINTAXM03.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 재전송 -->
            <xf:submission id="sbm_resendInfo" ref='data:json,dma_bill' target='data:json,dma_search' 
        	    action="SvcFINTAXM04.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 계산서 삭제 -->
            <xf:submission id="sbm_deleteData" ref='data:json,dma_bill' target='' 
        	    action="SvcFINTAXD01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 외부기술지원 신규발행시 초기정보 조회 -->
            <xf:submission id="sbm_selectInitData" ref='data:json,dma_search' target='data:json,[{"id":"dlt_billD","key":"billDList"},{"id":"dlt_charg","key":"chrgList"}]' 
        	    action="SvcSUPTECDEPR02.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 외부기술지원 전자발행 요청 저장 -->
            <xf:submission id="sbm_saveSptReq" ref='data:json,dma_sptTec' target='' 
        	    action="SvcSUPTECDEPU01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <script src="/cm/js/biz/fin.js" cache="false"></script>
        <script type="text/javascript" lazy="false"><![CDATA[
    /****************************************************
 	 * 화면 설명 : 매출계산서 발행
	 * 변경 이력 : 2022-09-29	이영희	최초 작성
	 * ServiceId : F805
 	 ****************************************************/  
 	/**
	 * 페이지 로딩 이벤트
	 */   
	scwin.data ={saveFlag : false}; 
	scwin.onpageload = function() {
		// 첨부파일 컴포넌트 초기화
		com.file.init();	
		com.file.create(upload_A.getID(), {fileKey: 'F805', mode: 'edit'});		
		
		// 초기화
		grp_upd_cause.hide(); // 수정발행사유
		sbx_mody_code.hide();
		txt_msg.hide(); // 알림 메시지
		btn_issu_req.hide(); // 기업지원에서 필요
		btn_tran_spec.hide();
		
		var param = com.getParameter();
		dma_search.setJSON(param);

		scwin.data.type = param.type; // 신규 C, 수정 U, 조회 R(연구:입금상태가 결의처리 후), 일반조회 :빈값
		scwin.data.biz_clsf = param.biz_clsf; // 업무구분 (연구 R, 재무 F, 기업지원 S)
		scwin.data.prcs_clsf = param.prcs_clsf; // N 미처리, D 폐기, Y 처리, U 수정
		
		scwin.data.roleCode = com.getLoginInfo("roleCode");		
		
		// 공통코드
		var codeOptions = [ { code : "FBE", compID :"sbx_bill_clsf1" } // 수금구분(FBE)
		                   ,{ code : "FBF", compID :"sbx_bill_clsf" } // 계산서구분
		                ];
		com.setCmnCd(codeOptions, function() {
			if(param.tax_bill_no != undefined && param.tax_bill_no != ""){			
				scwin.search();
			}else{
				scwin.init(param);
			}	
		});			
	};
	
	scwin.onpageunload = function() {
		
	};
	
	/**
	 * 계산서 작성자 setting
	 */
	scwin.getWrtePsnInfo = async function(empNo){
		if(empNo.substring(0, 4) == "9999") return;
			
		// 담당자
		var data={
			empno : empNo,
			work_clsf : "HAG010",
			ref_yn : (empNo == "")?"Y" : "N"
		};
		await com.pop.open(com.pop.TYPE.HUM, data, function(ret) {
			ibx_charg.setValue(ret.nm);
			ibx_tel_no.setValue(ret.ext_no);
			ibx_email_addr.setValue(ret.email);
			dma_bill.set("wrte_psn", ret.syspayno);
			dma_bill.set("wrte_dept", ret.dept_cd);
		});
	};
	
	/**
	 * 신규 작성시 데이터 setting
	 */
	scwin.init = function(param){
		dma_bill.set("cud_type", "C");		
		
		scwin.getWrtePsnInfo(com.getLoginInfo("empno"));
		
		// 담당자 행추가
		com.addRow(grd_charg);
		com.addRow(grd_charg);
		grd_charg.setFocusedCell(0,0);
		
		// 세금계산서 상세 내역 행추가
		com.addRow(grd_billD);
		
		if(param.biz_clsf != "S"){
			spn_prt_times.hide();	
		}
		
		if(param.biz_clsf == "S"){	
			scwin.data.rcpt_psn_syspayno = param.rcpt_psn_syspayno;
			
			// 계산서 종류
			dma_bill.set("tax_type", param.tax_type);
			dma_bill.set("accnt_no", param.accnt_no);
			dma_bill.set("cls_ymd", param.cls_ymd);
			sbx_bill_clsf.setValue("FBF031");
			sbx_bill_clsf1.setValue("FBE011");
			sbx_bill_clsf.setDisabled(true);
			sbx_bill_clsf1.setDisabled(true);	
			rdo_prt_times.setDisabled(false);
			
			// 2012.03.20 ==> 민관웅씨 요청으로 기술지원총괄실 관리자에 한해 청구계산서발행	
			if(/1005229/.test(com.getLoginInfo("roleCode"))){ // 1005229 청구세금계산서발행담당
				rdo_demnd_recv_clsf.setValue("1");
			}else{
				rdo_demnd_recv_clsf.setValue("2");
				if(param.demnd_recv_clsf == "2"){ // 시험료지원구분이 바우처의 경우 계산서(영수)만 가능하므로 기업지원화면에서 던져줌
					rdo_demnd_recv_clsf.setDisabled(true);
				}
			}
			
			// 거래처 정보 검색
			scwin.getVendInfo({vend_cd : param.vend_cd});
			
			// 계산서 디테일 및 공급받는자 정보 조회
			com.execute(sbm_selectInitData, {
				successCallback : function(e){
					dma_bill.set("suply_value", grd_billD.getFooterData("amt_sum"));
					dma_bill.set("taxamt", grd_billD.getFooterData("taxamt_sum"));
					dma_bill.set("totl_amt", com.parseInt(dma_bill.get("suply_value")) + com.parseInt(dma_bill.get("taxamt")));
					
					ica_issu_ymd.setValue(com.getServerDateTime());
					ica_issu_ymd.trigger("viewchange");
				}
			});
			
		}else if(param.biz_clsf == "R"){
			// 계산서 종류
			dma_bill.set("tax_type", param.tax_type);
			
			// 청구 영수구분
			dma_bill.set("demnd_recv_clsf", param.demnd_recv_clsf);
			rdo_demnd_recv_clsf.setDisabled(true);
			
			// 수금구분
			dma_bill.set("bill_clsf1", param.bill_clsf1);			
			ibx_accnt_no.setValue(param.accnt_no);
			
			ibx_accnt_no.setValue(param.accnt_no);
			btn_accnt_no.trigger("click");
			
			// 업체
			if(param.vend_cd != undefined && param.vend_cd != ""){
				scwin.getVendInfo({vend_cd : param.vend_cd});
			}
		}else if(param.biz_clsf == "ST"){ // 기업부담금
			// 계산서 종류
			dma_bill.set("tax_type", param.tax_type);
			
			if(param.accnt_no){
				ibx_accnt_no.setValue(param.accnt_no);
				btn_accnt_no.trigger("click");
			}
			
			// 업체
			if(param.vend_cd != undefined && param.vend_cd != ""){
				scwin.getVendInfo({vend_cd : param.vend_cd});
			}
			// 금액
			dlt_billD.setCellData(0, "item_nm", "기술인재지원사업 사업비");
			dlt_billD.setCellData(0, "std", "1");
			dlt_billD.setCellData(0, "qty", "1");
			dlt_billD.setCellData(0, "unit_price", param.totl_amt);
			dlt_billD.setCellData(0, "amt", param.totl_amt);
			dlt_billD.setCellData(0, "taxamt", 0);
			
			// 총액구하기
			scwin.getTotalAmt();
		}else{
			rdo_tax_type.setDisabled(false); // 재무에서 발행한 경우
			rdo_demnd_recv_clsf.setValue("2");	
		}	
	};	
	
	/**
	 * 조회
	 */ 
	scwin.search = function(){
		com.execute(sbm_selectBill, {
			successCallback : function(e){
				rdo_tax_type.setDisabled(true);

				if(scwin.data.type == "U"){
					dma_bill.set("cud_type", "C");
					dma_bill.set("old_tax_bill_no", dma_bill.get("tax_bill_no"));
					dma_bill.set("tax_bill_no", "");
					if(dma_bill.get("mody_code") == ""){
						sbx_mody_code.setValue("01");
					} 
					
					if(dma_bill.get("bill_clsf") == "FBF031" && scwin.data.biz_clsf == "F"){
						scwin.data.biz_clsf = "S";
					}
					
					// 작성자 셋팅
					scwin.getWrtePsnInfo(com.getLoginInfo("empno"));
				}
				
				// 연구,기업지원 에서 호출시 prcs_clsf를 가져오지 않아서 다시 셋팅
				scwin.data.prcs_clsf = dma_bill.get("prcs_clsf");
				scwin.data.bill_clsf = dma_bill.get("bill_clsf");
				
				dlt_charg.removeAll();
				dlt_charg.reform();				
				
				// 담당자 그리드 셋팅
				var data = {
					buyr_chrg_nm : dma_bill.get("buyr_chrg_nm1"),
					buyr_chrg_post : dma_bill.get("buyr_chrg_post1"),
					buyr_chrg_tel : dma_bill.get("buyr_chrg_tel1"),
					buyr_chrg_email : dma_bill.get("buyr_chrg_email1"),
					buyr_chrg_mobl : dma_bill.get("buyr_chrg_mobl1"),
				};
				dlt_charg.setRowJSON(0, data, false);
				
				data = {
					buyr_chrg_nm : dma_bill.get("buyr_chrg_nm2"),
					buyr_chrg_post : dma_bill.get("buyr_chrg_post2"),
					buyr_chrg_tel : dma_bill.get("buyr_chrg_tel2"),
					buyr_chrg_email : dma_bill.get("buyr_chrg_email2"),
					buyr_chrg_mobl : dma_bill.get("buyr_chrg_mobl2"),
				};
				
				dlt_charg.setRowJSON(1, data, false);
				
				if(dma_bill.get("state_nm") != "미발행"){
					rdo_price_clsf.setDisabled(true);
				}
				
				if(dma_bill.get("attach_file_no") != ""){
					com.file.create(upload_A.getID(), {fileKey: dma_bill.get("attach_file_no"), mode: 'edit'});
				}
				
				scwin.data.orgYmd = dma_bill.get("issu_ymd");
				scwin.data.orgAmt = dma_bill.get("totl_amt");
				
				scwin.setForm();
				
				// 버튼 제어
				scwin.setButton();
			}
		});
	};
	
	/**
	 * 전송상태에 따른 버튼제어
	 */ 
	scwin.setButton = function(){
		var stateCd = dma_bill.get("state_code");	
		debugger;
		//전자발행이 미전송일때 [인쇄]버튼 비활성화	
		if(/00/.test(stateCd) || dma_bill.get("recp_yn") == "Y"){
			btn_print.setDisabled(false);	
		}else{			
			btn_print.setDisabled(true);		
		}
		
		// 저장, 삭제 버튼
		// 2011.05.06 - 연구관리 시스템에서 팝업 화면 호출시...읽기 전용으로 전환하는 스크립트 추가
		if((/R|S/.test(scwin.data.biz_clsf) && scwin.data.type == "R")){
			
			
			btn_save.setDisabled(true);
			btn_del.setDisabled(true);
			
			if(dma_bill.get("unslip_no") == ""){
			 btn_del.setDisabled(false);
			}
			
			
			
			// 전자발행 버튼(20170529 전자발행 하지 않았을 경우 전자발행 버튼 활성화	)
			if(stateCd == "XX" && dma_bill.get("prcs_clsf") != "D"){	
				btn_send.setDisabled(false);
			}else{			
				btn_send.setDisabled(true);
			}
		}else{
			if(dma_bill.get("unslip_no") != ""){
				// 버튼 비활성화
				scwin.setDisableButton([btn_del, btn_save, btn_send]); 
				
				//  '02'(전자발행발송완료) 일때는 재전송버튼 활성화, 그외는 비활성화
				// 20150119 '00'(국세청 전송완료) 일 때도 재전송 가능함(신민정)
				if(/00|02/.test(stateCd) ){
					btn_resend.setDisabled(false);
				}else{
					btn_resend.setDisabled(true);
				}
			}else if(dma_bill.get("recp_yn") == "Y"){
				// 20140721 sybae 기업지원결의확정 후 역전자 계산서를 다시 등록하고자 할 때, 재무관리 > 세무관리 > 매출계산서에서 저장하게 됨. 이때 전자발행버튼, 재전송버튼 비활성화로 보완조치
				// 20150130 역전자는 최초저장만 가능(전자발행은 원래부터 안됨) 이후 수정해야하면 폐기 후 다시 신규등록절차를 거침
				// 버튼 비활성화
				scwin.setDisableButton([btn_save, btn_send, btn_resend,btn_del]); 
				if(dma_bill.get("unslip_no") = ""){
				 btn_del.setDisabled(false);
				}
				//btn_del.setDisabled(false);
			}else{
				// issu_seqno 가 존재할 때, stat_code ='00'(정상완료)이고 err_cd = '000000'(오류없음) 일때만 재전송가능
				// stateCd : 'XX'(전자발행 미전송) - 저장버튼, 전자발행버튼, 폐기버튼 활성화, 재전송버튼, 인쇄버튼 비활성화 20150130 변경
				// stateCd : '01'(전자발행 접수대기) - 저장버튼, 전자발행버튼, 폐기버튼, 재전송버튼, 인쇄버튼 비활성화 20150130 변경
				// stateCd : '02'(국세청전송대기 또는 발행완료) - 저장버튼, 전자발행버튼, 폐기버튼, 재전송버튼, 인쇄버튼 비활성화 20150130 변경
				// stateCd : '03'(접수거절) - 저장버튼, 전자발행버튼, 재전송버튼, 인쇄버튼 비활성화, 폐기버튼 활성화 20150130 추가
				// stateCd : '04'(삭제) - 저장버튼, 전자발행버튼, 재전송버튼, 인쇄버튼 비활성화, 폐기버튼 활성화 20150130 추가
				// stateCd : '05'(전자발행 취소요청) - 저장버튼, 전자발행버튼, 폐기버튼, 재전송버튼, 인쇄버튼 비활성화
				// stateCd : '07'(국세청처리중) - 저장버튼, 전자발행버튼, 전송버튼, 폐기버튼, 인쇄버튼 비활성화 20150130 추가
				// stateCd : '66'(예약발행) - 저장버튼, 전자발행버튼, 폐기버튼, 재전송버튼, 인쇄버튼 비활성화 20150130 추가
				// stateCd : '88'(삭제) - 저장버튼, 전자발행버튼, 재전송버튼, 인쇄버튼 비활성화, 폐기버튼 활성화 20150130 추가
				// stateCd : '00'(국세청전송완료) - 저장버튼, 전자발행버튼, 폐기버튼 비활성화, 재전송버튼, 인쇄버튼 활성화 20150119 추가
				// stateCd : '99'(국세청전송오류) - 저장버튼, 전자발행버튼, 재전송버튼, 인쇄버튼 비활성화, 폐기버튼 활성화 20150130 추가
				// 국세청전송 완료건에 한하여 인쇄가능함(20150130 신민정)
							
				if(scwin.data.type == "U"){ // 수정발행 시, 닫기, 인쇄, 발송현황, 수정발행버튼 이외의 버튼은 비활성화 처리 20150417
					// 버튼 비활성화
					scwin.setDisableButton([btn_save, btn_del, btn_send, btn_resend]); 
				}else{
					switch(stateCd){
						case "XX" : 
							// 버튼 활성화
							if(dma_bill.get("prcs_clsf") != "D"){
								scwin.setAbleButton([btn_save, btn_del, btn_send]);
							}else{
								btn_save.setDisabled(true);	
							}
							btn_resend.setDisabled(true);
							if(scwin.data.biz_clsf == "S" && dma_bill.get("demnd_recv_clsf") == "1" && scwin.data.roleCode.indexOf("1005229") < 0){
								btn_issu_req.show("");
								btn_send.hide();
								btn_upd_send.hide();
								btn_resend.hide();
							}
							break;
						case "03" :
						case "04" :
						case "88" :
						case "99" :
							scwin.setDisableButton([btn_save, btn_send, btn_resend]); 
							btn_del.setDisabled(false);
							break;
						case "00" :
							scwin.setDisableButton([btn_save, btn_del,btn_send]); 
							btn_resend.setDisabled(false);
							break;
						default :
							scwin.setDisableButton([btn_save, btn_del,btn_send, btn_resend]); 
							break;
					}
					
					if(dma_bill.get("state_nm") == "전송오류"){
						btn_del.setDisabled(false);
					}
				}
			}
			
			// 20210511 관리자는 저장가능(최지영)
			if(scwin.data.roleCode.indexOf("1002207") > 0){ // 세무담당자
				btn_save.setDisabled(false);
			}
		}
	};
	
	/**
	 * 수정발행일 경우 화면 셋팅
	 */
	scwin.setForm = function(){	
		if(scwin.data.biz_clsf == "S" || dma_bill.get("bill_clsf") == "FBF031"){
			btn_tran_spec.show("");
			rdo_prt_times.setDisabled(false);
		}else{
			spn_prt_times.hide();	
		}
		
		// 수정발행 클릭해서 넘어온 경우
		if(scwin.data.type == "U"){
			if(dma_bill.get("unslip_no").trim() == "" && scwin.data.prcs_clsf == "N" && dma_bill.get("state_nm") == "국세청 전송완료"){
				 // 기재사항 착오·정정 - 금액, 발행일자, 비고, 내역 수정가능
				if(dma_billCnt.get("updt_cnt") == 0){ 
					scwin.setDisableButton([ibx_unslip_no, ibx_accnt_no,btn_accnt_no,btn_vend,sbx_bill_clsf,sbx_bill_clsf1,rdo_demnd_recv_clsf,ibx_charg,ibx_tel_no,ibx_email_addr]);
					
					if(dma_bill.get("mody_code") == "04"){
						alert("계약의 해지에 의한 마이너스 계산서에 대해 수정발행이 불가합니다.");
						return;
					}else{
						// 수정발행 버튼 활성화
						btn_upd_send.setDisabled(false);
					}
					
					// 수정발행사유
					grp_upd_cause.show("");
					sbx_mody_code.show("");
					txt_msg.show("");					
					
				}else{ // 현재의 계산서에 대한 수정계산서가 이미 존재할 경우
					btn_upd_send.setDisabled(true);
					
					alert("이미 수정계산서가 존재합니다.");
				}
			}else{
				btn_upd_send.setDisabled(true);
			}
		}else{
			btn_upd_send.setDisabled(true); // 수정발행
			
			if(dma_bill.get("issu_id") == "" && dma_bill.get("recp_yn") != "Y"){
				scwin.setAbleButton([ibx_unslip_no, ibx_accnt_no,btn_accnt_no,btn_vend,sbx_bill_clsf,sbx_bill_clsf1, rdo_demnd_recv_clsf,ibx_charg,ibx_tel_no,ibx_email_addr]);
			}else{
				scwin.setDisableButton([rdo_demnd_recv_clsf]);
			}
			
			if(dma_bill.get("bill_knd") == "U"){
				// 수정발행사유
				grp_upd_cause.show("");
				sbx_mody_code.show("");
				sbx_mody_code.setDisabled(true);
			}
		}
	};
	
	/**
	 * 버튼 비활성화
	 */
	scwin.setDisableButton = function(arr){
		arr.forEach(function(elt, i) {
			elt.setDisabled(true);
		});
	};
	
	/**
	 * 버튼 활성화
	 */
	scwin.setAbleButton = function(arr){
		arr.forEach(function(elt, i) {
			elt.setDisabled(false);
		});
	};
	
	/**
	 * 발행일자 체크
	 * flag : 1 계산서 헤더, 2 계산서 내역
	 */
	scwin.validateIssuYmd = function(issuYmd, today, flag){
		var msg = "";
		if(flag == "2"){
			msg = "내역의 ";
		}
			
		if(issuYmd < "20141124"){			
			alert("[알림] " + msg + "발행일자는 2014년 11월 24일이후부터 가능합니다.");
			return false;
		}
		
		if(issuYmd > today){
			alert("[알림] " + msg + "오늘 이후 일자로 발행할 수 없습니다. 재정운영실에 문의바랍니다.");
			return false;
		}
		
		if(scwin.data.orgYmd != undefined && issuYmd < scwin.data.orgYmd){
			alert("[알림] 최초 발행일자보다 이전일자로 발행할 수 없습니다.");
			return false;
		}
		
		if(scwin.data.biz_clsf == "S"){
			if(issuYmd > dma_bill.get("cls_ymd")){
				alert("발행일 이전에 종료된 계정(종료일 : " + com.formatDate(dma_bill.get("cls_ymd"),"dash") +") 입니다. \n 계정번호를 검색해 주시기 바랍니다.");
				return false;
			}
		}
		
		if(scwin.data.roleCode.indexOf("1002207") < 0 && scwin.data.roleCode.indexOf("1005233") < 0){ // 세무담당자, 기업지원 세금계산서담당자
			if(scwin.data.type != "U"){
				// 발행일자는 오늘기준으로 10일이내로 설정해야함 20141230
				var bfYmd = com.addDate(today, -10);
				if(issuYmd < bfYmd){
					alert("[알림] 발행일자는 오늘기준으로 10일이내로 설정해야합니다.");
					return false;
				}
			}else{
				// 20150205 기재사항착오정정 및 계약의 해제의 수정발행 시, 발행일자는 최초발행일자 기준으로 익월10일까지만 발행일자 설정이 가능하다(신민정)
				var nextMonYmd = com.addMonth(scwin.data.orgYmd.substring(0, 6)+"10", 1);
				console.log("---------------- nextMonYmd : " + nextMonYmd);
								
				if(flag == "2"){
					msg = "수정계산서 내역의 발행일자는 최초 발행일자기준으로 익월10일까지 발행가능합니다. ";
				}else{
					msg = "수정계산서는 최초 발행일자기준으로 익월10일까지 발행가능합니다.";
				}	
					
				// 검증1. 입력한 발행일자가 익월10일보다 크면 발행안됨.
				if(issuYmd > nextMonYmd){
					alert("[1] " + msg);
					return false;
				}
				
				// 검증2. 오늘날짜가 익월10일보다 크면 발행안됨.
				if(today > nextMonYmd) {
					alert("[2] " + msg);
					return false;
				}
			}
		}
		
		if(flag == "2"){
			if(dma_bill.get("issu_ymd").substring(0, 6) != issuYmd.substring(0,6)){
				alert("국세청 권고에 의하여 작성일자와 품목일자의 년/월은 동일 년/월이어야합니다.");
				return false;
			}	
		}		
		
		return true;
	}
	
	/**
	 * 저장전 체크사항
	 */
	scwin.preSave = function(){			
		// 필수값체크
		var validData = [
			{dataObj : dma_bill
			   , valInfoArr :[
				    { id : "accnt_no", mandatory : true, allowChar : "A-Z0-9", maxLength : 8, minLength : 8},
					{ id : "sude_psn", mandatory : true},
					{ id : "issu_ymd", mandatory : true},
					{ id : "bill_clsf", mandatory : true},
					{ id : "bill_clsf1", mandatory : true},
					{ id : "demnd_recv_clsf", mandatory : true},
				]
			  , isCheckModified : false
			},
			{dataObj : dlt_billD
			   , valInfoArr :[
				    { id : "issu_ymd", mandatory : true},
				    { id : "item_nm", mandatory : true},
				    { id : "qty", mandatory : true},
				    { id : "unit_price", mandatory : true},   
			      ]
			   , isCheckModified : false
			}
		];
		
		if(!com.validateData(validData)	) return false;
		
		var today = com.getServerDateTime();
		if(!scwin.validateIssuYmd(dma_bill.get("issu_ymd"), today, "1")) return false;
		
		if(dma_bill.get("bill_clsf") == "FBF031"){ // 수탁지원사업비
			if(scwin.data.biz_clsf != "S" && com.getLoginInfo("roleCode").indexOf("1002207") < 0 && scwin.data.type != "U"){ //세금계산서 담당자인경우 제외
				alert("계산서구분이 [수탁지원사업비]인 경우에는 \n[기업지원/지술지원-장비활용/외부기술지원/입금의뢰(계산서발행)] 매뉴를 이용하시기 바랍니다.");
				return false;
			}
				
			if(scwin.data.type == "U" && dma_bill.get("mody_code") == "01"){				
				if(scwin.data.orgAmt != dma_bill.get("totl_amt")){
					alert("계산서구분이 [수탁지원사업비] 또는 [기타 기술료]인 경우에는 총액을 변경하여 발행할수 없습니다.");
					return false;
				}				
			}
		}
		
		if(scwin.data.type == "U"){
			if(sbx_mody_code.getValue() == ""){
				alert("수정발행사유를 선택하십시오.");
				return false;
			}
			
			if(sbx_mody_code.getValue() == "01"){
				if(WebSquare.util.parseInt(ibx_totl_amt.getValue(), 0) < 0){
					alert("수정발행 사유가 기재사항 착오·정정 시, 마이너스 금액을 입력할 수 없습니다.\n마이너스 계산서는 자동발행됩니다.\n수정계산서 없이 마이너스 계산서발행을 원하시면\n수정발행사유를 계약의 해제로 선택하십시오.");
					return false;
				}
			}			
		}
		
		var sumAmt = 0;
		for(var i=0; i<dlt_billD.getRowCount(); i++){
			if(!scwin.validateIssuYmd(dlt_billD.getCellData(i, "issu_ymd"), today, "2")) return false;
			
			if(sbx_mody_code.getValue() != "01"){
				if(WebSquare.util.parseInt(dlt_billD.getCellData(i, "amt"), 0) == 0){
					alert("계산서내역의 공급가액이 누락되었습니다.");
					return false;
				}
			}
			
			if(rdo_tax_type.getValue() == "01"){
				sumAmt += com.parseInt(dlt_billD.getCellData(i, "taxamt"));
			}
			sumAmt += Number(dlt_billD.getCellData(i, "amt"));
		}
		
		if(ibx_totl_amt.getValue() != sumAmt){
			alert("금액과 내역의 합계금액이 일치하지 않습니다.");
			return false;
		}
		
		// 세금계산서인 경우 체크
		if(rdo_tax_type.getValue() == "01"){
			if(dma_bill.get("suply_value") != grd_billD.getFooterData("amt_sum")){
				alert("공급가액 총액과 내역의 공급가액 합계금액이 일치하지 않습니다.");
				return false;
			}
			
			if(WebSquare.util.parseInt(grd_billD.getFooterData("taxamt_sum"), 0) == 0){
				alert("세금계산서는 세액이 필수 입력사항입니다.");
				return false;
			}
			
			if(dma_bill.get("taxamt") != grd_billD.getFooterData("taxamt_sum")){
				alert("세액 총액과 내역의 세액 합계금액이 일치하지 않습니다.");
				return false;
			}
		}	
		
		return true;		
	};	
	
	/**
	 * 저장전 계산서 헤더 셋팅
	 */
	scwin.setFtxBillH = function(clsf){
		if(clsf != "Re"){ // 재전송이 아닌 경우에만 셋팅
			dma_bill.set("biz_clsf", scwin.data.biz_clsf);

			if(scwin.data.type == "U"){
				dma_bill.set("bill_knd", "U");	
			}
		}
		
		// 공급받는자 정보 셋팅
		for(var i=0; i<=1; i++){
			dma_bill.set("buyr_chrg_nm" + (i+1), dlt_charg.getCellData(i, "buyr_chrg_nm"));
			dma_bill.set("buyr_chrg_post" + (i+1), dlt_charg.getCellData(i, "buyr_chrg_post"));
			dma_bill.set("buyr_chrg_tel" + (i+1), dlt_charg.getCellData(i, "buyr_chrg_tel"));
			dma_bill.set("buyr_chrg_email" + (i+1), dlt_charg.getCellData(i, "buyr_chrg_email"));
			dma_bill.set("buyr_chrg_mobl" + (i+1), dlt_charg.getCellData(i, "buyr_chrg_mobl"));
		}		
	};
	
	/**
	 * 저장
	 */
	scwin.save = function(){
		dma_bill.set("biz_clsf", scwin.data.biz_clsf);
		
		com.file.transport( function( attachObj){
			dma_bill.set("attach_file_no", attachObj.upload_A);
			dma_bill.set("validAttachNo", attachObj.upload_A);		
			
			// 저장전 계산서 헤더 셋팅
			scwin.setFtxBillH();			
							
			com.execute(sbm_saveTaxInfo, {
				successCallback : function(e) { // 성공 콜백
					com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
						scwin.data.saveFlag = true;
						scwin.data.type = "";
						scwin.search();
					});					
				}
			});
		});
	};
	
	/**
	 * 전자발행
	 */ 
	scwin.sendTaxBill = function(){
		com.file.transport( function( attachObj){
			dma_bill.set("attach_file_no", attachObj.upload_A);
			dma_bill.set("validAttachNo", attachObj.upload_A);		
			
			// 저장전 계산서 헤더 셋팅
			scwin.setFtxBillH();			
							
			com.execute(sbm_sendTaxInfo, {
				successCallback : function(e) { // 성공 콜백
					com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
						scwin.data.saveFlag = true;
						scwin.search();
					});					
				}
			});
		});
	};
	
	/**
	 * 수정발행
	 */ 
	scwin.saveAmendIssu = function(){
		com.file.transport( function( attachObj){
			dma_bill.set("attach_file_no", attachObj.upload_A);
			dma_bill.set("validAttachNo", attachObj.upload_A);		
			
			// 저장전 계산서 헤더 셋팅
			scwin.setFtxBillH();			
							
			com.execute(sbm_saveAmendIssu, {
				successCallback : function(e) { // 성공 콜백
					com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
						scwin.data.type = "";
						scwin.data.saveFlag = true;
						//dma_bill.setEmptyValue();
						scwin.search();
					});					
				}
			});
		});
	};
	
	/**
	 * 거래처 검색 버튼 클릭 이벤트
	 */
	scwin.getVendInfo = function(data){
		com.pop.open(com.pop.TYPE.VEND, data, function(ret) {
			if(ret.vend_cd != undefined && ret.use_yn != "Y"){
				alert("(사용중지 거래처) - 계산서 발행이 불가합니다.\n문의: 재정운영실 내선152번");
				return;
			}
			dma_bill.set("sude_psn", ret.vend_cd);
			dma_bill.set("vend_abbr", ret.vend_abbr);
			dma_bill.set("reprs_psn_nm", ret.reprs_psn_nm);
			if(ret.bsns_psn_regst_no.trim() == ""){
				dma_bill.set("bsns_psn_regst_no", ret.corp_resid_no);
			}else{
				dma_bill.set("bsns_psn_regst_no", ret.bsns_psn_regst_no);
			}			
			dma_bill.set("addr", ret.addr);
			dma_bill.set("bizcatg", ret.bizcatg); // 업태
			dma_bill.set("biztyp", ret.biztyp); // 업종
		});
	};
	
	/**
	 * 총액구하기
	 */ 
	scwin.getTotalAmt = function(){
		var totAmt = 0;
		var suplyAmtSum = 0;
		var taxAmtSum = 0;
		for(var i=0; i<dlt_billD.getRowCount(); i++){
			suplyAmtSum += com.parseInt(dlt_billD.getCellData(i, "amt"));
			taxAmtSum += com.parseInt(dlt_billD.getCellData(i, "taxamt"));
		}
		totAmt += suplyAmtSum + taxAmtSum;		
			
		// 세금계산서 단가 입력 또는 계산서일 경우		
		if(dma_bill.get("tax_type") == "01"){			
			if(rdo_price_clsf.getValue() == "U"){
				ibx_totl_amt.setValue(totAmt);
				dma_bill.set("suply_value", suplyAmtSum);
				dma_bill.set("taxamt", taxAmtSum);
			}else{
				// 계산서 내역을 2건 이상 입력할 경우 공급가액이 변해서 총액입력 계산값이 사라지는 문제가 발생하여 입력한 금액의 합이 100원 이하일 경우에만 변경되도록 함
				if(Math.abs(Number(ibx_totl_amt.getValue()) - totAmt) < 100){
					totAmt = ibx_totl_amt.getValue();
					
					dma_bill.set("suply_value", suplyAmtSum);
					dma_bill.set("taxamt", totAmt - suplyAmtSum);
				}
			}	
			
			if(taxAmtSum != 0 && taxAmtSum != (totAmt - suplyAmtSum)){
				spn_taxamt.setStyle("color", "red");
				grd_billD.setFooterStyle("taxamt_sum", "color", "red");
			}else{
				spn_taxamt.setStyle("color", "");
				grd_billD.setFooterStyle("taxamt_sum", "color", "");
			}	
		}else{
			ibx_totl_amt.setValue(totAmt);
			dma_bill.set("suply_value", suplyAmtSum);
			dma_bill.set("taxamt", taxAmtSum);
		}
	};
	
	//------------------------------------------------------------- event -------------------------------/
	/**
	 * 계정번호 검색 버튼 클릭 이벤트
	 */ 
	scwin.btn_accnt_no_onclick = function(e) {
		var data={
			accnt_no : ibx_accnt_no.getValue().trim(),
			ref_yn : (ibx_accnt_no.getValue().trim() == "")?"Y" : "N"
		};
		
		com.pop.open(com.pop.TYPE.ACNNO, data, function(ret) {
			if(ret.accnt_no.substring(0, 2) != "FF"){
				if(dma_bill.get("tax_type") == "03" && ret.tax_cd == "FTX001"){
					alert("과세계정은 계산서를 발행할 수 없습니다.");
					return;	
				}
				
				if(dma_bill.get("tax_type") == "01" && ret.tax_cd == "FTX002"){
					alert("비과세계정은 세금계산서를 발행할 수 없습니다.");
					return;	
				}
			}
			
			dma_bill.set("accnt_no", ret.accnt_no);
			dma_bill.set("accnt_rspns", ret.accnt_rspns);
			dma_bill.set("cls_ymd", ret.cls_ymd);
		});
	};
	
	/**
	 * [+]버튼 클릭 이벤트
	 */ 
	scwin.btn_plus_onclick = function(e) {
		var row = com.addRow(grd_billD);
		
		dlt_billD.setCellData(row, "issu_ymd", dma_bill.get("issu_ymd"));		
	};
	
	/**
	 * [-]버튼 클릭 이벤트
	 */ 
	scwin.btn_minus_onclick = function(e) {
		var row = grd_billD.getFocusedRowIndex();
		if(row < 0){
			com.alert(com.getMsg("message.xom.co.com.0003",  "삭제할 행"));	
			return;
		}
		dlt_billD.removeRow(row);
		
		var totAmt = 0;
		var suplyAmtSum = 0;
		var taxAmtSum = 0;
		for(var i=0; i<dlt_billD.getRowCount(); i++){
			suplyAmtSum+= com.parseInt(dlt_billD.getCellData(i, "amt"));	
			taxAmtSum += com.parseInt(dlt_billD.getCellData(i, "taxamt"));				
		}
		totAmt = suplyAmtSum + taxAmtSum;
		
		dma_bill.set("suply_value", suplyAmtSum);
		dma_bill.set("taxamt", taxAmtSum);
		dma_bill.set("totl_amt", totAmt);
	};
	
	/**
	 * 닫기 버튼 클릭 이벤트
	 */ 
	scwin.btn_close_onclick = function(e) {
		if(scwin.data.saveFlag && /R|S/.test(scwin.data.biz_clsf)){ // 연구 또는 기업지원
			if(sbx_mody_code.getValue() == "04"){
				var data ={
					tax_bill_no : "",
					totl_amt : 0,
					suply_value : 0,
					taxamt : 0,
					issu_ymd : '',
				};
			}else{
				var data ={
						tax_bill_no : dma_bill.get("tax_bill_no"),
						accnt_no : dma_bill.get("accnt_no"), // 기업지원 입금의뢰에서 필요
						totl_amt : dma_bill.get("totl_amt"), // 연구비 청구의뢰에서 필요(총액,공급가,세액,발행일자)
						suply_value : dma_bill.get("suply_value"),
						taxamt : dma_bill.get("taxamt"),
						issu_ymd : dma_bill.get("issu_ymd"),
						demnd_recv_clsf : dma_bill.get("demnd_recv_clsf") // 기업지원에서 필요
					};
			}
			
			com.closePopup(data);			
		}else{
			com.closePopup();
		}
	};
	
	/**
	 * 금액 변경 이벤트
	 */ 
	scwin.ibx_totl_amt_onviewchange = function(info) {
		if(dma_bill.get("tax_type") == "01"){ // 세금 계산서			
			var totalAmt = com.parseInt(info.newValue);
			if(rdo_price_clsf.getValue() == "T"){
				dma_bill.set("suply_value", Math.floor(totalAmt * 10 / 11));
				dma_bill.set("taxamt", totalAmt - com.parseInt(dma_bill.get("suply_value")));
			}else{
				dma_bill.set("suply_value", grd_billD.getFooterData("amt_sum"));
				dma_bill.set("taxamt", grd_billD.getFooterData("taxamt_sum"));
			}
		}
	};
	
	/**
	 * 금액 변경 이벤트
	 */ 
	scwin.rdo_price_clsf_onchange = function(info) {
		if(this.getValue() == "T"){
			ibx_totl_amt.setDisabled(!(dma_bill.get("issu_id") == ""));
			
			grd_billD.setColumnReadOnly("taxamt", false)
		}else{
			ibx_totl_amt.setDisabled(true);
			
			grd_billD.setColumnReadOnly("taxamt", false)
		}
	};
	
	/**
	 * 계산서상세내역 그리드 변경 이벤트
	 */ 
	scwin.grd_billD_onviewchange = function(info) {
		var row = info.rowIndex;
		if(info.newValue != ''){
			if(/qty|unit_price/.test(grd_billD.getColumnID(info.colIndex))){
				var getQty = WebSquare.util.parseInt(dlt_billD.getCellData(row, "qty"), 0);
				var getUnitPrice = WebSquare.util.parseInt(dlt_billD.getCellData(row, "unit_price"), 0);			
				
				var amt = getQty * getUnitPrice;
				dlt_billD.setCellData(row, "amt", amt);
				
				if(amt == 0){
					dlt_billD.setCellData(row, "taxamt", 0);
				}else{
					if(dma_bill.get("tax_type") == "01"){					
						dlt_billD.setCellData(row, "taxamt", Math.ceil(amt / 10));					
					}else{
						dlt_billD.setCellData(row, "taxamt", 0);
					}
				}
				// 총액구하기
				scwin.getTotalAmt();
			}else if(grd_billD.getColumnID(info.colIndex) == "taxamt"){
				// 총액구하기
				scwin.getTotalAmt();
			}
		}
	};
	
	/**
	 * 인쇄버튼 클릭 이벤트
	 */
	scwin.btn_print_onclick = function(e) {
		var chkTaxBillKnd = dma_billCnt.get("bill_knd");
		var chkUpdtCnt = dma_billCnt.get("updt_cnt");
		var chkOrgCnt = dma_billCnt.get("org_cnt");
		var chkUpdtNewCnt = dma_billCnt.get("updt_new_cnt");
		var chkUpdtOfUpdtCnt = dma_billCnt.get("updt_of_updt_cnt");
		var taxType = dma_bill.get("tax_type");
		
		// 레포트 양식 항목코드
		var itemCode = "";
		debugger;
		if(chkTaxBillKnd.trim() == "" && chkUpdtCnt == 0 && chkOrgCnt == 0 && chkUpdtNewCnt == 0) { // 계산서 단건
			itemCode = (taxType == "03")? "F060": "F070"; // FinBillDetls, FinTaxBillDetls
		} else if(chkTaxBillKnd.trim() == "" && chkUpdtCnt == 1 && chkOrgCnt == 0 && chkUpdtNewCnt == 0) { // 마이너스만발행한 최초세금계산서에서 출력
			itemCode = (taxType == "03")? "F061" : "F071"; // FinUpdtMinusBillDetls, FinUpdtMinusTaxBillDetls
		} else if(chkTaxBillKnd.trim() == "U" && chkUpdtCnt == 0 && chkOrgCnt == 1 && chkUpdtNewCnt == 0) { // 마이너스만발행한 마이너스세금계산서에서 출력
			itemCode = (taxType == "03")? "F061": "F071"; // FinUpdtMinusBillDetls, FinUpdtMinusTaxBillDetls
		} else { // 수정발행 건 - 기재사항 착오정정
			// 수정발행된경우.
			if(chkUpdtOfUpdtCnt == 1) { // 수정의수정중 마이너스와마지막수정세금계산서에서 출력
				itemCode = (taxType == "03")? "F064":"F074"; // FinUpdtOfUpdtNewBillDetls, FinUpdtOfUpdtNewTaxBillDetls
			} else { // 수정한번 발행한 세트(최초/마이너스/수정)에서 출력할때
				itemCode = (taxType == "03")? "F065":"F075"; // FinUpdtNewBillDetls, FinUpdtNewTaxBillDetls
			}			
		}
		
		var node = "tax_bill_no=" + dma_bill.get("tax_bill_no");
		com.oz.openPopup({
			ozrCode : itemCode,      
			param: node
        });
	};
	
	/**
	 * 발송현황 버튼 클릭 이벤트
	 */
	scwin.btn_sendPrcs_onclick = function(e) {
		var data ={
			tax_bill_no : dma_bill.get("tax_bill_no"),
			ref_yn : "Y"
		};
		biz.fin.pop.open(biz.fin.pop.TYPE.SENDBILL, data, function(ret) {
		});
	};
	
	/**
	 * 수정발행사유 변경 이벤트
	 */
	scwin.sbx_mody_code_onviewchange = function(info) {
		//scwin.setForm();

		if(info.newValue == "04"){			
			scwin.setDisableButton([ibx_totl_amt, idx_rmk1]);			
			grd_billD.setDisabled("grid", true);
		}else{
			scwin.setAbleButton([ibx_totl_amt, idx_rmk1]);
			
			grd_billD.setDisabled("grid", false);
		}
	};
	
	/**
	 * 저장 버튼 클릭 이벤트
	 */
	scwin.btn_save_onclick = async function(e) {
		// 20170518 청구계산서 진짜 발행자는 기업지원총괄실 담당자(배진희)이지만 기술지원담당자로 설정되도록 기능변경(배진희 요청) 
		if(scwin.data.biz_clsf == "S" && rdo_demnd_recv_clsf.getValue() == "1"){
			await scwin.getWrtePsnInfo(scwin.data.rcpt_psn_syspayno.substring(2,8));
		}
			
		if(!scwin.preSave()) return;
		
		com.confirm("message.xom.wq.017"/*저장 하시겠습니까?*/, function( ret) {
			if (ret) {
				if(dma_bill.get("cud_type") == "C"){
					if(dma_search.get("req_no_list") != ""){
						dma_bill.set("tech_supt_req_no", dma_search.get("req_no_list"));
					}else{
						dma_bill.set("tech_supt_req_no", dma_search.get("tech_supt_req_no"));
					}
				}
				
				scwin.save();
			}
		});
	};
	
	/**
	 * 공급받는자 검색 버튼 클릭 이벤트
	 */
	scwin.btn_vend_onclick = function(e) {
		scwin.getVendInfo({ref_yn : "Y"});
	};
	
	/**
	 * 전자발행 버튼 클릭 이벤트
	 */
	scwin.btn_send_onclick = function(e) {
		if(!scwin.preSave()) return;
		
		if(scwin.data.biz_clsf == "S" || dma_bill.get("bill_clsf") == "FBF031"){
			if(dma_bill.get("demnd_recv_clsf") == "1" && scwin.data.roleCode.indexOf("1005229") < 0){
				alert("청구계산서 발행 권한이 없습니다.");
				return;
			}
			
			if(rdo_prt_times.getValue() == ""){
				alert("거래명세서 포함여부를 선택하세요.");
				return;
			}
		}
		
		if(dlt_charg.getCellData(0, "buyr_chrg_email") == "" && dlt_charg.getCellData(1, "buyr_chrg_email") == ""){
			alert("전자발행일 경우에는 공급받는자 담당자 정보를 하나이상 입력하셔야 합니다.");
			return;
		}
		
		com.confirm("message.xom.wq.017"/*저장 하시겠습니까?*/, function( ret) {
			if (ret) {
				scwin.sendTaxBill();
			}
		});
	};
	
	/**
	 * 공급받는자 변경 이벤트
	 */
	scwin.ibx_vend_cd_onviewchange = function(info) {
		if(this.getValue() == ""){
			dma_bill.set("vend_abbr", "");
			dma_bill.set("reprs_psn_nm", "");
			dma_bill.set("bsns_psn_regst_no", "");
			dma_bill.set("addr", "");
			dma_bill.set("bizcatg", ""); // 업태
			dma_bill.set("biztyp", ""); // 업종
		}
	};
	
	/**
	 * 계정번호 변경 이벤트
	 */
	scwin.ibx_accnt_no_onkeyup = function(e) {
		if(e.keyCode == 13){
			this.setValue(this.getValue().toUpperCase());
			btn_accnt_no.trigger("click");
		}
	};
	
	/**
	 * 수정발행 버튼 클릭 이벤트
	 */
	scwin.btn_upd_send_onclick = function(e) {
		if(!scwin.preSave()) return;
		
		if((scwin.data.biz_clsf == "S" || dma_bill.get("bill_clsf") == "FBF031") && rdo_prt_times.getValue() == ""){
			alert("거래명세서 포함여부를 선택하세요.");	
			return;
		}
			
		com.confirm("message.xom.wq.017"/*저장 하시겠습니까?*/, function( ret) {
			if (ret) {
				scwin.saveAmendIssu();
			}
		});
	};
	
	/**
	 * 계산서 종류 변경 이벤트
	 */
	scwin.rdo_tax_type_onchange = function(info) {		
		if(this.getValue() == "03"){
			tbx_title.setValue(((scwin.data.type == "U")? "수정":"") + "계산서 발행");
			grp_taxAmt.hide();
			ibx_totl_amt.setDisabled(true);

			grd_billD.setColumnReadOnly("taxamt", true)
			grd_billD.setColumnVisible("taxamt", false);
		}else{
			rdo_price_clsf.setValue("T");
			
			tbx_title.setValue(((scwin.data.type== "U")? "수정":"") +"세금계산서 발행");
			grp_taxAmt.show("");

			if(rdo_price_clsf.getValue() == "T"){
				ibx_totl_amt.setDisabled(false);
			}else{
				ibx_totl_amt.setDisabled(true);	
			}
			
			grd_billD.setColumnVisible("taxamt", true);
		}
	};
	
	/**
	 * 재전송 버튼 클릭 이벤트
	 */
	scwin.btn_resend_onclick = function(e) {		
		if(dlt_charg.getCellData(0, "buyr_chrg_nm") == ""){
			alert("공급받는자 담당자 성명을 입력하세요.");
			return;
		}
		
		if(dlt_charg.getCellData(0, "buyr_chrg_mobl") == ""){
			alert("공급받는자 담당자  mobile을 입력하세요.");
			return;
		}
		
		if(dlt_charg.getCellData(0, "buyr_chrg_email") == ""){
			alert("공급받는자 담당자 email을 입력하세요.");
			return;
		}
		
		var msg = "거래처 담당자 정보(email)를 확인해 주시기 바랍니다.\n";
		var chargNm = dlt_charg.getCellData(0, "buyr_chrg_nm");
		var emailNm = dlt_charg.getCellData(0, "buyr_chrg_email");
		if(dlt_charg.getCellData(1, "buyr_chrg_nm") != "" && dlt_charg.getCellData(1, "buyr_chrg_email") != ""){
			chargNm += ", " + dlt_charg.getCellData(1, "buyr_chrg_nm");
			emailNm += ", " + dlt_charg.getCellData(1, "buyr_chrg_email");
		}
		
		msg += chargNm + "님에게 \n메일 " + emailNm + "로 \n전자계산서를 재전송하시겠습니까?";
		
		if(confirm(msg)){
			// 저장전 계산서 헤더 셋팅
			scwin.setFtxBillH("Re");
							
			com.execute(sbm_resendInfo, {
				successCallback : function(e) { // 성공 콜백
					com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
						scwin.data.type = "";
						scwin.search();
					});					
				}
			});
		}			
	};
	
	/**
	 * 삭제 버튼 클릭 이벤트
	 */
	scwin.btn_del_onclick = function(e) {
		if(dma_bill.get("unslip_no") != ""){
			alert("해당 계산서는 결의가 생성되어있으므로 삭제할 수 없습니다.");
			return;	
		}
		
		// 기업지원에서도 동일한 매뉴 사용하므로 주석처리(2023.05.25.)
//		if(scwin.data.biz_clsf != "S" && scwin.data.bill_clsf == "FBF031") {
//			alert("계산서구분이 [수탁지원사업비]인 경우에는 좌측의 \n[기업지원/지술지원-장비활용/외부기술지원/입금의뢰(계산서발행)] 매뉴를 이용하시기 바랍니다.");
//			return;
//		}
		
		if(scwin.data.biz_clsf == "S" && dma_bill.get("demnd_recv_clsf") == "1" && scwin.data.roleCode.indexOf("1005229") < 0){
			alert("청구계산서는 폐기가 불가합니다.");
			return;
		}
		
		com.confirm("message.xom.wq.022"/*삭제 하시겠습니까?*/, function(ret) {
			if (ret) {
				dma_bill.set("biz_clsf", scwin.data.biz_clsf);		
				dma_bill.set("prcs_clsf", "D");	
				
				if(scwin.data.biz_clsf == "S"){						
					dma_bill.set("tech_supt_req_no", dma_search.get("tech_supt_req_no"));
				}
				
				com.file.deleteAll( function(){
					com.execute(sbm_deleteData, {
						successCallback : function(e) { // 성공 콜백
							com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {		
								var data ={
									tax_bill_no : "",
									totl_amt : 0,
									suply_value : 0,
									taxamt : 0,
									issu_ymd : '',
								};
								com.closePopup(data); 
							});
						}
					});
				});
			}
		});
	};
	
	/**
	 * 발행일자 변경 이벤트
	 */
	scwin.ica_issu_ymd_onviewchange = function(info) {
		for(var i=0; i<dlt_billD.getRowCount(); i++){
			dlt_billD.setCellData(i, "issu_ymd", this.getValue());
		}
	};
	
	/**
	 * 담당자 검색 버튼 클릭 이벤트
	 */
	scwin.btn_emp_onclick = function(e) {
		scwin.getWrtePsnInfo("");
	};
	
	/**
	 * 요청 버튼 클릭 이벤트
	 */
	scwin.btn_issu_req_onclick = function(e) {
		dma_sptTec.set("bill_no", dma_bill.get("tax_bill_no"));
		dma_sptTec.set("prcs_state", "STE055");
		
		com.execute(sbm_saveSptReq, {
			successCallback : function(e){
				com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
					btn_issu_req.setDisabled(true);
				});	
			}
		});
	};
	
	/**
	 * 거래명세서 버튼 클릭 이벤트
	 */
	scwin.btn_tran_spec_onclick = function(e) {
		var node = "tech_supt_req_no=" + dma_search.get("tech_supt_req_no") +"&tax_bill_no=" + dma_bill.get("tax_bill_no");
		com.oz.openPopup({
			ozrCode : "S013", // 거래명세서
			param: node
        });
	};
	]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<xf:group id="" class="pop_contents">
    		<xf:group class="titleSection pt0" id="" style="">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="tbx_title" label="세금계산서 발행" style="" tagname="h3"></w2:textbox>
    				<w2:span class="note red" id="txt_msg"
    					label=" ※ 기재사항 착오·정정으로 수정발행 시, 마이너스 수정계산서는 자동으로 발행되니 수정계산서 내용만 입력하시면 됩니다." style="">
    				</w2:span>
    			</xf:group>
    			<xf:group class="ri" id="" style="">
    				<xf:trigger class="btn icon print" id="btn_print" style="" type="button" ev:onclick="scwin.btn_print_onclick">
    					<xf:label><![CDATA[계산서]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn icon print" id="btn_tran_spec" style="" type="button" ev:onclick="scwin.btn_tran_spec_onclick">
    					<xf:label><![CDATA[거래명세서]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn" id="btn_sendPrcs" style="" type="button" ev:onclick="scwin.btn_sendPrcs_onclick">
    					<xf:label><![CDATA[발송현황]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:130px;" tagname="col"></xf:group>
    				<xf:group style="width:220px;" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:130px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계산서 종류" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 appearance="full" class="radioGroup" cols="" id="rdo_tax_type" ref="data:dma_bill.tax_type" renderType="radiogroup" rows="" selectedIndex="-1" style="" ev:onchange="scwin.rdo_tax_type_onchange" disabled="true">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[계산서]]></xf:label>
    								<xf:value><![CDATA[03]]></xf:value>
    							</xf:item>
    							<xf:item>
    								<xf:label><![CDATA[세금계산서]]></xf:label>
    								<xf:value><![CDATA[01]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select1>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계산서 번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_bill.tax_bill_no" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계정번호" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:group class="inpSch" id="grp_accnt_no" style="width: 120px;">
    						<xf:input adjustMaxLength="false" class="inp req" id="ibx_accnt_no" ref="data:dma_bill.accnt_no" style=""
    							title="계정번호" ev:onkeyup="scwin.ibx_accnt_no_onkeyup">
    						</xf:input>
    						<xf:trigger class="btn" ev:onclick="scwin.btn_accnt_no_onclick" id="btn_accnt_no" style="" title="보유자 조회"
    							type="button">
    							<xf:label><![CDATA[검색]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="공급받는자" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:group id="" class="flex">
    						<xf:group style="width:140px;" id="grp_vend" class="inpSch">
    							<xf:input maxlength="6" adjustMaxLength="false" style="" allowChar="0-9" id="ibx_vend_cd" title="거래처코드"
    								class="inp" ref="data:dma_bill.sude_psn" ev:onviewchange="scwin.ibx_vend_cd_onviewchange" disabled="true">
    							</xf:input>
    							<xf:trigger style="" id="btn_vend" title="거래처 조회" type="button" class="btn" ev:onclick="scwin.btn_vend_onclick">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:input adjustMaxLength="false" readOnly="true" style="" id="" title="회계코드 상세" class="inp full"
    							ref="data:dma_bill.vend_abbr">
    						</xf:input>
    					</xf:group>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="대표자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" style="" ref="data:dma_bill.reprs_psn_nm"></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="사업자번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" style="" ref="data:dma_bill.bsns_psn_regst_no"></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="업태" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" style="" ref="data:dma_bill.bizcatg"></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="주소" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<w2:span escape="false" id="" label="000" style="" ref="data:dma_bill.addr"></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="업종" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" style="" ref="data:dma_bill.biztyp"></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계산서구분" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-" class="sel req full"
    						direction="auto" disabled="false" disabledClass="w2selectbox_disabled" id="sbx_bill_clsf" ref="data:dma_bill.bill_clsf" style=""
    						submenuSize="auto" title="계산서 구분">
    						<xf:choices></xf:choices>
    					</xf:select1>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="수금구분" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-" class="sel req"
    						direction="auto" disabled="false" disabledClass="w2selectbox_disabled" id="sbx_bill_clsf1" ref="data:dma_bill.bill_clsf1"
    						style="width: 120px;" submenuSize="auto" title="계산서 구분">
    						<xf:choices></xf:choices>
    					</xf:select1>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr" id="">
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="금액" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp req ri" dataType="number" displayFormat="#,###" id="ibx_totl_amt"
    						ref="data:dma_bill.totl_amt" style="width: 120px;" title="발행금액" ev:onviewchange="scwin.ibx_totl_amt_onviewchange" disabled="true">
    					</xf:input>
    					<w2:textbox class="txt" id="" label="원" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="발행일자" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<w2:inputCalendar calendarValueType="yearMonthDate" class="inpcal  req" focusOnDateSelect="false" footerDiv="false"
    						id="ica_issu_ymd" ref="data:dma_bill.issu_ymd" renderDiv="true" rightAlign="false" style="width:130px;" title="발행일자" ev:onviewchange="scwin.ica_issu_ymd_onviewchange">
    					</w2:inputCalendar>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="승인번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_bill.issu_id" style=""></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="비고" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="idx_rmk1" style="" title="비고" ref="data:dma_bill.rmk1"></xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="전자발행여부" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_bill.state_nm" style="color:#FF8000;font-weight:bold;"></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="담당자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:group class="inpSch" id="" style="width:140px;">
    						<xf:input adjustMaxLength="false" class="inp" disabled="true"
    							ev:onviewchange="scwin.ibx_vend_cd_onviewchange" id="ibx_charg" ref="data:dma_bill.charg" style=""
    							title="담당자">
    						</xf:input>
    						<xf:trigger class="btn" id="btn_emp" style="" title="담당자조회"
    							type="button" disabled="true" ev:onclick="scwin.btn_emp_onclick">
    							<xf:label><![CDATA[검색]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="전화번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="ibx_tel_no" style="" title="발행금액" ref="data:dma_bill.tel_no"></xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="E-mail" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="ibx_email_addr" style="" title="발행금액" ref="data:dma_bill.email_addr"></xf:input>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="발행구분" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 appearance="full" class="radioGroup" cols="" id="rdo_demnd_recv_clsf"
    						ref="data:dma_bill.demnd_recv_clsf" renderType="radiogroup" rows="" selectedIndex="0" style="">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[영수]]></xf:label>
    								<xf:value><![CDATA[2]]></xf:value>
    							</xf:item>
    							<xf:item>
    								<xf:label><![CDATA[청구]]></xf:label>
    								<xf:value><![CDATA[1]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select1>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="(역전자)승인번호" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" id="ibx_decsn_no" style="width: 180px;" title="(역전자)승인번호"
    						readOnly="true" ref="data:dma_bill.decsn_no" disabled="true">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="거래명세서포함" style="" tagname="span"></w2:textbox>
    					<w2:span class="bul_req" id="spn_prt_times" label="[필수입력항목]" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<xf:select1 appearance="full" class="radioGroup" cols="" id="rdo_prt_times" ref="data:dma_bill.prt_times"
    						renderType="radiogroup" rows="" selectedIndex="" style="" disabled="true">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[예]]></xf:label>
    								<xf:value><![CDATA[1]]></xf:value>
    							</xf:item>
    							<xf:item>
    								<xf:label><![CDATA[아니오]]></xf:label>
    								<xf:value><![CDATA[0]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select1>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="종사업자번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="" style="" title="비고" ref="data:dma_bill.buyr_code"></xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="결의번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes>
    						<w2:colspan>1</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" id="ibx_unslip_no" ref="data:dma_bill.unslip_no" style="width: 120px;"
    						title="결의번호">
    					</xf:input>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes></w2:attributes>
    				<xf:group id="grp_upd_cause"><w2:textbox tagname="span" style="" id="" label="수정발행사유"></w2:textbox><w2:span style="" id="" label="[필수입력항목]" class="bul_req"></w2:span></xf:group></xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-" class="sel req"
    						direction="auto" disabled="false" disabledClass="w2selectbox_disabled" ev:onviewchange="scwin.sbx_mody_code_onviewchange"
    						id="sbx_mody_code" ref="data:dma_bill.mody_code" style="width: 180px;" submenuSize="auto" title="계산서 구분">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[기재사항 착오·정정]]></xf:label>
    								<xf:value><![CDATA[01]]></xf:value>
    							</xf:item>
    							<xf:item>
    								<xf:label><![CDATA[계약의 해제]]></xf:label>
    								<xf:value><![CDATA[04]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select1>
    				</xf:group></xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="파일첨부" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:group style="height:125px;">
    						<xf:group class="full" id="upload_A" style="height:100%;"></xf:group>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group id="grp_taxAmt"><xf:group style="margin-top:5px;" id="" class="titleSection">
    			<xf:group id="" class="le">
    				<w2:textbox tagname="h3" style="" id="" label="세금계산서 총액" class="tit_tbl"></w2:textbox>
    			</xf:group>
</xf:group><xf:group tagname="table" style="" id="" class="w2tb tbl">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금계산서 총액"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group tagname="col" style="width:140px;"></xf:group>
    				<xf:group tagname="col" style=""></xf:group>
    				<xf:group tagname="col" style="width:140px;"></xf:group>
    				<xf:group tagname="col" style=""></xf:group>
    				<xf:group tagname="col" style="width:140px;"></xf:group>
    				<xf:group tagname="col" style=""></xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group tagname="th" style="" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox tagname="span" style="" id="" label="금액 입력구분"></w2:textbox>
    					<w2:span style="" id="" label="[필수입력항목]" class="bul_req"></w2:span>
    				</xf:group>
    				<xf:group tagname="td" style="" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 ref="" appearance="full" style="width:180px;" id="rdo_price_clsf" renderType="radiogroup" rows="" class="radioGroup" cols="2" selectedIndex="" ev:onchange="scwin.rdo_price_clsf_onchange">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[총액입력]]></xf:label>
    								<xf:value><![CDATA[T]]></xf:value>
    							</xf:item>
    							<xf:item>
    								<xf:label><![CDATA[단가입력]]></xf:label>
    								<xf:value><![CDATA[U]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select1>
    				</xf:group>
    				<xf:group tagname="th" style="" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox tagname="span" style="" id="" label="공급가액 총액"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" style="" class="w2tb_td ri">
    					<w2:attributes></w2:attributes>
    					<w2:span ref="data:dma_bill.suply_value" dataType="number" displayFormat="#,###" style="font-weight:bold;" id="" label="000" class="ri" escape="false">
    					</w2:span>
    				</xf:group>
    				<xf:group tagname="th" style="" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox tagname="span" style="" id="" label="세액총액"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" style="" class="w2tb_td ri">
    					<w2:attributes></w2:attributes>
    					<w2:span ref="data:dma_bill.taxamt" dataType="number" displayFormat="#,###" style="font-weight:bold;" id="spn_taxamt" label="000" escape="false">
    					</w2:span>
    				</xf:group>
    			</xf:group>
    		</xf:group></xf:group><xf:group class="titleSection" id="" style="margin-top:5px;">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="" label="계산서내역" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="re" id="" style="">
    				<xf:group class="btnarea" id="" style="">
    					<xf:trigger class="bt_plus" id="btn_plus" style="" type="button" ev:onclick="scwin.btn_plus_onclick">
    						<xf:label><![CDATA[추가]]></xf:label>
    					</xf:trigger>
    					<xf:trigger class="bt_minus" id="btn_minus" style="" type="button" ev:onclick="scwin.btn_minus_onclick">
    						<xf:label><![CDATA[삭제]]></xf:label>
    					</xf:trigger>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<w2:gridView autoFit="allColumn" class="grid" dataList="data:dlt_billD" defaultCellHeight="28" evenRowBackgroundColor="#f7faff"
    			id="grd_billD" noResultMessage="조회 결과가 없습니다." noResultMessageClass="noResult" rowMouseOverColor="#e7f0fb"
    			rowNumBackgroundColor="#fff" rowNumHeaderValue="No." rowNumVisible="true" rowNumWidth="40" rowStatusHeaderValue="상태"
    			rowStatusVisible="false" rowStatusWidth="50" scrollByColumn="false" scrollByColumnAdaptive="false" selectedCellColor="#fbf2cd"
    			selectedRowColor="#fbf2cd" style="height: 85px;" summaryAuto="true" visibleRowNum="3" ev:onviewchange="scwin.grd_billD_onviewchange" editModeEvent="onclick">
    			<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
    			<w2:header id="header1" style="">
    				<w2:row id="row1" style="">
    					<w2:column width="100" inputType="text" style="height:28px" id="column56" value="일자" displayMode="label"></w2:column>
    					<w2:column displayMode="label" id="column5" inputType="text" style="height:28px;" value="품명" width="250"></w2:column>
    					<w2:column displayMode="label" id="column3" inputType="text" style="height:28px;" value="규격" width="80"></w2:column>
    					<w2:column displayMode="label" id="column20" inputType="text" style="height:28px;" value="수량" width="70"></w2:column>
    					<w2:column displayMode="label" id="column29" inputType="text" style="height:28px;" value="단가" width="80"></w2:column>
    					<w2:column displayMode="label" id="column32" inputType="text" style="height:28px" value="공급가액" width="80"></w2:column>
    					<w2:column displayMode="label" id="column30" inputType="text" style="height:28px" value="세액" width="70"></w2:column>
    					<w2:column displayMode="label" id="column44" inputType="text" style="height:28px" value="비고" width="200"></w2:column>
    				</w2:row>
    			</w2:header>
    			<w2:gBody id="gBody1" style="">
    				<w2:row id="row2" style="">
    					<w2:column width="100" inputType="calendar" style="height:28px" id="issu_ymd" value="" displayMode="label" viewType="icon"></w2:column>
    					<w2:column displayMode="label" escape="false" id="item_nm" inputType="text" style="height:28px;"
    						width="250" class="le">
    					</w2:column>
    					<w2:column displayMode="label" escape="false" id="std" inputType="text" style="height:28px;"
    						width="80">
    					</w2:column>
    					<w2:column displayMode="label" id="qty" inputType="text" style="height:28px;" width="70"></w2:column>
    					<w2:column displayMode="label" id="unit_price" inputType="text" style="height:28px;" width="80"
    						class="ri" dataType="number" displayFormat="#,###">
    					</w2:column>
    					<w2:column displayMode="label" id="amt" inputType="text" style="height:28px" width="80" class="ri"
    						dataType="number" displayFormat="#,###" readOnly="true">
    					</w2:column>
    					<w2:column displayMode="label" id="taxamt" inputType="text" readOnly="true" style="height:28px" width="70"
    						class="ri" dataType="number" displayFormat="#,###">
    					</w2:column>
    					<w2:column displayMode="label" id="rmk" inputType="text" style="height:28px" value="" width="200">
    					</w2:column>
    				</w2:row>
    			</w2:gBody>
    			<w2:footer style="" id="footer1">
    				<w2:row style="" id="row3">
    					<w2:column width="390" inputType="text" style="height:20px;" id="column58" value="합 계" displayMode="label"
    						colSpan="2" rowSpan="">
    					</w2:column>
    					<w2:column hidden="false" width="80" inputType="text" style="height:20px;" id="column59" value=""
    						displayMode="label">
    					</w2:column>
    					<w2:column hidden="false" width="70" inputType="text" style="height:20px;" id="column60" value=""
    						displayMode="label">
    					</w2:column>
    					<w2:column width="80" inputType="text" style="height:20px" id="column52" value="" displayMode="label"></w2:column>
    					<w2:column width="80" inputType="expression" style="height:20px" id="amt_sum" value="" displayMode="label"
    						class="ri" dataType="number" displayFormat="#,###" expression="sum('amt')">
    					</w2:column>
    					<w2:column width="70" inputType="expression" style="height:20px" id="taxamt_sum" value="" displayMode="label"
    						class="ri" dataType="number" displayFormat="#,###" expression="sum('taxamt')">
    					</w2:column>
    					<w2:column width="200" inputType="text" style="height:20px" id="column48" value="" displayMode="label"></w2:column>
    				</w2:row>
    			</w2:footer>
    		</w2:gridView>
    		<xf:group class="titleSection" id="" style="">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="" label="공급 받는자 담당자 정보" style="" tagname="h3"></w2:textbox>
    				<w2:span class="note red" id="spa_span1" label="※ [재전송]은 전자발행후 공급받는자 정보를 다시 전송하고자 할 때만 이용할 수 있습니다.(재전송시 수정은 1행만 가능)"
    					style="">
    				</w2:span>
    			</xf:group>
    		</xf:group>
    		<w2:gridView autoFit="allColumn" class="grid" dataList="data:dlt_charg" defaultCellHeight="28" evenRowBackgroundColor="#f7faff"
    			id="grd_charg" noResultMessage="조회 결과가 없습니다." noResultMessageClass="noResult" rowMouseOverColor="#e7f0fb"
    			rowNumBackgroundColor="#fff" rowNumHeaderValue="No." rowNumVisible="false" rowNumWidth="60" rowStatusHeaderValue="상태"
    			rowStatusVisible="false" rowStatusWidth="50" scrollByColumn="false" scrollByColumnAdaptive="false" selectedCellColor="#fbf2cd"
    			selectedRowColor="#fbf2cd" style="height: 85px;" summaryAuto="true" visibleRowNum="2">
    			<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
    			<w2:header id="header1" style="">
    				<w2:row id="row1" style="">
    					<w2:column displayMode="label" id="column5" inputType="text" style="height:28px;" value="담당자" width="90"></w2:column>
    					<w2:column displayMode="label" id="column3" inputType="text" style="height:28px;" value="부서명" width="200"></w2:column>
    					<w2:column displayMode="label" id="column20" inputType="text" style="height:28px;" value="전화번호" width="120"></w2:column>
    					<w2:column displayMode="label" id="column29" inputType="text" style="height:28px;" value="휴대번호" width="130"></w2:column>
    					<w2:column displayMode="label" id="column32" inputType="text" style="height:28px" value="이메일" width="200"></w2:column>
    				</w2:row>
    			</w2:header>
    			<w2:gBody id="gBody1" style="">
    				<w2:row id="row2" style="">
    					<w2:column displayMode="label" escape="false" id="buyr_chrg_nm" inputType="text" style="height:28px;" width="90"
    						editModeEvent="onclick">
    					</w2:column>
    					<w2:column displayMode="label" escape="false" id="buyr_chrg_post" inputType="text" style="height:28px;" width="200"
    						class="le" editModeEvent="onclick">
    					</w2:column>
    					<w2:column displayMode="label" id="buyr_chrg_tel" inputType="text" style="height:28px;" width="120"
    						editModeEvent="onclick">
    					</w2:column>
    					<w2:column displayMode="label" id="buyr_chrg_mobl" inputType="text" style="height:28px;" width="130"
    						editModeEvent="onclick">
    					</w2:column>
    					<w2:column displayMode="label" id="buyr_chrg_email" inputType="text" style="height:28px" width="200" class="le"
    						editModeEvent="onclick">
    					</w2:column>
    				</w2:row>
    			</w2:gBody>
    		</w2:gridView>
    		<xf:group style="" id="" class="btnGroup">
    			<xf:group style="" id="" class="le"></xf:group>
    			<xf:group id="" class="ri">
    				<xf:trigger class=" btn pro " id="btn_resend" style="" type="button" disabled="true"
    					ev:onclick="scwin.btn_resend_onclick">
    					<xf:label><![CDATA[재전송]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="btn_upd_send" style="" type="button" disabled="true"
    					ev:onclick="scwin.btn_upd_send_onclick">
    					<xf:label><![CDATA[수정발행]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="btn_send" style="" type="button" disabled="true"
    					ev:onclick="scwin.btn_send_onclick">
    					<xf:label><![CDATA[전자발행]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro " ev:onclick="scwin.btn_issu_req_onclick" id="btn_issu_req" style="" type="button">
    					<xf:label><![CDATA[요청]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro " id="btn_del" style="" type="button" disabled="true" ev:onclick="scwin.btn_del_onclick">
    					<xf:label><![CDATA[삭제]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="btn_save" style="" type="button" ev:onclick="scwin.btn_save_onclick">
    					<xf:label><![CDATA[저장]]></xf:label>
    				</xf:trigger>
    				<xf:trigger style="" id="btn_close" type="button" class=" btn pro" ev:onclick="scwin.btn_close_onclick">
    					<xf:label><![CDATA[닫기]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    </body>
</html>
