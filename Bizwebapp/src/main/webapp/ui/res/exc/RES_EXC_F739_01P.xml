<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_programName="연구비 및 기술지원 입금의뢰" meta_author="이영희" meta_date="2023.05.16." meta_programId="F739">
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns=""/>
            </xf:instance>
            <w2:dataCollection baseNode="map">
            	<w2:dataMap baseNode="map" id="dma_search">
            		<w2:keyInfo>
            			<w2:key id="accnt_no" name="계정번호" dataType="text"></w2:key>
            			<w2:key id="depst_odr" name="예정차수" dataType="text"></w2:key>
            			<w2:key id="odr" name="순번" dataType="text"></w2:key>
            			<w2:key id="req_no" name="신청번호" dataType="text"></w2:key>
            			<w2:key id="apr_req_no" name="결재신청번호(연구)" dataType="text"></w2:key>
            			<w2:key id="biz_clsf" name="업무구분" dataType="text"></w2:key>
            			<w2:key id="acct_txday" name="입금일자" dataType="text"></w2:key>
            			<w2:key id="acct_txday_seq" name="입금순번" dataType="text"></w2:key>
            			<w2:key id="acct_no" name="계좌번호" dataType="text"></w2:key>
            			<w2:key id="depst_mngmt_no" name="입금관리번호(기술지원)" dataType="text"></w2:key>
            			<w2:key id="tax_bill_no" name="계산서번호" dataType="text"></w2:key>
            			<w2:key id="bill_no" name="계산서번호(기업지원)" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataList baseNode="list" id="dlt_depst" repeatNode="map" saveRemovedData="true" style="">
            		<w2:columnInfo>
            			<w2:column id="req_no" name="신청번호" dataType="text"></w2:column>
            			<w2:column id="accnt_no" name="계정번호" dataType="text"></w2:column>
            			<w2:column id="accnt_no_nm" name="계정명" dataType="text"></w2:column>
            			<w2:column id="tax_cd" name="과세구분" dataType="text"></w2:column>
            			<w2:column dataType="text" id="acct_txday" name="입금일자"></w2:column>
            			<w2:column dataType="text" id="acct_txday_seq" name="입금일자순번"></w2:column>
            			<w2:column id="depst_schdl_seq" name="입금예정차수" dataType="text"></w2:column>
            			<w2:column id="depst_schdl_detls_seq" name="입금순번" dataType="text"></w2:column>
            			<w2:column dataType="text" id="bankaccnt_no" name="계좌번호"></w2:column>
            			<w2:column id="bank_cd" name="은행" dataType="text"></w2:column>
            			<w2:column id="bank_nm" name="은행명" dataType="text"></w2:column>
            			<w2:column id="tx_amt" name="입금금액" dataType="text"></w2:column>
            			<w2:column id="remark" name="적요" dataType="text"></w2:column>
            			<w2:column dataType="text" id="depst_liq" name="입금의뢰금액"></w2:column>
            			<w2:column id="bf_depst_liq" name="이전입금의뢰금액" dataType="text"></w2:column>
            			<w2:column dataType="text" id="depst_unslip_no" name="가결의번호"></w2:column>
            			<w2:column dataType="text" id="depst_unslip_odr" name="가결의순번"></w2:column>
            			<w2:column id="recv_bill_no" name="영수계산서번호" dataType="text"></w2:column>
            			<w2:column id="depst_ymd" name="입금일자" dataType="text"></w2:column>
            			<w2:column dataType="text" id="slip_no" name="확정번호"></w2:column>
            			<w2:column dataType="text" id="slip_odr" name="확정번호순번"></w2:column>
            			<w2:column id="req_psn" name="신청자" dataType="text"></w2:column>
            			<w2:column id="req_psn_nm" name="신청자명" dataType="text"></w2:column>
            			<w2:column id="vend_cd" name="거래처코드" dataType="text"></w2:column>
            			<w2:column id="vend_abbr" name="거래처" dataType="text"></w2:column>
            			<w2:column id="rmk" name="비고" dataType="text"></w2:column>
            			<w2:column id="depst_clsf" name="입금구분" dataType="text"></w2:column>
            			<w2:column id="attach_file_no" name="첨부파일번호" dataType="text"></w2:column>
            			<w2:column id="unslip_no" name="정산결의번호" dataType="text"></w2:column>
            			<w2:column id="decsn_ex" name="확정여부" dataType="text"></w2:column>
            			<w2:column id="apr_state" name="결재상태" dataType="text"></w2:column>
            			<w2:column id="req_dept" name="신청부서" dataType="text"></w2:column>
            			<w2:column id="req_dept_new_ymd" name="신청부서신설일자" dataType="text"></w2:column>
            			<w2:column id="req_dept_nm" name="신청부서명" dataType="text"></w2:column>
            			<w2:column id="apr_req_no" name="결재신청번호" dataType="text"></w2:column>
            			<w2:column id="depst_mngmt_no" name="입금관리번호(기업지원)" dataType="text"></w2:column>
            			<w2:column id="cud_type" name="cud타입" dataType="text"></w2:column>

            		</w2:columnInfo>
            	</w2:dataList>
            	<w2:dataMap baseNode="map" id="dma_cancel">
            		<w2:keyInfo>
            			<w2:key id="req_no" name="결재신청번호" dataType="text"></w2:key>
            			<w2:key id="unslip_no" name="결의번호" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataMap baseNode="map" id="dma_bill">
            		<w2:keyInfo>
            			<w2:key id="tax_bill_no" name="계산서번호" dataType="text"></w2:key>
            			<w2:key id="totl_amt" name="총액" dataType="text"></w2:key>
            			<w2:key id="accnt_no" name="계정번호" dataType="text"></w2:key>
            			<w2:key id="vend_cd" name="거래처코드" dataType="text"></w2:key>
            			<w2:key id="vend_abbr" name="거래처명" dataType="text"></w2:key>
            			<w2:key id="issu_ymd" name="계산서발행일자" dataType="text"></w2:key>
            			<w2:key id="depst_odr" name="입금순번" dataType="text"></w2:key>
            			<w2:key id="odr" name="순번" dataType="text"></w2:key>
            			<w2:key id="depst_clsf" name="입금구분" dataType="text"></w2:key>
            			<w2:key id="cls_ymd" name="계정종료일자" dataType="text"></w2:key>
            			<w2:key id="tax_cd" name="과세구분" dataType="text"></w2:key>
            			<w2:key id="accnt_no_nm" name="계정명" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataList baseNode="list" repeatNode="map" id="dlt_depst_clsf" saveRemovedData="true">
            		<w2:columnInfo>
            			<w2:column id="comCd" name="코드" dataType="text"></w2:column>
            			<w2:column id="comNm" name="코드명" dataType="text"></w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection/>
            <!-- 조회 -->
            <xf:submission id="sbm_selectData" ref="data:json,dma_search" target='data:json,[{"id":"dlt_depst","key":"depstList"}]' 
        	    action="SvcFINFNDDEPR01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 저장 -->
            <xf:submission id="sbm_saveData" ref='data:json,[{"id":"dlt_depst","key":"depstList"}]' target='data:json,dma_search' 
        	    action="" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 삭제 -->
            <xf:submission id="sbm_deleteData" ref='data:json,[{"id":"dlt_depst","key":"depstList"}]' target='' 
        	    action="" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 결의취소 -->
            <xf:submission id="sbm_deleteSlip" ref='data:json,dma_cancel' target='' 
        	    action="SvcRESEXCDEPD03.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 기술지원 입금의뢰를 위한 조회 -->
            <xf:submission id="sbm_selectBill" ref="data:json,dma_search" target='data:json,dma_bill' 
        	    action="SvcSUPTECDEPR07.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <script src="/cm/js/biz/fin.js" cache="false"></script>
        <script type="text/javascript" lazy="false"><![CDATA[
    /****************************************************
 	 * 화면 설명 : 예금입금의뢰등록
	 * 변경 이력 : 2023-05-16	이영희	최초 작성
	            2023-12-14 	이영희	기술지원 기업부담금 입금의뢰 추가
	 * ServiceId : F739
 	 ****************************************************/  
 	scwin.data ={saveFlag : false}; 
 	 
 	/**
	 * 페이지 로딩 이벤트
	 */  
	scwin.onpageload = function() {		
		// 초기화
		btn_re_issu.hide(); // 재발행 버튼
		btn_slip_cancel.hide(); // 결의취소 버튼
		
		// enter key event
		com.setEnterKeyEvent(grp_vend, scwin.btn_vend_onclick);
		
		var param = com.getParameter();
		dma_search.setJSON(param);
		
		if(param.biz_clsf == "S"){ // 외부기술지원
			sbx_depst_clsf.setDisabled(true);
			btn_issu.hide();
							
			dma_search.set("bill_no", param.tax_bill_no);
			
			dlt_depst_clsf.setJSON([
				{"comCd":"FBD021", "comNm" : "기술지원비"}
			]);
		}else if(param.biz_clsf == "ST"){ // 기술지원 기업부담금
			sbx_depst_clsf.setDisabled(true);
			btn_accnt_no.setDisabled(false);
			ibx_accnt_no.setDisabled(false);
			
			scwin.data.attach_file_no = param.attach_file_no;
			
			var codeOptions = [ { code : "STX", compID :"sbx_depst_clsf", dltId : "dlt_depst_clsf" } // 입금예정구분 공통코드
			];
			com.setCmnCd(codeOptions, function(){
				dlt_depst_clsf.setJSON(ldt_cmnCd_STX_0.getAllJSON());
				
				scwin.data.depst_clsf = param.depst_clsf;
				scwin.data.totl_amt = param.totl_amt;
				scwin.data.rmk = param.rmk;
			});
		}else{
			spn_bill_req.hide(); // 계산서 필수(*)
			
			dlt_depst_clsf.setJSON([
				{"comCd":"FBD011", "comNm" : "연구비"},
				{"comCd":"FBD012", "comNm" : "참여기관연구비"},
				{"comCd":"FBD016", "comNm" : "기업부설연구비"},
			]);
		}		
		
		// 공통코드
		var codeOptions = [ { code : "FAA", compID :"sbx_bank,grd_depst:bank_cd" }, // 은행
							{ code : "XAD", compID :"grd_depst:apr_state" }
		                ];
		com.setCmnCd(codeOptions, function() {
			// apr_req_no : 연구비입금, depst_mngmt_no : 기술지원 입금
			if(dma_search.get("req_no") != "" || dma_search.get("apr_req_no") != "" || /S25/.test(dma_search.get("depst_mngmt_no"))){
				scwin.search();	
			}else{
				if(param.biz_clsf == "S"){
					com.execute(sbm_selectBill, {
						successCallback : function(e){
							dma_bill.set("depst_clsf", param.depst_clsf);
							
							btn_depst.trigger("click");
						}
					});
					
				}else if(param.biz_clsf == "ST"){ // 기업부담금 입금의뢰
					dma_bill.set("vend_cd", param.vend_cd);
					dma_bill.set("vend_abbr", param.vend_abbr);
					dma_bill.set("totl_amt", param.totl_amt);				
				}else{
					com.pop.open(com.pop.TYPE.ACNNO,{accnt_no:param.accnt_no}, function(ret){			
						dma_bill.setJSON(param);
						
						ibx_accnt_no.setValue(ret.accnt_no);
						spn_accnt_no_nm.setValue(ret.accnt_no_nm);		
						dma_bill.set("tax_cd", ret.tax_cd);
						dma_bill.set("cls_ymd", ret.cls_ymd);
						dma_bill.set("depst_odr", dma_search.get("depst_odr"));
						dma_bill.set("odr", dma_search.get("odr"));
						dma_bill.set("cls_ymd", ret.cls_ymd);						
					});
				}
			}			
		});				
	};
	
	scwin.onpageunload = function() {
		
	};	

	/**
	 * 조회
	 */ 
	scwin.search = function(){
		com.execute(sbm_selectData, {
			successCallback : function(e){
				if(dlt_depst.getRowCount() > 0){
					dma_bill.setJSON(dlt_depst.getRowJSON(0));
					dma_bill.set("tax_bill_no", dlt_depst.getCellData(0, "recv_bill_no"));
					dma_bill.set("depst_odr", dlt_depst.getCellData(0, "depst_schdl_seq"));
					dma_bill.set("odr", dlt_depst.getCellData(0, "depst_schdl_detls_seq"));
					
					if(dma_search.get("biz_clsf") == "ST"){ // 기술인재지원>기업부담금
						dma_bill.set("depst_clsf", scwin.data.depst_clsf);
						dma_bill.set("totl_amt", scwin.data.totl_amt);
					}
					
					var row = 0;
					if(dma_search.get("req_no") != ""){
						row = dlt_depst.getMatchedIndex("req_no", dma_search.get("req_no"), true)[0];
					}
					grd_depst.setFocusedCell(row, 0);
					
					if(dma_search.get("biz_clsf") == "S"){
						btn_save.setDisabled(true);
						btn_depst.setDisabled(true);
						
						if(dlt_depst.getCellData(0, "unslip_no") != ""){							
							btn_del.setDisabled(true);
						}else{
							btn_del.setDisabled(false);
						}
					}else if(dma_search.get("biz_clsf") == "ST"){ // 기업부담금 입금의뢰
						com.biz.disabledButtons(dlt_depst.getCellData(row, "apr_state"), dlt_depst.getCellData(row, "apr_req_no"));
					}else{
						com.biz.disabledButtons(dlt_depst.getCellData(0, "apr_state"), dlt_depst.getCellData(0, "apr_req_no"));
					
						if(dlt_depst.getCellData(0, "apr_state") >= "XAD020"){
							
						}else{
							if(dlt_depst.getCellData(0, "recv_bill_no") != ""){
								btn_re_issu.show("");
							}
							
							if(dlt_depst.getCellData(0, "req_no") != ""){
								btn_del.setDisabled(false);
								// 결의취소 버튼생성(2023.07.07.) - 결의취소 후 수정발행하도록 하기 위해서
								if(dlt_depst.getCellData(0, "unslip_no") != "" && dlt_depst.getCellData(0, "decsn_ex") != "Y"){
									btn_slip_cancel.show("");
								}
							}
						}
					}					
					
					// 인쇄버튼
					if(dlt_depst.getCellData(0, "req_no") != ""){
						btn_print.setDisabled(false);	
					}
				}
			}
		});
	};	
	
	/**
	 * 저장전 체크사항
	 */
	scwin.preSave = function(){	
		var depstLiqSum = 0;					
		for(var i=0; i<dlt_depst.getRowCount(); i++){
			debugger;
			dlt_depst.setCellData(i, "req_psn", com.getLoginInfo("sn"));
			dlt_depst.setCellData(i, "req_dept", com.getLoginInfo("deptCode"));
			dlt_depst.setCellData(i, "req_dept_new_ymd", com.getLoginInfo("deptNewYmd"));
				
			dlt_depst.setCellData(i, "depst_schdl_seq", dma_bill.get("depst_odr"));
			dlt_depst.setCellData(i, "depst_schdl_detls_seq", com.parseInt(dma_bill.get("odr") + i));
				
			dlt_depst.setCellData(i, "accnt_no", dma_bill.get("accnt_no"));
			dlt_depst.setCellData(i, "vend_cd", dma_bill.get("vend_cd"));
			dlt_depst.setCellData(i, "vend_abbr", dma_bill.get("vend_abbr"));
			dlt_depst.setCellData(i, "depst_clsf", dma_bill.get("depst_clsf"));
			dlt_depst.setCellData(i, "recv_bill_no", dma_bill.get("tax_bill_no"));
				
			if(dlt_depst.getCellData(i, "depst_unslip_no").trim() == ""){
				alert("가수결의가 생성되지 않은 건은 입금의뢰를 할 수 없습니다. ");
				return false;
			}
			
			if(dma_search.get("biz_clsf") == "R"){
				// FBD011 연구비, FBD012 참여기관연구비, FBD016 기업부설연구비
				if(!/FBD011|FBD012|FBD016/.test(dlt_depst.getCellData(i, "depst_clsf"))){
					var msg = "입금구분이 ["+ sbx_depst_clsf.getText() +"]일 때는 입금의뢰가 불가능합니다.";
					alert(msg);		
					return false;
				}
				
				if(dlt_depst.getCellData(i, "recv_bill_no").trim() == "" && dma_bill.get("tax_cd") == "FTX001"){
					alert("과세계정은 반드시 계산서를 발행해야 합니다.");
					return false;
				}
			}if(/S/.test(dma_search.get("biz_clsf"))){ // 외부기술지원, 기업부담금인 경우 계산서 필수
				if(dlt_depst.getCellData(i, "recv_bill_no").trim() == ""){
					alert("반드시 계산서를 발행해야 합니다.");
					return false;
				}
				
				if(dma_search.get("biz_clsf") == "ST"){
					dlt_depst.setCellData(i, "depst_mngmt_no", dma_search.get("depst_mngmt_no"));
					dlt_depst.setCellData(i, "attach_file_no", scwin.data.attach_file_no);
				}
			}
			
			depstLiqSum += com.parseInt(dlt_depst.getCellData(i, "depst_liq"));
		}
		
		// 필수값체크		
		if(!com.validateData(dlt_depst,[
			{ id : "depst_liq", mandatory : true, allowChar : "0-9"},
			{ id : "bankaccnt_no", mandatory : true},
			{ id : "bank_cd", mandatory : true},
			{ id : "acct_txday", mandatory : true},
			{ id : "req_psn", mandatory : true},
			{ id : "req_dept", mandatory : true},
			{ id : "accnt_no", mandatory : true},
			{ id : "vend_cd", mandatory : true},
			{ id : "depst_clsf", mandatory : true},
			{ id : "depst_unslip_no", mandatory : true},
			{ id : "depst_unslip_odr", mandatory : true},
		], false)) return false;	
		
		if(/S/.test(dma_search.get("biz_clsf"))){ // 외부기술지원, 기업부담금인 경우 계산서 필수				
			if(depstLiqSum != com.parseInt(dma_bill.get("totl_amt"))){
				alert("의뢰금액(총액)이 계산서 발행금액과 일치하지 않습니다. 확인바랍니다.");	
				return false;
			}
		}
				
		return true;		
	};
	
	//------------------------------------------------------------- event -------------------------------/	
	
	/**
	 * 인쇄버튼 클릭 이벤트
	 */
	scwin.btn_print_onclick = function(e) {	
		if(dma_search.get("biz_clsf") == "S"){
			
		}else{
			var node = "req_no=" + ibx_req_no.getValue() +"&scn_id=F739";
			com.oz.openPopup({
				ozrCode : "F048",      
				param: node
	        });
	    }
	};	
	
	/**
	 * 저장 버튼 클릭 이벤트
	 */
	scwin.btn_save_onclick = function(e) {	
		if(!scwin.preSave()) return;
		
		com.confirm("message.xom.wq.017"/*저장 하시겠습니까?*/, function( ret) {
			if (ret) {	
				if(dma_search.get("biz_clsf") == "S"){ // 기업지원
					sbm_saveData.action ="/SvcSUPTECDEPM01.pwkjson";
				}else if(dma_search.get("biz_clsf") == "ST"){ // 기술인재지원>기업부담금
					sbm_saveData.action ="/SvcSPTTLTDEPM02.pwkjson";
				}else{ // 연구비
					sbm_saveData.action ="/SvcRESEXCDEPM04.pwkjson";
				}
				com.execute(sbm_saveData, {
					successCallback : function(e) { // 성공 콜백					
						com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
							scwin.data.saveFlag = true;
							dma_search.set("req_no", e.responseJSON.elData.req_no);
							scwin.search();
						});										
					}
				});
			}
		});
	};	
	
	/**
	 * 삭제 버튼 클릭 이벤트
	 */
	scwin.btn_del_onclick = function(e) {	
		var aprReqNos = [];
		for(var i=0; i<dlt_depst.getRowCount(); i++){
			if(dlt_depst.getCellData(i, "apr_state") > "XAD020"){
				alert("결재중이므로 삭제할 수 없습니다.");
				return;
			}
			
			if(dlt_depst.getCellData(i, "apr_req_no") != ""){
				if(aprReqNos.every(function(elt) {
					return elt != dlt_depst.getCellData(i, "apr_req_no");
				})){
					aprReqNos.push(dlt_depst.getCellData(i, "apr_req_no"));
				}
			}
		}
		
		if(aprReqNos.length > 1){
			alert("결재신청번호가 같은 경우에만 삭제가능합니다.");
			return;
		}
		
		if(dlt_depst.getCellData(0, "recv_bill_no") != ""){
			alert("계산서를 먼저 폐기하셔야 합니다.");
			return;
		}
		
		if(dma_search.get("biz_clsf") == "S"){ // 기업지원
			sbm_deleteData.action ="/SvcSUPTECDEPD01.pwkjson";			
		}else if(dma_search.get("biz_clsf") == "ST"){ // 기술인재지원>기업부담금
			sbm_saveData.action ="/SvcSPTTLTDEPD02.pwkjson";			
		}else{ // 연구비
			sbm_deleteData.action ="/SvcRESEXCDEPD02.pwkjson";
		}
		com.confirm("message.xom.wq.022"/*삭제 하시겠습니까?*/, function(ret) {
			if (ret) {
				com.execute(sbm_deleteData, {
					successCallback : function(e) { // 성공 콜백
						com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {								
							com.closePopup({clsf : "DEL"}); 
						});
					}
				});
			}
		});
	};	
	
	/**
	 * 닫기 버튼 클릭 이벤트
	 */
	scwin.btn_close_onclick = function(e) {
		if(scwin.data.saveFlag){
			com.closePopup({clsf : "SAVE"});
		}else{
			com.closePopup();
		}		
	};	
	
	/**
	 * 입금조회 버튼 클릭 이벤트
	 */
	scwin.btn_depst_onclick = function(e) {
		var data ={
			biz_clsf : dma_search.get("biz_clsf"),
			ref_yn : "Y"
		};

		if(dma_search.get("biz_clsf") == "S"){
			data.bankaccnt_no = com.getParameter("bankaccnt_no");
			data.tx_amt = dma_bill.get("totl_amt");
		};
		com.pop.open(com.pop.TYPE.DEPST, data, function(ret){
			var retArr = (Array.isArray(ret))? ret : new Array(ret);
			
			var rowCnt = dlt_depst.getRowCount();	
			var cnt = 0;			
			// 내부함수
			var setDepst = function(row, data){
				dlt_depst.setRowJSON(row, data);
				dlt_depst.setCellData(row, "cud_type", "C");
				dlt_depst.setCellData(row, "depst_liq", data.ramt);
				if(dma_search.get("biz_clsf") == "ST"){
					dlt_depst.setCellData(row, "rmk", scwin.data.rmk);
				}else{
					dlt_depst.setCellData(row, "rmk", data.remark);
				}
			};
			
			for(var i=0; i<retArr.length; i++){
				var data = retArr[i];
				
				var dupleFlag = false;
				for(var j=0; j<rowCnt; j++){
					if(data.acct_txday == dlt_depst.getCellData(j, "acct_txday") && data.acct_txday_seq == dlt_depst.getCellData(j, "acct_txday_seq")){
						alert("선택한 자료가 [" + (j+1) + "]행과 중복되고 있습니다.");
						dupleFlag = true;
						break;
					}
				}
				
				if(!dupleFlag){
					(setDepst)(rowCnt+cnt, data);
					cnt++;
				}
			}
			
			grd_depst.setFocusedCell(0, 0);
		});
	};
	
	/**
	 * 입금처 버튼 클릭 이벤트
	 */
	scwin.btn_vend_onclick = function(e) {
		com.pop.open(com.pop.TYPE.VEND, {ref_yn : "Y"}, function(ret){
			ibx_vend_cd.setValue(ret.vend_cd);
			for(var i=0; i<dlt_depst.getRowCount(); i++){
				dlt_depst.setCellData(i, "vend_abbr", ret.vend_abbr);
			}
		});
	};
	
	/**
	 * 계산서 검색 버튼 클릭 이벤트
	 */
	scwin.btn_bill_onclick = function(e) {
		if(dlt_depst.getRowCount() == 0){
			alert("입금내역을 먼저 조회하시기 바랍니다.");
			return;	
		}
		
		var data={
			demnd_recv_clsf : "2",
			biz_clsf : dma_search.get("biz_clsf"),
			accnt_no : ibx_accnt_no.getValue(),
			tax_type : (dma_bill.get("tax_cd") == "FTX001")? "01" : "03",
			ref_yn : "Y"
		};
		
		com.pop.open(com.pop.TYPE.FTXBILL, data, function(ret) {			
			dma_bill.set("tax_bill_no", ret.tax_bill_no);
		});
	};
	
	/**
	 * 계산서 발행 버튼 클릭 이벤트
	 */
	scwin.btn_issu_onclick = function(e) {
		if(dlt_depst.getRowCount() == 0){
			alert("입금내역을 먼저 조회하시기 바랍니다.");
			return;	
		}
		
		var data={
			demnd_recv_clsf : "2",
			biz_clsf : dma_search.get("biz_clsf"),
			tax_type : (dma_bill.get("tax_cd") == "FTX001")? "01" : "03",
			tax_bill_no : ibx_tax_bill_no.getValue(),
			accnt_no : ibx_accnt_no.getValue(),
			vend_cd : ibx_vend_cd.getValue(),
			totl_amt : ibx_depst_liq.getValue(),
			type : (ibx_unslip_no.getValue() != "")? "R":"",
			ref_yn : "Y"
		};
		
		if(dma_search.get("biz_clsf") == "S"){
			data.vend_cd = ibx_vend_cd.getValue();
			data.cls_ymd = dma_bill.get("cls_ymd");
		}
		
		com.pop.open(com.pop.TYPE.RVN_BILL, data, function(ret) {
			ibx_tax_bill_no.setValue(ret.tax_bill_no);
			ibx_accnt_no.setValue(ret.accnt_no);
		});
	};
	
	/**
	 * 수정계산서 발행 버튼 클릭 이벤트
	 */
	scwin.btn_re_issu_onclick = function(e) {
		var data={
			tax_bill_no : ibx_tax_bill_no.getValue(),
			biz_clsf : dma_search.get("biz_clsf"),
			type : "U",		
			ref_yn : "Y"
		};
		
		com.pop.open(com.pop.TYPE.RVN_BILL, data, function(ret) {
			ibx_tax_bill_no.setValue(ret.tax_bill_no);
		});
	};
	
	/**
	 * 결의취소 버튼 클릭 이벤트
	 */
	scwin.btn_slip_cancel_onclick = function(e) {
		for(var i=0; i<dlt_depst.getRowCount(); i++){
			if(dlt_depst.getCellData(i, "decsn_ex") == "Y"){
				alert("결의서가 확정되어서 삭제할 수 없습니다.");
				return;
			}
		}
		
		dma_cancel.set("unslip_no", dlt_depst.getCellData(0, "unslip_no"));
		dma_cancel.set("req_no", dlt_depst.getCellData(0, "apr_req_no"));
		
		com.confirm("message.xom.wq.022"/*삭제 하시겠습니까?*/, function(ret) {
			if (ret) {
				com.execute(sbm_deleteSlip, {
					successCallback : function(e) { // 성공 콜백
						com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {								
							scwin.search();
						});
					}
				});
			}
		});
	};
	
	/**
	* 계정번호 키클릭 이벤트
	*/
	scwin.ibx_accnt_no_onkeyup = function(e) {
		if(e.keyCode == 13){
			btn_accnt_no.trigger("click");
		}else if(e.keyCode != 9 && e.keyCode != 229){
			spn_accnt_no_nm.setValue("");
		}
	};
	
	/**
	* 계정번호 검색 버튼 클릭 이벤트
	*/
	scwin.btn_accnt_no_onclick = function(e) {
		var data = { accnt_no : ibx_accnt_no.getValue(),
		             ref_yn : (ibx_accnt_no.getValue()=="")? "Y" : "N" 
		}; 
		
		com.pop.open( com.pop.TYPE.ACNNO, data, function(ret){
			ibx_accnt_no.setValue(ret.accnt_no);
			spn_accnt_no_nm.setValue(ret.accnt_no_nm);
			
			dma_bill.set("cls_ymd", ret.cls_ymd);
			dma_bill.set("tax_cd", ret.tax_cd);
		});
	};
	]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<xf:group id="" class="pop_contents">
    		<xf:group class="titleSection" id="" style="margin-top:5px;">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="tbx_title" label="입금정보" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="ri" id="" style="">
    				<xf:trigger class="btn icon print" disabled="true" ev:onclick="scwin.btn_print_onclick" id="btn_print" style=""
    					type="button">
    					<xf:label><![CDATA[인쇄]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="width:220px;" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="입금일자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dlt_depst.acct_txday" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계좌번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dlt_depst.bankaccnt_no" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="은행" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" style="" ref="data:dlt_depst.bank_nm"></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="적요" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dlt_depst.remark" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="입금금액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td ri" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span dataType="number" displayFormat="#,###" escape="false" id="" label="000" ref="data:dlt_depst.tx_amt"
    						style="">
    					</w2:span>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="titleSection" id="" style="">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="" label="입금내역" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="re" id="" style="">
    				<w2:span class="note red" id="" label="*1개의 계산서에 대하여 2개이상으로 입금시 입금내역을 다건조회하여 입금의뢰할 수 있습니다."
    					style="margin-right:10px;">
    				</w2:span>
    				<xf:trigger class="btn" ev:onclick="scwin.btn_depst_onclick" id="btn_depst" style="" type="button">
    					<xf:label><![CDATA[입금조회]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<w2:gridView autoFit="allColumn" class="grid" dataList="data:dlt_depst" defaultCellHeight="28" editModeEvent="onclick"
    			evenRowBackgroundColor="#f7faff" id="grd_depst" noResultMessage="조회 결과가 없습니다." noResultMessageClass="noResult"
    			rowMouseOverColor="#e7f0fb" rowNumBackgroundColor="#fff" rowNumHeaderValue="No." rowNumVisible="false" rowNumWidth="60"
    			rowStatusHeaderValue="상태" rowStatusVisible="false" rowStatusWidth="50" scrollByColumn="false" scrollByColumnAdaptive="false"
    			selectedCellColor="#fbf2cd" selectedRowColor="#fbf2cd" style="height: 85px;" summaryAuto="true" visibleRowNum="2" readOnly="true">
    			<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
    			<w2:header id="header1" style="">
    				<w2:row id="row1" style="">
    					<w2:column displayMode="label" id="column5" inputType="text" style="height:28px;" value="입금일자" width="90"></w2:column>
    					<w2:column displayMode="label" fixColumnWidth="true" id="column7" inputType="text" style="height:28px;" value="순번"
    						width="45">
    					</w2:column>
    					<w2:column colSpan="" displayMode="label" id="column34" inputType="text" rowSpan="" style="height:28px;"
    						value="입금의뢰번호" width="90">
    					</w2:column>
    					<w2:column width="140" inputType="text" style="height:28px" id="column50" value="입금처" displayMode="label"></w2:column>
    					<w2:column displayMode="label" id="column3" inputType="text" style="height:28px;" value="계좌번호" width="120"></w2:column>
    					<w2:column displayMode="label" id="column20" inputType="text" style="height:28px;" value="입금은행" width="90"></w2:column>
    					<w2:column displayMode="label" id="column29" inputType="text" style="height:28px;" value="입금액" width="90"></w2:column>
    					<w2:column displayMode="label" id="column27" inputType="text" style="height:28px;" value="온라인가수결의" width="90"></w2:column>
    					<w2:column displayMode="label" id="column25" inputType="text" style="height:28px;" value="결의순번" width="48"></w2:column>
    					<w2:column width="70" inputType="text" style="height:28px" id="column56" value="신청자" displayMode="label"></w2:column>
    					<w2:column width="90" inputType="text" style="height:28px" id="column47" value="결재상태" displayMode="label"></w2:column>
    				</w2:row>
    			</w2:header>
    			<w2:gBody id="gBody1" style="">
    				<w2:row id="row2" style="">
    					<w2:column class="" displayMode="label" escape="false" id="acct_txday" inputType="calendar" style="height:28px;"
    						width="90" readOnly="true">
    					</w2:column>
    					<w2:column class="" displayMode="label" id="acct_txday_seq" inputType="text" readOnly="true" style="height:28px;"
    						width="45px">
    					</w2:column>
    					<w2:column class="" displayMode="label" id="req_no" inputType="text" style="" value="" width="90"></w2:column>
    					<w2:column width="140" inputType="text" style="height:28px" id="vend_abbr" value="" displayMode="label"
    						class="le">
    					</w2:column>
    					<w2:column class="" dataType="text" displayMode="label" escape="false" id="bankaccnt_no" inputType="text"
    						style="height:28px;" width="120">
    					</w2:column>
    					<w2:column displayMode="label" id="bank_cd" inputType="select" style="height:28px;" width="90"></w2:column>
    					<w2:column class="ri" dataType="number" displayFormat="#,###" displayMode="label" id="depst_liq" inputType="text"
    						style="height:28px;" width="90">
    					</w2:column>
    					<w2:column class="" dataType="text" displayMode="label" id="depst_unslip_no" inputType="text" readOnly="true"
    						style="height:28px;" width="90">
    					</w2:column>
    					<w2:column class="" displayMode="label" id="depst_unslip_odr" inputType="text" readOnly="true" style="height:28px;"
    						width="48">
    					</w2:column>
    					<w2:column width="70" inputType="text" style="height:28px" id="req_psn_nm" value="" displayMode="label"></w2:column>
    					<w2:column width="90" inputType="select" style="height:28px" id="apr_state" value="" displayMode="label"></w2:column>
    				</w2:row>
    			</w2:gBody>
    			<w2:footer id="footer1" style="">
    				<w2:row id="row3" style="">
    					<w2:column displayMode="label" id="column43" inputType="text" style="height:28px;" value="합계" width="200"
    						colSpan="3" rowSpan="">
    					</w2:column>
    					<w2:column width="120" inputType="text" style="height:28px" id="column52" value="" displayMode="label"></w2:column>
    					<w2:column displayMode="label" id="column40" inputType="text" style="height:28px;" value="" width="90"></w2:column>
    					<w2:column class="" displayMode="label" id="" inputType="" style="height:28px;" value="" width="90">
    					</w2:column>
    					<w2:column class="ri" displayMode="label" id="depst_liq_sum" inputType="text" style="height:28px;" value="" width="90" expression="sum('depst_liq')" dataType="number" displayFormat="#,###">
    					</w2:column>
    					<w2:column displayMode="label" id="column37" inputType="text" style="height:28px;" value="" width="48"></w2:column>
    					<w2:column displayMode="label" id="column36" inputType="text" style="height:28px;" value="" width="90"></w2:column>
    					<w2:column width="70" inputType="text" style="height:28px" id="column58" value="" displayMode="label"></w2:column>
    					<w2:column width="90" inputType="text" style="height:28px" id="column49" value="" displayMode="label"></w2:column>
    				</w2:row>
    			</w2:footer>
    		</w2:gridView>
    		<xf:group class="titleSection" id="" style="">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="" label="입금내역 상세" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="re" id="" style=""></xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="width:220px;" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:textbox id="" label="입금일자/순번" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" dataType="date" disabled="true" displayFormat="yyyy-MM-dd" id=""
    						ref="data:dlt_depst.acct_txday" style="width:120px;" title="입금일자">
    					</xf:input>
    					<xf:input adjustMaxLength="false" class="inp" disabled="true" id="" ref="data:dlt_depst.acct_txday_seq"
    						style="width:30px;" title="순번">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:textbox id="" label="입금의뢰번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" disabled="true" id="ibx_req_no" ref="data:dlt_depst.req_no" style=""
    						title="입금의뢰번호">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="의뢰자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" disabled="true" id="ibx_req_psn_nm" style="width: 120px;" title="의뢰자" ref="data:dlt_depst.req_psn_nm">
    					</xf:input>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="계좌번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" disabled="true" id="" ref="data:dlt_depst.bankaccnt_no" style=""
    						title="계좌번호">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="은행" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-" class="sel req"
    						direction="auto" disabled="true" disabledClass="w2selectbox_disabled" id="sbx_bank" style="width: 120px;" submenuSize="auto"
    						title="은행" ref="data:dlt_depst.bank_cd">
    						<xf:choices></xf:choices>
    					</xf:select1>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:textbox id="" label="결의번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" disabled="true" id="ibx_unslip_no" ref="data:dlt_depst.unslip_no"
    						style="width: 120px;" title="결의번호">
    					</xf:input>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="입금의뢰금액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp req ri" dataType="number" displayFormat="#,###" id="ibx_depst_liq" style=""
    						title="입금금액" ref="data:dlt_depst.depst_liq">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:textbox id="" label="입금가결의번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" disabled="true" id="" ref="data:dlt_depst.depst_unslip_no"
    						style="width:120px;" title="입금가결의번호">
    					</xf:input>
    					<xf:input adjustMaxLength="false" class="inp" disabled="true" id="" ref="data:dlt_depst.depst_unslip_odr"
    						style="width:30px;" title="순번">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes></w2:attributes>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="titleSection" id="" style="">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="" label="관련내역" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="re" id="" style=""></xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계정번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" disabled="true" id="ibx_accnt_no" style="width:100px;" title="계정번호"
    						ref="data:dma_bill.accnt_no" ev:onkeyup="scwin.ibx_accnt_no_onkeyup">
    					</xf:input>
    					<xf:trigger class="btn glass" ev:onclick="scwin.btn_accnt_no_onclick" id="btn_accnt_no" style="" type="button" disabled="true">
    						<xf:label><![CDATA[검색]]></xf:label>
    					</xf:trigger>
    					<w2:span escape="false" id="spn_accnt_no_nm" label="000" ref="data:dma_bill.accnt_no_nm"
    						style="margin-left : 5px;">
    					</w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="거래처" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:group id="" class="flex">
    						<xf:group style="width: 120px;" id="grp_vend" class="inpSch">
    							<xf:input adjustMaxLength="false" style="" id="ibx_vend_cd" class="inp req"
    								readOnly="true" ref="data:dma_bill.vend_cd">
    							</xf:input>
    							<xf:trigger style="" id="btn_vend" title="거래처 조회" type="button" class="btn"
    								ev:onclick="scwin.btn_vend_onclick" disabled="true">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:input adjustMaxLength="false" class="inp" dataType="text" id="ibx_vend_abbr" style="width: 150px;"
    							title="계좌번호" disabled="true" ref="data:dma_bill.vend_abbr">
    						</xf:input>
    					</xf:group>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="spn_bill_req" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="계산서번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<xf:group class="flex" id="" style="">
    						<xf:group class="inpSch" id="grp_bill" style="width: 180px;">
    							<xf:input adjustMaxLength="false" class="inp" ev:onclick="" id="ibx_tax_bill_no" readOnly="true"
    								ref="data:dma_bill.tax_bill_no" style="" title="계산서번호">
    							</xf:input>
    							<xf:trigger class="btn" ev:onclick="scwin.btn_bill_onclick" id="btn_bill" style="" title="매출계산서 조회"
    								type="button">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:trigger class="btn" ev:onclick="scwin.btn_issu_onclick" id="btn_issu" style="" type="button">
    							<xf:label><![CDATA[발행]]></xf:label>
    						</xf:trigger>
    						<xf:trigger class="btn" ev:onclick="scwin.btn_re_issu_onclick" id="btn_re_issu" style=""
    							type="button">
    							<xf:label><![CDATA[수정발행]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="비고" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full le" dataType="text" id="" style="" title="비고"
    						ref="data:dlt_depst.rmk">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="입금구분" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-" class="sel req"
    						direction="auto" disabled="false" disabledClass="w2selectbox_disabled" id="sbx_depst_clsf" style="width: 120px;"
    						submenuSize="auto" title="입금구분" ref="data:dma_bill.depst_clsf">
    						<xf:choices>
    							<xf:itemset nodeset="data:dlt_depst_clsf">
    								<xf:label ref="comNm"></xf:label>
    								<xf:value ref="comCd"></xf:value>
    							</xf:itemset>
    						</xf:choices>
    					</xf:select1>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group style="" id="" class="btnGroup">
    			<xf:group style="" id="" class="le">
    				<w2:span class="note red" id="" label="* 삭제버튼은 입금내역과 결의서가 동시에 삭제됩니다.&lt;br/&gt;* 결의취소는 결의서만 삭제됩니다.(계산서수정발행이 필요한 경우)"
    					style="margin-right:10px;" escape="false">
    				</w2:span>
    			</xf:group>
    			<xf:group id="" class="ri">
    				<xf:trigger class=" btn pro " ev:onclick="scwin.btn_close_onclick" id="btn_close" style="" type="button">
    					<xf:label><![CDATA[닫기]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro " id="btn_slip_cancel" style="" type="button" ev:onclick="scwin.btn_slip_cancel_onclick">
    					<xf:label><![CDATA[결의취소]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro " id="btn_del" style="" type="button" disabled="true" ev:onclick="scwin.btn_del_onclick">
    					<xf:label><![CDATA[삭제]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="btn_save" style="" type="button" ev:onclick="scwin.btn_save_onclick">
    					<xf:label><![CDATA[저장]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    </body>
</html>
