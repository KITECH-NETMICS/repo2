<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_programName="연구비청구의뢰" meta_author="이영희" meta_date="2023.04.21." meta_programId="RF42">
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns=""/>
            </xf:instance>
            <w2:dataCollection baseNode="map">
            	<w2:dataMap baseNode="map" id="dma_search">
            		<w2:keyInfo>
            			<w2:key id="demnd_recv_clsf" name="청구영수구분" dataType="text"></w2:key>
            			<w2:key id="accnt_no" name="계정번호" dataType="text"></w2:key>
            			<w2:key id="depst_odr" name="예정차수" dataType="text"></w2:key>
            			<w2:key id="req_no" name="신청번호" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataMap baseNode="map" id="dma_demnd">
            		<w2:keyInfo>
            			<w2:key id="accnt_no" name="계정번호" dataType="text"></w2:key>
            			<w2:key id="depst_odr" name="입금차수" dataType="text"></w2:key>
            			<w2:key id="odr" name="순번" dataType="text"></w2:key>
            			<w2:key id="depst_loc" name="입금처" dataType="text"></w2:key>
            			<w2:key id="vend_abbr" name="입금처명" dataType="text"></w2:key>
            			<w2:key id="reprs_psn_nm" name="대표자" dataType="text"></w2:key>
            			<w2:key id="bsns_psn_regst_no" name="사업자등록번호" dataType="text"></w2:key>
            			<w2:key id="addr" name="주소" dataType="text"></w2:key>
            			<w2:key id="req_no" name="청구의뢰번호" dataType="text"></w2:key>
            			<w2:key id="bill_no" name="계산서번호" dataType="text"></w2:key>
            			<w2:key id="req_ymd" name="결의일자" dataType="text"></w2:key>
            			<w2:key id="req_psn" name="신청자" dataType="text"></w2:key>
            			<w2:key id="demnd_liq" name="청구금액" dataType="text"></w2:key>
            			<w2:key id="suply_value" name="공급가액" dataType="text"></w2:key>
            			<w2:key id="tax_amt" name="부가세" dataType="text"></w2:key>
            			<w2:key id="depst_clsf" name="청구구분" dataType="text"></w2:key>
            			<w2:key id="unslip_no" name="결의번호" dataType="text"></w2:key>
            			<w2:key id="attach_file_no" name="첨부파일" dataType="text"></w2:key>
            			<w2:key id="req_psn_empno" name="신청자개인번호" dataType="text"></w2:key>
            			<w2:key id="req_psn_nm" name="신청자명" dataType="text"></w2:key>
            			<w2:key id="evid_cd" name="증빙코드" dataType="text"></w2:key>
            			<w2:key id="issu_ymd" name="발행일자" dataType="text"></w2:key>
            			<w2:key id="state_nm" name="전자발행상태" dataType="text"></w2:key>
            			<w2:key id="validAttachNo" name="첨부파일번호" dataType="text"></w2:key>
            			<w2:key id="apr_state" name="결재상태" dataType="text"></w2:key>
            			<w2:key id="decsn_ex" name="확정여부" dataType="text"></w2:key>
            			<w2:key id="approval" name="결재여부" dataType="text"></w2:key>
            			<w2:key id="rmk" name="비고" dataType="text"></w2:key>
            			<w2:key id="issu_id" name="전자계산서발행일련번호" dataType="text"></w2:key>
            			<w2:key id="recp_yn" name="역전자여부" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataMap baseNode="map" id="dma_prj">
            		<w2:keyInfo>
            			<w2:key dataType="text" id="accnt_no" name="계정번호"></w2:key>
            			<w2:key dataType="text" id="prj_no" name="과제번호"></w2:key>
            			<w2:key dataType="text" id="accnt_no_nm" name="계정번호명"></w2:key>
            			<w2:key dataType="text" id="accnt_rspns" name="계정책임자"></w2:key>
            			<w2:key dataType="text" id="start_ymd" name="시작일자"></w2:key>
            			<w2:key dataType="text" id="cls_ymd" name="종료일자"></w2:key>
            			<w2:key dataType="text" id="accnt_state" name="계정상태"></w2:key>
            			<w2:key dataType="text" id="tax_cd" name="과세코드"></w2:key>
            			<w2:key dataType="text" id="itm_solve_base" name="비목해소기준"></w2:key>
            			<w2:key dataType="text" id="accnt_clsf" name="계정구분"></w2:key>
            			<w2:key dataType="text" id="accnt_rspns_nm" name="계정책임자성명"></w2:key>
            			<w2:key dataType="text" id="bsns_cd_bsns_nm" name="사업구분"></w2:key>
            			<w2:key dataType="text" id="tot_resch_cash_tax_amt" name="입금연구비(부가세포함)"></w2:key>
            			<w2:key dataType="text" id="card_use_ex" name="연구비구분"></w2:key>
            			<w2:key id="prj_kind" name="과제참여유형" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataMap baseNode="map" id="dma_cancel" style="">
            		<w2:keyInfo>
            			<w2:key dataType="text" id="req_no" name="결재신청번호"></w2:key>
            			<w2:key dataType="text" id="unslip_no" name="결의번호"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            </w2:dataCollection>
            <w2:workflowCollection/>
            <!-- 조회 -->
            <xf:submission id="sbm_selectData" ref="data:json,dma_search" target='data:json,[{"id":"dma_prj","key":"prjVo"},{"id":"dma_demnd","key":"demndVo"}]' 
        	    action="SvcRESEXCDMDR01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 저장 -->
            <xf:submission id="sbm_saveData" ref="data:json,dma_demnd" target='data:json,dma_search' 
        	    action="SvcRESEXCDMDM01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 삭제 -->
            <xf:submission id="sbm_deleteData" ref="data:json,dma_demnd" target='' 
        	    action="SvcRESEXCDMDM02.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 결의취소 -->
            <xf:submission id="sbm_deleteSlip" ref='data:json,dma_cancel' target='' 
        	    action="SvcRESEXCDEPD03.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <script src="/cm/js/biz/fin.js" cache="false"></script>
        <script type="text/javascript" lazy="false"><![CDATA[
    /****************************************************
 	 * 화면 설명 : 연구비청구의뢰
	 * 변경 이력 : 2023-04-21	이영희	최초 작성
	 * ServiceId : RF42
 	 ****************************************************/  
 	scwin.data ={isApproval : false,
 	             saveFlag : false
 	}; 
 	 
 	/**
	 * 페이지 로딩 이벤트
	 */  
	scwin.onpageload = function() {
		// 첨부파일 컴포넌트 초기화
		com.file.init();	
		btn_re_issu.hide();
		btn_slip_cancel.hide();
		
		var param = com.getParameter();
		dma_search.setJSON(param);

		if(param.param4 == "apr"){
			btn_close.hide();
		}
		
		if(param.odr != undefined){
			scwin.data.odr = param.odr;
		}

		if(param.depst_clsf != undefined){
			scwin.data.depst_clsf = param.depst_clsf;
		}
		
		// 공통코드
		var codeOptions = [ { code : "FBD", compID :"sbx_depst_clsf" } // 청구구분
		                ];
		com.setCmnCd(codeOptions, function() {
			scwin.search();
		});				
	};
	
	scwin.onpageunload = function() {
		
	};
	
	/**
	 * 초기작성
	 */
	scwin.init = function(){
		com.file.create(upload_A.getID(), {fileKey: 'RF42', mode: 'edit'});	
				
		// 작성자
		var session = com.getLoginInfo();
		dma_demnd.set("req_psn", session.sn);
		dma_demnd.set("req_psn_empno", session.empno);
		dma_demnd.set("req_psn_nm", session.cn);
		dma_demnd.set("depst_clsf",scwin.data.depst_clsf);
		dma_demnd.set("odr",scwin.data.odr);
	};

	/**
	 * 조회
	 */ 
	scwin.search = function(){
		com.execute(sbm_selectData, {
			successCallback : function(e){
				spn_prd.setValue(com.formatDate(dma_prj.get("start_ymd"), "dash") + "~" + com.formatDate(dma_prj.get("cls_ymd"), "dash"));

				// 버튼 제어
				com.biz.disabledButtons(dma_demnd.get("apr_state"), dma_demnd.get("req_no"));							
				
				// 첨부파일
				var vMode = (dma_demnd.get("apr_state") >= "XAD020")? "view" : "edit";
				com.file.create(upload_A.getID(), {fileKey: (dma_demnd.get("attach_file_no") == "")? "RF42" : dma_demnd.get("attach_file_no"), mode: vMode});
				
				if(dma_demnd.get("req_no") != ""){
					btn_print.setDisabled(false);					
					
					if(dma_demnd.get("apr_state") < "XAD020" && dma_demnd.get("decsn_ex") == "N"){
						if(dma_demnd.get("recp_yn") == "Y"){
							btn_issu.hide();
						}else{
							btn_rev_issu.hide();
							if(dma_demnd.get("state_nm") =="국세청 전송완료"){
								// 수정발행버튼
								btn_re_issu.show("");
							}
						}
						
						if(dma_demnd.get("unslip_no") != ""){
							btn_slip_cancel.show("");
						}
					}
				}else{
					scwin.init();	
				}	
			}
		});
	};	
	
	/**
	 * 저장전 체크사항
	 */
	scwin.preSave = function(){			
		// 필수값체크		
		if(!com.validateData(dma_demnd,[
			{ id : "bill_no", mandatory : true},
			{ id : "req_ymd", mandatory : true}
		], false)) return false;
		
		if(com.parseInt(ibx_totl_amt.getValue()) != com.parseInt(dma_demnd.get("suply_value")) + com.parseInt(dma_demnd.get("tax_amt"))){
			alert("청구금액이 [공급가액+부가세액]과 일치하지 않습니다.");
			return false;
		}
		
		return true;		
	};
	
	
	/**
	 * 저장
	 */
	scwin.save = function(){
		dma_demnd.set("evid_cd", (dma_prj.get("tax_cd") == "FTX001")? "FAH212" :"FAH211");
		
		com.file.transport( function( attachObj){
			dma_demnd.set("attach_file_no", attachObj.upload_A);
			dma_demnd.set("validAttachNo", attachObj.upload_A);	
							
			com.execute(sbm_saveData, {
				successCallback : function(e) { // 성공 콜백
					if(scwin.data.isApproval){						
						com.movePageMenu("A001", {"reqNo" : dma_demnd.get("req_no")});
					}else{
						scwin.data.saveFlag = true;
						
						com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
							scwin.search();
						});	
					}				
				}
			});
		});
	};	
	
	/**
	 * 청구금액 셋팅
	 */
	scwin.setDemndLiq = function(data){
		ibx_tax_bill_no.setValue(data.tax_bill_no);
		ibx_totl_amt.setValue(data.totl_amt);
		dma_demnd.set("suply_value", data.suply_value);
		dma_demnd.set("tax_amt", data.taxamt);
		dma_demnd.set("issu_ymd", data.issu_ymd);
		
		ica_req_ymd.setValue(com.getServerDateTime());
	};
	//------------------------------------------------------------- event -------------------------------/	
	
	/**
	 * 인쇄버튼 클릭 이벤트
	 */
	scwin.btn_print_onclick = function(e) {		
		var node = "req_no=" + dma_demnd.get("req_no");
		com.oz.openPopup({
			ozrCode : "R005",      
			param: node
        });
	};	
	
	/**
	 * 저장 버튼 클릭 이벤트
	 */
	scwin.btn_save_onclick = function(e) {
		if(!scwin.preSave()) return;
		
		com.confirm("message.xom.wq.017"/*저장 하시겠습니까?*/, function( ret) {
			if (ret) {
				scwin.save();
			}
		});
	};	
	
	/**
	 * 삭제 버튼 클릭 이벤트
	 */
	scwin.btn_del_onclick = function(e) {	
		if(dma_demnd.get("apr_state") >= "XAD020"){
			alert("결재중이므로 삭제할 수 없습니다.");
			return;
		}
		
		if(dma_demnd.get("bill_no") != ""){
			alert("계산서를 먼저 폐기하셔야 합니다.");
			return;
		}
			
		com.confirm("message.xom.wq.022"/*삭제 하시겠습니까?*/, function(ret) {
			if (ret) {
				com.file.deleteAll( function(){
					com.execute(sbm_deleteData, {
						successCallback : function(e) { // 성공 콜백
							if(com.getParameter("param4") == "apr"){
								com.movePageMenu("A010");
							}else{
								com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {								
									com.closePopup({}); 
								});
							}
						}
					});
				});
			}
		});
	};	
	
	
	/**
	 * 계산서 검색 버튼 클릭 이벤트
	 */
	scwin.btn_bill_onclick = function(e) {
		var data={
			demnd_recv_clsf : "1",
			biz_clsf : "R",
			accnt_no : dma_prj.get("accnt_no"),
			tax_type : (dma_prj.get("tax_cd") == "FTX001")? "01" : "03",
			ref_yn : "Y"
		};
		
		com.pop.open(com.pop.TYPE.FTXBILL, data, function(ret) {
			scwin.setDemndLiq(ret);
		});
	};
	
	/**
	 * 계산서 발행 버튼 클릭 이벤트
	 */
	scwin.btn_issu_onclick = function(e) {
		var data={
			demnd_recv_clsf : "1",
			biz_clsf : "R",
			tax_type : (dma_prj.get("tax_cd") == "FTX001")? "01" : "03",
			accnt_no : dma_prj.get("accnt_no"),
			vend_cd : dma_demnd.get("depst_loc"),
			tax_bill_no : ibx_tax_bill_no.getValue(),
			type : (dma_demnd.get("issu_id") != "")? "R":"",
			ref_yn : "Y"
		};
		
		com.pop.open(com.pop.TYPE.RVN_BILL, data, function(ret) {
			scwin.setDemndLiq(ret);
		});
	};
	
	/**
	 * 닫기 버튼 클릭 이벤트
	 */
	scwin.btn_close_onclick = function(e) {
		if(scwin.data.saveFlag){
			com.closePopup({});
		}else{
			com.closePopup();
		}
	};
	
	/**
	 * 수정계산서 발행 버튼 클릭 이벤트
	 */
	scwin.btn_re_issu_onclick = function(e) {
		var data={
			tax_bill_no : ibx_tax_bill_no.getValue(),
			biz_clsf : "R",
			type : "U",		
			ref_yn : "Y"
		};
		
		com.pop.open(com.pop.TYPE.RVN_BILL, data, function(ret) {
			scwin.setDemndLiq(ret);
		});
	};
	
	/**
	 * 결재신청 버튼 클릭 이벤트
	 */
	scwin.btn_apr_onclick = function(e) {
		if(!scwin.preSave()) return;
		
		if(ica_req_ymd.getValue().substring(0,6) != spn_issu_ymd.getValue().substring(0,6)){
			alert("계산서발행일자 월과 결의일자 월이 일치해야 합니다.");
			return;
		}
		
		dma_demnd.set("rmk", sbx_depst_clsf.getText() + "청구");
		dma_demnd.set("approval", "true");
		scwin.data.isApproval = true;
		
		scwin.save();
	};
	
	/**
	 * 결의취소 버튼 클릭 이벤트
	 */
	scwin.btn_slip_cancel_onclick = function(e) {
		if(dma_demnd.get("decsn_ex") == "Y"){
			alert("결의서가 확정되어서 삭제할 수 없습니다.");
			return;
		}
		
		dma_cancel.set("unslip_no", dma_demnd.get("unslip_no"));
		dma_cancel.set("req_no", dma_demnd.get("req_no"));
		
		com.confirm("message.xom.wq.022"/*삭제 하시겠습니까?*/, function(ret) {
			if (ret) {				
				com.execute(sbm_deleteSlip, {
					successCallback : function(e) { // 성공 콜백
						scwin.search();
					}
				});
			}
		});
	};
	
	/**
	 * 역발행 버튼 클릭 이벤트
	 */
	scwin.btn_rev_issu_onclick = function(e) {
		var data={
			tax_bill_no : ibx_tax_bill_no.getValue(),
			accnt_no : dma_prj.get("accnt_no"),
			biz_clsf : "R",
			ref_yn : "Y"
		};
		
		com.pop.open(com.pop.TYPE.FTXBILL_UPD, data, function(ret) {
			scwin.setDemndLiq(ret);
		});
	};
	]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<w2:wframe id="wfm_title" src="/cm/xml/contentTitle.xml" style=""></w2:wframe>
    	<xf:group id="" class="pop_contents">
    		<xf:group class="titleSection" id="" style="margin-top:5px;">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="tbx_title" label="과제정보" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="ri" id="" style="">
    				<xf:trigger class="btn icon print" disabled="true" ev:onclick="scwin.btn_print_onclick" id="btn_print" style=""
    					type="button">
    					<xf:label><![CDATA[인쇄]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn blue" disabled="true" ev:onclick="scwin.btn_apr_onclick" id="btn_apr" style="" type="button">
    					<xf:label><![CDATA[결재신청]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="width:220px;" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계정번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_prj.accnt_no" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="입금예정차수" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.depst_odr" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="과세구분" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="" class="sel" direction="auto"
    						disabled="true" disabledClass="w2selectbox_disabled" id="" ref="data:dma_prj.tax_cd" style="width:150px;" submenuSize="auto"
    						title="과세구분">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[과세]]></xf:label>
    								<xf:value><![CDATA[FTX001]]></xf:value>
    							</xf:item>
    							<xf:item>
    								<xf:label><![CDATA[비과세]]></xf:label>
    								<xf:value><![CDATA[FTX002]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select1>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="과제책임자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_prj.accnt_rspns_nm" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="과제명" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<w2:span escape="false" id="" label="000" style="" ref="data:dma_prj.accnt_no_nm"></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="총연구비" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td ri" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" style="" ref="data:dma_prj.tot_resch_cash_tax_amt" dataType="number"
    						displayFormat="#,###">
    					</w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="과제기간" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<w2:span escape="false" id="spn_prd" label="000" style=""></w2:span>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group id="">
    			<xf:group style="" id="" class="titleSection">
    				<xf:group id="" class="le">
    					<w2:textbox tagname="h3" style="" id="" label="거래처정보" class="tit_tbl"></w2:textbox>
    				</xf:group>
    			</xf:group>
    			<xf:group class="w2tb tbl" id="" style="" tagname="table">
    				<w2:attributes>
    					<w2:summary></w2:summary>
    				</w2:attributes>
    				<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    				<xf:group tagname="colgroup">
    					<xf:group style="width:140px;" tagname="col"></xf:group>
    					<xf:group style="width:220px;" tagname="col"></xf:group>
    					<xf:group style="width:140px;" tagname="col"></xf:group>
    					<xf:group style="" tagname="col"></xf:group>
    					<xf:group style="width:140px;" tagname="col"></xf:group>
    					<xf:group style="" tagname="col"></xf:group>
    				</xf:group>
    				<xf:group tagname="tr">
    					<xf:group class="w2tb_th" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox id="" label="거래처" style="" tagname="span"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" tagname="td">
    						<w2:attributes>
    							<w2:colspan>3</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<w2:span escape="false" id="" label="(" style="font-weight:bold;"></w2:span>
    						<w2:span escape="false" id="" label="000" ref="data:dma_demnd.depst_loc" style="font-weight:bold;"></w2:span>
    						<w2:span escape="false" id="" label=")" style="font-weight:bold;"></w2:span>
    						<w2:span escape="false" id="" label="000" style="margin-left:5px;" ref="data:dma_demnd.vend_abbr"></w2:span>
    					</xf:group>
    					<xf:group class="w2tb_th" style="" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox id="" label="대표자" style="" tagname="span"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" style="" tagname="td">
    						<w2:attributes></w2:attributes>
    						<w2:span escape="false" id="" label="000" ref="data:dma_demnd.reprs_psn_nm" style=""></w2:span>
    					</xf:group>
    				</xf:group>
    				<xf:group style="" tagname="tr">
    					<xf:group class="w2tb_th" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox id="" label="사업자등록번호" style="" tagname="span"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" tagname="td">
    						<w2:attributes></w2:attributes>
    						<w2:span escape="false" id="" label="000" ref="data:dma_demnd.bsns_psn_regst_no" style=""></w2:span>
    					</xf:group>
    					<xf:group class="w2tb_th" tagname="th">
    						<w2:attributes>
    							<w2:scope>row</w2:scope>
    						</w2:attributes>
    						<w2:textbox id="" label="사업장주소" style="" tagname="span"></w2:textbox>
    					</xf:group>
    					<xf:group class="w2tb_td" tagname="td">
    						<w2:attributes>
    							<w2:colspan>3</w2:colspan>
    							<w2:rowspan>1</w2:rowspan>
    						</w2:attributes>
    						<w2:span escape="false" id="" label="000" ref="data:dma_demnd.addr" style=""></w2:span>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="titleSection" id="" style="">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="" label="신청정보" style="" tagname="h3"></w2:textbox>
    				<w2:span class="helptxt red full" id="spn_cntst_prod" label="* 역전자발행일 경우에는 [역발행]버튼을 클릭하세요." style="margin-left:5px;"></w2:span>
    			</xf:group>
    			<xf:group class="re" id="" style="">
    			</xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="width:220px;" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="신청번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.req_no" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="신청자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.req_psn_nm" style="margin-right:5px;"></w2:span>
    					<w2:span escape="false" id="" label="(" style="font-weight:bold;"></w2:span>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.req_psn_empno" style="font-weight:bold;"></w2:span>
    					<w2:span escape="false" id="" label=")" style="font-weight:bold;"></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="결의일자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:inputCalendar calendarValueType="yearMonthDate" class="inpcal  req"
    						focusOnDateSelect="false" footerDiv="false" id="ica_req_ymd"
    						ref="data:dma_demnd.req_ymd" renderDiv="true" rightAlign="false" style="width:130px;" title="발행일자">
    					</w2:inputCalendar>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="청구금액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp req ri" dataType="number" displayFormat="#,###"
    						id="ibx_totl_amt" style="width: 150px;" title="청구금액"
    						ref="data:dma_demnd.demnd_liq">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="공급가액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>1</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp req ri" dataType="number" displayFormat="#,###"
    						id="" style="width: 150px;" title="공급가액" ref="data:dma_demnd.suply_value">
    					</xf:input>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes></w2:attributes>
    					<w2:textbox id="" label="부가세" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp req ri" dataType="number" displayFormat="#,###"
    						id="" style="width: 150px;" title="부가세" ref="data:dma_demnd.tax_amt">
    					</xf:input>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="계산서번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes><w2:colspan>3</w2:colspan><w2:rowspan>1</w2:rowspan></w2:attributes>
    					<xf:group id="" class="flex">
    						<xf:group style="width: 180px;" id="grp_accnt_no" class="inpSch">
    							<xf:input ref="data:dma_demnd.bill_no" adjustMaxLength="false" style="" id="ibx_tax_bill_no" title="계산서번호"
    								class="inp req" readOnly="true">
    							</xf:input>
    							<xf:trigger ev:onclick="scwin.btn_bill_onclick" style="" id="btn_bill" title="매출계산서 조회" type="button"
    								class="btn">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:trigger style="" id="btn_issu" type="button" class="btn" ev:onclick="scwin.btn_issu_onclick">
    							<xf:label><![CDATA[발행]]></xf:label>
    						</xf:trigger>
    						<xf:trigger class="btn" id="btn_rev_issu" style="" type="button" ev:onclick="scwin.btn_rev_issu_onclick">
    							<xf:label><![CDATA[역발행]]></xf:label>
    						</xf:trigger>
    						<xf:trigger class="btn" ev:onclick="scwin.btn_re_issu_onclick" id="btn_re_issu" style="" type="button">
    							<xf:label><![CDATA[수정발행]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes></w2:attributes>
    					<w2:textbox id="" label="발행일자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<w2:span dataType="date" escape="false" id="spn_issu_ymd" label="000" ref="data:dma_demnd.issu_ymd" style=""></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="청구구분" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-" class="sel req"
    						direction="auto" disabled="false" disabledClass="w2selectbox_disabled" id="sbx_depst_clsf" ref="data:dma_demnd.depst_clsf"
    						style="width: 120px;" submenuSize="auto" title="청구구분">
    						<xf:choices></xf:choices>
    					</xf:select1>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="전자발행상태" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.state_nm" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="결의번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.unslip_no" style=""></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="파일첨부" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:group class="full" id="upload_A" style="height:125px;"></xf:group>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group style="" id="" class="btnGroup">
    			<xf:group style="" id="" class="le">
    				<xf:group class="le" id="" style="">
    					<w2:span class="note red" id="" label="* 삭제버튼은 청구의뢰와 결의서가 동시에 삭제됩니다.&lt;br/&gt;* 결의취소는 결의서만 삭제됩니다.(계산서수정발행이 필요한 경우)"
    						style="margin-right:10px;" escape="false">
    					</w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group id="" class="ri">
    				<xf:trigger class=" btn pro " ev:onclick="scwin.btn_close_onclick" id="btn_close" style="" type="button">
    					<xf:label><![CDATA[닫기]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro " ev:onclick="scwin.btn_slip_cancel_onclick" id="btn_slip_cancel" style=""
    					type="button">
    					<xf:label><![CDATA[결의취소]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro " id="btn_del" style="" type="button" disabled="true" ev:onclick="scwin.btn_del_onclick">
    					<xf:label><![CDATA[삭제]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="btn_save" style="" type="button" ev:onclick="scwin.btn_save_onclick">
    					<xf:label><![CDATA[저장]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    </body>
</html>
