<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_programName="연구비반제신청" meta_author="이영희" meta_date="2023.05.02." meta_programId="RF63">
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns=""/>
            </xf:instance>
            <w2:dataCollection baseNode="map">
            	<w2:dataMap baseNode="map" id="dma_search">
            		<w2:keyInfo>
            			<w2:key id="accnt_no" name="계정번호" dataType="text"></w2:key>
            			<w2:key id="depst_odr" name="예정차수" dataType="text"></w2:key>
            			<w2:key id="odr" name="순번" dataType="text"></w2:key>
            			<w2:key id="req_no" name="결재신청번호" dataType="text"></w2:key>

            			<w2:key id="demnd_req_no" name="청구의뢰번호" dataType="text"></w2:key>
            			<w2:key id="depst_req_no" name="입금의뢰번호" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataMap baseNode="map" id="dma_demnd">
            		<w2:keyInfo>
            			<w2:key id="accnt_no" name="계정번호" dataType="text"></w2:key>
            			<w2:key id="depst_odr" name="입금차수" dataType="text"></w2:key>
            			<w2:key id="odr" name="순번" dataType="text"></w2:key>
            			<w2:key id="depst_loc" name="입금처" dataType="text"></w2:key>
            			<w2:key id="vend_abbr" name="입금처명" dataType="text"></w2:key>
            			<w2:key id="req_no" name="청구의뢰번호" dataType="text"></w2:key>
            			<w2:key id="bill_no" name="계산서번호" dataType="text"></w2:key>
            			<w2:key id="demnd_liq" name="청구금액" dataType="text"></w2:key>
            			<w2:key id="suply_value" name="공급가액" dataType="text"></w2:key>
            			<w2:key id="tax_amt" name="부가세" dataType="text"></w2:key>
            			<w2:key id="depst_clsf" name="청구구분" dataType="text"></w2:key>
            			<w2:key id="unslip_no" name="결의번호" dataType="text"></w2:key>
            			<w2:key id="unslip_odr" name="결의순번" dataType="text"></w2:key>
            			<w2:key id="won_adjst_amt" name="정산금액" dataType="text"></w2:key>
            			<w2:key id="ramt_amt" name="정산잔액" dataType="text"></w2:key>
            			<w2:key id="slip_no" name="미수확정번호" dataType="text"></w2:key>
            			<w2:key id="slip_odr" name="미수확정순번" dataType="text"></w2:key>
            			<w2:key dataType="text" id="accnt_no_nm" name="계정번호명"></w2:key>
            			<w2:key dataType="text" id="start_ymd" name="시작일자"></w2:key>
            			<w2:key dataType="text" id="cls_ymd" name="종료일자"></w2:key>
            			<w2:key dataType="text" id="tax_cd" name="과세코드"></w2:key>
            			<w2:key dataType="text" id="accnt_rspns_nm" name="계정책임자성명"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>            	
            	<w2:dataList baseNode="list" id="dlt_depst" repeatNode="map" saveRemovedData="true" style="">
            		<w2:columnInfo>
            			<w2:column id="req_no" name="신청번호" dataType="text"></w2:column>
            			<w2:column id="accnt_no" name="계정번호" dataType="text"></w2:column>
            			<w2:column dataType="text" id="acct_txday" name="입금일자"></w2:column>
            			<w2:column dataType="text" id="acct_txday_seq" name="입금일자순번"></w2:column>
            			<w2:column id="depst_schdl_seq" name="입금예정차수" dataType="text"></w2:column>
            			<w2:column id="depst_schdl_detls_seq" name="입금순번" dataType="text"></w2:column>
            			<w2:column dataType="text" id="bankaccnt_no" name="계좌번호"></w2:column>
            			<w2:column id="bank_cd" name="은행" dataType="text"></w2:column>
            			<w2:column dataType="text" id="depst_liq" name="입금의뢰금액"></w2:column>
            			<w2:column id="bf_depst_liq" name="이전입금의뢰금액" dataType="text"></w2:column>
            			<w2:column dataType="text" id="depst_unslip_no" name="가결의번호"></w2:column>
            			<w2:column dataType="text" id="depst_unslip_odr" name="가결의순번"></w2:column>
            			<w2:column dataType="text" id="slip_no" name="확정번호"></w2:column>
            			<w2:column dataType="text" id="slip_odr" name="확정번호순번"></w2:column>
            			<w2:column dataType="text" id="vacct_no" name="가상계좌번호"></w2:column>
            			<w2:column id="req_psn" name="신청자" dataType="text"></w2:column>
            			<w2:column id="req_psn_nm" name="신청자명" dataType="text"></w2:column>
            			<w2:column id="apr_req_no" name="결재신청번호" dataType="text"></w2:column>
            			<w2:column id="vend_cd" name="거래처코드" dataType="text"></w2:column>
            			<w2:column id="vend_abbr" name="거래처" dataType="text"></w2:column>
            			<w2:column id="rmk" name="비고" dataType="text"></w2:column>
            			<w2:column id="depst_clsf" name="입금구분" dataType="text"></w2:column>
            			<w2:column id="demnd_req_no" name="청구의뢰번호" dataType="text"></w2:column>
            			<w2:column id="attach_file_no" name="첨부파일번호" dataType="text"></w2:column>
            			<w2:column id="unslip_no" name="정산결의번호" dataType="text"></w2:column>
            			<w2:column id="apr_state" name="결재상태" dataType="text"></w2:column>
            			<w2:column id="req_dept" name="신청부서" dataType="text"></w2:column>
            			<w2:column id="req_dept_new_ymd" name="신청부서신설일자" dataType="text"></w2:column>
            			<w2:column id="cud_type" name="cud타입" dataType="text"></w2:column>
            			<w2:column id="validAttachNo" name="첨부파일" dataType="text"></w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection/>
            <!-- 조회 -->
            <xf:submission id="sbm_selectData" ref="data:json,dma_search" target='data:json,[{"id":"dma_demnd","key":"demndVo"},{"id":"dlt_depst","key":"depstList"}]' 
        	    action="SvcRESEXCDEPR04.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 저장 -->
            <xf:submission id="sbm_saveData" ref='data:json,[{"id":"dma_demnd","key":"demndVo"},{"id":"dlt_depst","key":"depstList"}]' target='' 
        	    action="SvcRESEXCDEPM02.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<!-- 삭제 -->
            <xf:submission id="sbm_deleteData" ref='data:json,[{"id":"dma_demnd","key":"demndVo"},{"id":"dlt_depst","key":"depstList"}]' target='' 
        	    action="SvcRESEXCDEPD01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <script src="/cm/js/biz/fin.js" cache="false"></script>
        <script type="text/javascript" lazy="false"><![CDATA[
    /****************************************************
 	 * 화면 설명 : 연구비반제신청
	 * 변경 이력 : 2023-05-02	이영희	최초 작성
	 * ServiceId : RF63
 	 ****************************************************/  
 	scwin.data ={isApproval : false, saveFlag : false}; 
 	 
 	/**
	 * 페이지 로딩 이벤트
	 */  
	scwin.onpageload = function() {
		// 첨부파일 컴포넌트 초기화
		com.file.init();	
		
		var param = com.getParameter();
		dma_search.setJSON(param);
		
		// 공통코드
		var codeOptions = [ { code : "FAA", compID :"sbx_bank,grd_depst:bank_cd" }, // 은행
							{ code : "XAD", compID :"grd_depst:apr_state" }
		                ];
		com.setCmnCd(codeOptions, function() {
			scwin.search();
		});				
	};
	
	scwin.onpageunload = function() {
		
	};

	/**
	 * 조회
	 */ 
	scwin.search = function(){
		com.execute(sbm_selectData, {
			successCallback : function(e){
				grd_depst.setFocusedCell(0, 0);
				
				spn_prd.setValue(com.formatDate(dma_demnd.get("start_ymd"), "dash") + " ~ " + com.formatDate(dma_demnd.get("cls_ymd"), "dash"));
				spn_unslip_no_odr.setValue(dma_demnd.get("unslip_no") + "-" + dma_demnd.get("unslip_odr"));
				spn_tax_nm.setValue((dma_demnd.get("tax_cd") == "FTX001")?"과세" : "비과세");

				// 버튼 제어
				var aprState = dlt_depst.getCellData(0, "apr_state");
				com.biz.disabledButtons(aprState, dlt_depst.getCellData(0, "req_no"));
				
				var vMode = "edit";
				if(aprState >= "XAD020"){
					btn_depst.setDisabled(true)
					
					vMode = "view";
				}else{
					btn_save.setDisabled(false);
					if(dlt_depst.getCellData(0, "req_no") != ""){
						btn_del.setDisabled(false);
						btn_print.setDisabled(false);
					}else{
						scwin.setVendInfo(dma_demnd.get("depst_loc"), dma_demnd.get("vend_abbr"));
					}
				}					
				
				// 첨부파일
				var attachFileNo = dlt_depst.getCellData(0, "attach_file_no"); 
				com.file.create(upload_A.getID(), {fileKey: (attachFileNo == "")? "RF63" : attachFileNo, mode: vMode});				
			}
		});
	};	
	
	/**
	 * 저장전 체크사항
	 */
	scwin.preSave = function(){			
		// 필수값체크		
		if(!com.validateData(dlt_depst,[
			{ id : "depst_liq", mandatory : true, allowChar : "0-9"},
			{ id : "bankaccnt_no", mandatory : true},
			{ id : "bank_cd", mandatory : true},
			{ id : "acct_txday", mandatory : true}
		], false)) return false;		
		
		var depstLiqSum = 0;
		var bfDepstLiqSum = 0;
		for(var i=0; i<dlt_depst.getRowCount(); i++){
			dlt_depst.setCellData(i, "depst_schdl_seq", dma_demnd.get("depst_odr"));
			dlt_depst.setCellData(i, "depst_schdl_detls_seq", com.parseInt(dma_demnd.get("odr")) + i);
			
			depstLiqSum += com.parseInt(dlt_depst.getCellData(i, "depst_liq"));
			bfDepstLiqSum += com.parseInt(dlt_depst.getCellData(i, "bf_depst_liq"));
		}
		if(com.parseInt(dma_demnd.get("ramt_amt")) < depstLiqSum){
			alert("[입금의뢰금액]이 [미수잔액]을 초과하였습니다. 확인바랍니다.");
			return false;
		}		
		
		return true;		
	};
	
	/**
	 * 입금처 정보 셋팅
	 */
	scwin.setVendInfo = function(vendCd, vendAbbr){
		for(var i=0; i< dlt_depst.getRowCount(); i++){
			dlt_depst.setCellData(i, "vend_cd", vendCd);
			dlt_depst.setCellData(i, "vend_abbr", vendAbbr);
		}
	};
	
	//------------------------------------------------------------- event -------------------------------/	
	
	/**
	 * 인쇄버튼 클릭 이벤트
	 */
	scwin.btn_print_onclick = function(e) {	
		var node = "req_no=" + ibx_depst_req_no.getValue();
		com.oz.openPopup({
			ozrCode : "R012",      
			param: node
        });
	};	
	
	/**
	 * 저장 버튼 클릭 이벤트
	 */
	scwin.btn_save_onclick = function(e) {
		if(!scwin.preSave()) return;
		
		com.confirm("message.xom.wq.017"/*저장 하시겠습니까?*/, function( ret) {
			if (ret) {
				com.file.transport( function( attachObj){
					dlt_depst.setCellData(0, "attach_file_no", attachObj.upload_A);
					dlt_depst.setCellData(0, "validAttachNo", attachObj.upload_A);
							
					com.execute(sbm_saveData, {
						successCallback : function(e) { // 성공 콜백					
							com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
								scwin.data.saveFlag = true;
								dma_search.set("depst_req_no", e.responseJSON.elData.depst_req_no);
								scwin.search();
							});										
						}
					});
				});
			}
		});
	};	
	
	/**
	 * 삭제 버튼 클릭 이벤트
	 */
	scwin.btn_del_onclick = function(e) {	
		var demndReqNo = dlt_depst.getCellData(0, "demnd_req_no");
		
		for(var i=0; i<dlt_depst.getRowCount(); i++){
			if(dlt_depst.getCellData(i, "apr_state") >= "XAD020"){
				alert("결재중이므로 삭제할 수 없습니다.");
				return;
			}
			
			if(demndReqNo != dlt_depst.getCellData(i, "demnd_req_no")){
				alert("같은 청구의뢰건만 삭제할 수 있습니다.");
				return;
			}
		}
					
		com.confirm("message.xom.wq.022"/*삭제 하시겠습니까?*/, function(ret) {
			if (ret) {
				com.file.deleteAll( function(){
					com.execute(sbm_deleteData, {
						successCallback : function(e) { // 성공 콜백
							com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {								
								com.closePopup({}); 
							});
						}
					});
				});
			}
		});
	};	
	
	/**
	 * 닫기 버튼 클릭 이벤트
	 */
	scwin.btn_close_onclick = function(e) {
		if(scwin.data.saveFlag){
			//$p.parent().scwin.search();
			com.closePopup({});
		}else{
			com.closePopup();
		}		
	};	
	
	/**
	 * 입금조회 버튼 클릭 이벤트
	 */
	scwin.btn_depst_onclick = function(e) {
		var data ={
			biz_clsf : "R",
			ref_yn : "Y",
			open_id : "RF63"
		};
		com.pop.open(com.pop.TYPE.DEPST, data, function(ret){
			var retArr = (Array.isArray(ret))? ret : new Array(ret);
			
			var rowCnt = dlt_depst.getRowCount();	
			var cnt = 0;
			// 내부함수
			var setDepst = function(row, data){
				debugger;
				dlt_depst.setRowJSON(row, data);
				dlt_depst.setCellData(row, "cud_type", "C");
				dlt_depst.setCellData(row, "depst_liq", data.ramt);
				dlt_depst.setCellData(row, "rmk", data.remark);
				dlt_depst.setCellData(row, "vend_cd", dma_demnd.get("depst_loc"));
				dlt_depst.setCellData(row, "vend_abbr", dma_demnd.get("vend_abbr"));
				dlt_depst.setCellData(row, "req_psn", com.getLoginInfo("sn"));
				dlt_depst.setCellData(row, "req_psn_nm", com.getLoginInfo("cn"));
				dlt_depst.setCellData(row, "req_dept", com.getLoginInfo("deptCode"));
				dlt_depst.setCellData(row, "req_dept_new_ymd", com.getLoginInfo("deptNewYmd"));
			};
			
			for(var i=0; i<retArr.length; i++){
				var data = retArr[i];
				if(rowCnt == 0){
					(setDepst)(i, data);
				}else{
					for(var j=0; j<rowCnt; j++){
						if(data.acct_txday == dlt_depst.getCellData(j, "acct_txday") && data.acct_txday_seq == dlt_depst.getCellData(j, "acct_txday_seq")){
							alert("선택한 자료가 [" + (j+1) + "]행과 중복되고 있습니다.");
						}else{
							(setDepst)(rowCnt+cnt, data);							
							cnt++
						}
					}
				}
			}
			
			grd_depst.setFocusedCell(0, 0);
		});
	};
	
	/**
	 * 입금처 버튼 클릭 이벤트
	 */
	scwin.btn_vend_onclick = function(e) {
		com.pop.open(com.pop.TYPE.VEND, {ref_yn : "Y"}, function(ret){
			scwin.setVendInfo(ret.vend_cd, ret.vend_abbr);
		});
	};
	]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<xf:group id="" class="pop_contents">
    		<xf:group class="titleSection" id="" style="margin-top:5px;">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="tbx_title" label="청구의뢰정보" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="ri" id="" style="">
    				<xf:trigger class="btn icon print" disabled="true" ev:onclick="scwin.btn_print_onclick" id="btn_print" style=""
    					type="button">
    					<xf:label><![CDATA[인쇄]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="width:220px;" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계정번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.accnt_no" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계정명" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.accnt_no_nm" style=""></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계정책임자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.accnt_rspns_nm" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="과제기간" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="spn_prd" label="000" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="과세구분" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="spn_tax_nm" label="000" style=""></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="청구의뢰번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.req_no" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="(세금)계산서번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.bill_no" style=""></w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="미수결의번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="spn_unslip_no_odr" label="000" style=""></w2:span>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="청구금액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td ri" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.demnd_liq" style="" dataType="number"
    						displayFormat="#,###">
    					</w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="정산금액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td ri" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.won_adjst_amt" style="" dataType="number"
    						displayFormat="#,###">
    					</w2:span>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="미수잔액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td ri" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:span escape="false" id="" label="000" ref="data:dma_demnd.ramt_amt" style="" dataType="number"
    						displayFormat="#,###">
    					</w2:span>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="titleSection" id="" style="">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="" label="입금내역" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="re" id="" style="">
    				<w2:span class="note red" id=""
    					label="*1개의 청구건에 대하여 2개이상으로 입금시 입금내역을 다건조회하여 반제신청할 수 있습니다." style="margin-right:10px;">
    				</w2:span>
    				<xf:trigger ev:onclick="scwin.btn_depst_onclick" style="" id="btn_depst" type="button" class="btn">
    					<xf:label><![CDATA[입금조회]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<w2:gridView autoFit="allColumn" class="grid" dataList="data:dlt_depst" defaultCellHeight="28" editModeEvent="onclick"
    			evenRowBackgroundColor="#f7faff" id="grd_depst" noResultMessage="조회 결과가 없습니다." noResultMessageClass="noResult"
    			rowMouseOverColor="#e7f0fb" rowNumBackgroundColor="#fff" rowNumHeaderValue="No." rowNumVisible="true" rowNumWidth="40"
    			rowStatusHeaderValue="상태" rowStatusVisible="false" rowStatusWidth="50" scrollByColumn="false" scrollByColumnAdaptive="false"
    			selectedCellColor="#fbf2cd" selectedRowColor="#fbf2cd" style="height: 85px;" summaryAuto="true" visibleRowNum="2" readOnly="true">
    			<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
    			<w2:header id="header1" style="">
    				<w2:row id="row1" style="">
    					<w2:column displayMode="label" id="column5" inputType="text" style="height:28px;" value="입금일자" width="90"></w2:column>
    					<w2:column displayMode="label" fixColumnWidth="true" id="column7" inputType="text" style="height:28px;" value="순번"
    						width="45">
    					</w2:column>
    					<w2:column width="140" inputType="text" style="height:28px" id="column50" value="입금처" displayMode="label"></w2:column>
    					<w2:column displayMode="label" id="column3" inputType="text" style="height:28px;" value="계좌번호" width="120"></w2:column>
    					<w2:column displayMode="label" id="column20" inputType="text" style="height:28px;" value="입금은행" width="90"></w2:column>
    					<w2:column displayMode="label" id="column29" inputType="text" style="height:28px;" value="입금액" width="90"></w2:column>
    					<w2:column displayMode="label" id="column27" inputType="text" style="height:28px;" value="온라인가수결의" width="90"></w2:column>
    					<w2:column displayMode="label" id="column25" inputType="text" style="height:28px;" value="결의순번" width="48"></w2:column>
    					<w2:column colSpan="" displayMode="label" id="column34" inputType="text" rowSpan="" style="height:28px;"
    						value="입금의뢰번호" width="90">
    					</w2:column>
    					<w2:column width="70" inputType="text" style="height:28px" id="column56" value="신청자" displayMode="label"></w2:column>
    					<w2:column width="90" inputType="text" style="height:28px" id="column47" value="결재상태" displayMode="label"></w2:column>
    				</w2:row>
    			</w2:header>
    			<w2:gBody id="gBody1" style="">
    				<w2:row id="row2" style="">
    					<w2:column class="" displayMode="label" escape="false" id="acct_txday" inputType="calendar" style="height:28px;"
    						width="90" readOnly="true">
    					</w2:column>
    					<w2:column class="" displayMode="label" id="acct_txday_seq" inputType="text" readOnly="true" style="height:28px;"
    						width="45px">
    					</w2:column>
    					<w2:column width="140" inputType="text" style="height:28px" id="vend_abbr" value="" displayMode="label"
    						class="le">
    					</w2:column>
    					<w2:column class="" dataType="text" displayMode="label" escape="false" id="bankaccnt_no" inputType="text"
    						style="height:28px;" width="120">
    					</w2:column>
    					<w2:column displayMode="label" id="bank_cd" inputType="select" style="height:28px;" width="90"></w2:column>
    					<w2:column class="ri" dataType="number" displayFormat="#,###" displayMode="label" id="depst_liq" inputType="text"
    						style="height:28px;" width="90">
    					</w2:column>
    					<w2:column class="" dataType="text" displayMode="label" id="depst_unslip_no" inputType="text" readOnly="true"
    						style="height:28px;" width="90">
    					</w2:column>
    					<w2:column class="" displayMode="label" id="depst_unslip_odr" inputType="text" readOnly="true" style="height:28px;"
    						width="48">
    					</w2:column>
    					<w2:column class="" displayMode="label" id="req_no" inputType="text" style="" value="" width="90"></w2:column>
    					<w2:column width="70" inputType="text" style="height:28px" id="req_psn_nm" value="" displayMode="label"></w2:column>
    					<w2:column width="90" inputType="select" style="height:28px" id="apr_state" value="" displayMode="label"></w2:column>
    				</w2:row>
    			</w2:gBody>
    			<w2:footer id="footer1" style="">
    				<w2:row id="row3" style="">
    					<w2:column displayMode="label" id="column43" inputType="text" style="height:28px;" value="합계" width="200"
    						colSpan="3" rowSpan="">
    					</w2:column>
    					<w2:column width="120" inputType="text" style="height:28px" id="column52" value="" displayMode="label"></w2:column>
    					<w2:column displayMode="label" id="column40" inputType="text" style="height:28px;" value="" width="90"></w2:column>
    					<w2:column class="ri" dataType="number" displayFormat="#,###" displayMode="label" expression="sum('depst_liq')"
    						id="depst_liq_sum" inputType="expression" style="height:28px;" value="" width="90">
    					</w2:column>
    					<w2:column class="" displayMode="label" id="column38" inputType="text" style="height:28px;" value="" width="90">
    					</w2:column>
    					<w2:column displayMode="label" id="column37" inputType="text" style="height:28px;" value="" width="48"></w2:column>
    					<w2:column displayMode="label" id="column36" inputType="text" style="height:28px;" value="" width="90"></w2:column>
    					<w2:column width="70" inputType="text" style="height:28px" id="column58" value="" displayMode="label"></w2:column>
    					<w2:column width="90" inputType="text" style="height:28px" id="column49" value="" displayMode="label"></w2:column>
    				</w2:row>
    			</w2:footer>
    		</w2:gridView>
    		<xf:group class="titleSection" id="" style="">
    			<xf:group class="le" id="">
    				<w2:textbox class="tit_tbl" id="" label="관련내역" style="" tagname="h3"></w2:textbox>
    			</xf:group>
    			<xf:group class="re" id="" style=""></xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="세금 계산서 상세 정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="width:220px;" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="입금처" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:group id="" class="flex">
    						<xf:group style="width: 120px;" id="grp_vend" class="inpSch">
    							<xf:input ref="data:dlt_depst.vend_cd" adjustMaxLength="false" style="" id="ibx_vend_cd" class="inp req"
    								readOnly="true">
    							</xf:input>
    							<xf:trigger style="" id="btn_vend" title="거래처 조회" type="button" class="btn" ev:onclick="scwin.btn_vend_onclick">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:input adjustMaxLength="false" class="inp" dataType="text" id="ibx_vend_abbr" style="width: 150px;"
    							title="계좌번호" ref="data:dlt_depst.vend_abbr" disabled="true">
    						</xf:input>
    					</xf:group>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="입금금액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp req ri" dataType="number" displayFormat="#,###" id=""
    						ref="data:dlt_depst.depst_liq" style="width: 120px;" title="입금금액">
    					</xf:input>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="비고" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full le" dataType="text" id="" style="" title="비고"
    						ref="data:dlt_depst.rmk">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="입금의뢰번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp" dataType="text" disabled="true" id="ibx_depst_req_no" ref="data:dlt_depst.req_no"
    						style="width: 120px;" title="입금의뢰번호">
    					</xf:input>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="파일첨부" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:group class="full" id="upload_A" style="height:125px;"></xf:group>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group style="" id="" class="btnGroup">
    			<xf:group style="" id="" class="le"></xf:group>
    			<xf:group id="" class="ri">
    				<xf:trigger class=" btn pro " ev:onclick="scwin.btn_close_onclick" id="btn_close" style="" type="button">
    					<xf:label><![CDATA[닫기]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro " id="btn_del" style="" type="button" disabled="true" ev:onclick="scwin.btn_del_onclick">
    					<xf:label><![CDATA[삭제]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="btn_save" style="" type="button" ev:onclick="scwin.btn_save_onclick">
    					<xf:label><![CDATA[저장]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    </body>
</html>
