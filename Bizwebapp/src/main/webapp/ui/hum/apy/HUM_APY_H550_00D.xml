<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_programName="퇴직신청등록">
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns=""/>
            </xf:instance>
            <w2:dataCollection baseNode="map">
            	<w2:dataMap baseNode="map" id="dma_hupApySvrDetail">
            		<w2:keyInfo>
            			<w2:key id="rowStatus" name="rowStatus" dataType="text"></w2:key>
            			<w2:key id="nm" name="성명" dataType="text"></w2:key>
            			<w2:key id="dept_nm" name="부서명" dataType="text"></w2:key>
            			<w2:key id="posi_cd" name="직급" dataType="text"></w2:key>
            			<w2:key id="posi_nm" name="직급명" dataType="text"></w2:key>
            			<w2:key id="empno" name="사번" dataType="text"></w2:key>
            			<w2:key id="dept_cd" name="부서" dataType="text"></w2:key>
            			<w2:key id="dept_new_ymd" name="부서신설일" dataType="text"></w2:key>
            			<w2:key id="home_tel" name="집전화" dataType="text"></w2:key>
            			<w2:key id="ext_no" name="ext_no" dataType="text"></w2:key>
            			<w2:key id="mobile" name="핸드폰번호" dataType="text"></w2:key>
            			<w2:key id="email" name="이메일" dataType="text"></w2:key>
            			<w2:key id="id" name="아이디" dataType="text"></w2:key>
            			<w2:key id="addr_postmt_no" name="우편번호" dataType="text"></w2:key>
            			<w2:key id="addr_base" name="기본주소" dataType="text"></w2:key>
            			<w2:key id="addr_detls" name="상세주소" dataType="text"></w2:key>
            			<w2:key id="entr_ymd" name="입원일" dataType="text"></w2:key>
            			<w2:key id="appont_contrct_ymd" name="appont_contrct_ymd" dataType="text"></w2:key>
            			<w2:key id="appont_cls_ymd" name="appont_cls_ymd" dataType="text"></w2:key>
            			<w2:key id="longwk_cntfr_ymd" name="longwk_cntfr_ymd" dataType="text"></w2:key>
            			<w2:key id="resid_no" name="resid_no" dataType="text"></w2:key>
            			<w2:key id="sci_tech_anuty" name="sci_tech_anuty" dataType="text"></w2:key>
            			<w2:key id="savng_shape_dedct" name="savng_shape_dedct" dataType="text"></w2:key>
            			<w2:key id="own_driv_sub_pay" name="own_driv_sub_pay" dataType="text"></w2:key>
            			<w2:key id="syspayno" name="시스템개인번호" dataType="text"></w2:key>
            			<w2:key id="tot_bankaccnt_no" name="tot_bankaccnt_no" dataType="text"></w2:key>
            			<w2:key id="sema_mm" name="sema_mm" dataType="text"></w2:key>
            			<w2:key id="occutyp_cd" name="occutyp_cd" dataType="text"></w2:key>
            			<w2:key id="occugrp_cd" name="직종코드" dataType="text"></w2:key>
            			<w2:key id="card_keeper" name="card_keeper" dataType="text"></w2:key>
            			<w2:key id="contrct_cls_ymd" name="contrct_cls_ymd" dataType="text"></w2:key>
            			<w2:key id="carmdl" name="carmdl" dataType="text"></w2:key>
            			<w2:key id="car_no" name="차번호" dataType="text"></w2:key>
            			<w2:key id="car_clr" name="car_clr" dataType="text"></w2:key>
            			<w2:key id="pruse_respn_psn" name="pruse_respn_psn" dataType="text"></w2:key>
            			<w2:key id="pruse_respn_psn_nm" name="pruse_respn_psn_nm" dataType="text"></w2:key>
            			<w2:key id="exp_retire_hope_ymd" name="퇴직사유" dataType="text"></w2:key>
            			<w2:key id="fomat_unit" name="지역별 보안안전담당자 찾기위함" dataType="text"></w2:key>
            			<w2:key id="req_ymd" name="신청일" dataType="text"></w2:key>
            			<w2:key id="apr_state_nm" name="결제상태코드명" dataType="text"></w2:key>
            			<w2:key id="apr_state" name="결제상태" dataType="text"></w2:key>
            			<w2:key id="org_email" name="생기원 이메일" dataType="text"></w2:key>
            			<w2:key id="retire_hope_ymd" name="퇴직희망일" dataType="text"></w2:key>
            			<w2:key id="retire_resn" name="퇴직사유" dataType="text"></w2:key>
            			<w2:key id="middle_adjst_yn" name="중간정산여부" dataType="text"></w2:key>
            			<w2:key id="middle_adjst_typ" name="중간정산유형" dataType="text"></w2:key>
            			<w2:key id="equal_id_yn" name="동일ID사용여부" dataType="text"></w2:key>
            			<w2:key id="trans_typ" name="이직(진학)유형" dataType="text"></w2:key>
            			<w2:key id="trans_agncy_nm" name="이직(진학)기관명" dataType="text"></w2:key>
            			<w2:key id="psn_no_syspayno" name="업무인수자(시스템개인번호)" dataType="text"></w2:key>
            			<w2:key id="psn_dept_nm" name="업무인수자(부서명)" dataType="text"></w2:key>
            			<w2:key id="psn_posi_nm" name="업무인수자(직급명)" dataType="text"></w2:key>
            			<w2:key id="psn_nm" name="업무인수자명" dataType="text"></w2:key>
            			<w2:key id="psn_email" name="psn_email" dataType="text"></w2:key>
            			<w2:key id="psn_no_dept_cd" name="업무인수자(부서명)" dataType="text"></w2:key>
            			<w2:key id="psn_no_dept_new_ymd" name="psn_no_dept_new_ymd" dataType="text"></w2:key>
            			<w2:key id="data_essen_yn" name="data_essen_yn" dataType="text"></w2:key>
            			<w2:key id="data_opt_yn" name="data_opt_yn" dataType="text"></w2:key>
            			<w2:key id="attach_file_no" name="첨부파일번호" dataType="text"></w2:key>
            			<w2:key id="regst_syspayno" name="등록자시스템번호" dataType="text"></w2:key>
            			<w2:key id="req_empno" name="등록자사번" dataType="text"></w2:key>
            			<w2:key id="req_no" name="등록번호" dataType="text"></w2:key>
            			<w2:key id="validAttachNo" name="유효첨부파일번호" dataType="text"></w2:key>
            			<w2:key id="approval" name="결재신청여부" dataType="text" value="false"></w2:key>
            			<w2:key id="info_cd" name="전자결제문서 목" dataType="text" value="false"></w2:key>
            			<w2:key id="aprLine" name="aprLine" dataType="text" value="false"></w2:key>
            			<w2:key id="aprLineTyp" name="aprLineTyp" dataType="text" value="false"></w2:key>
            			<w2:key id="regionCd" name="지역코드" dataType="text" value="false"></w2:key>
            			<w2:key id="manager4_id" name="자산담당자" dataType="text" value="false"></w2:key>
            			<w2:key id="manager_id" name="연구관리담당자" dataType="text" value="false"></w2:key>
            			<w2:key id="tc_manager_id" name="활용책임자" dataType="text" value="false"></w2:key>
            			<w2:key id="retire_resn_nm" name="retire_resn_nm" dataType="text" value="false"></w2:key>
            			<w2:key id="food_manger_yn" name="food_manger_yn" dataType="text" value="false"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>

            	<w2:dataMap baseNode="map" id="dma_search">
            		<w2:keyInfo>
            			<w2:key id="syspayno" name="시스템관리번호" dataType="text"></w2:key>
            			<w2:key id="req_no" name="신청번호" dataType="text"></w2:key>
            			<w2:key id="role_type" name="role_type" dataType="text"></w2:key>
            			<w2:key id="dept_cd" name="dept_cd" dataType="text"></w2:key>
            			<w2:key id="dept_new_ymd" name="dept_new_ymd" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	
            	<w2:dataList baseNode="list" repeatNode="map" id="dlt_deptCheck" saveRemovedData="true">
            		<w2:columnInfo>
            			<w2:column id="affir_item_cd" name="affir_item_cd" dataType="text"></w2:column>
            			<w2:column id="cd_nm" name="cd_nm" dataType="text"></w2:column>
            			<w2:column id="mngmt_item_1" name="mngmt_item_1" dataType="text"></w2:column>
            			<w2:column id="nm" name="nm" dataType="text"></w2:column>
            			<w2:column id="retrn_yn" name="retrn_yn" dataType="text"></w2:column>
            			<w2:column id="affir_yn" name="affir_yn" dataType="text"></w2:column>
            			<w2:column id="affir_ymd" name="affir_ymd" dataType="text"></w2:column>
            			<w2:column id="rmk" name="rmk" dataType="text"></w2:column>
            			<w2:column id="rowStatus" name="rowStatus" dataType="text"></w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            	
            	<w2:dataList baseNode="list" repeatNode="map" id="dlt_companion" saveRemovedData="true">
            		<w2:columnInfo>
            			<w2:column id="rcpt_no" name="rcpt_no" dataType="text"></w2:column>
            			<w2:column id="reject_name" name="reject_name" dataType="text"></w2:column>
            			<w2:column id="reject_contents" name="reject_contents" dataType="text"></w2:column>
            			<w2:column id="reject_wdate" name="reject_wdate" dataType="text"></w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            	
 	            <w2:dataMap baseNode="map" id="dma_manger">
            		<w2:keyInfo>
            			<w2:key id="syspayno" name="시스템관리번호" dataType="text"></w2:key>
            			<w2:key id="empno" name="사번" dataType="text"></w2:key>
            			<w2:key id="nm" name="이름" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	
            	<w2:dataMap baseNode="map" id="dma_res_manger">
            		<w2:keyInfo>
            			<w2:key id="syspayno" name="시스템관리번호" dataType="text"></w2:key>
            			<w2:key id="email" name="사번" dataType="text"></w2:key>
            			<w2:key id="nm" name="이름" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	
            	<w2:dataMap baseNode="map" id="dma_dupl">
            		<w2:keyInfo>
            			<w2:key id="syspayno" name="시스템관리번호" dataType="text"></w2:key>
            			<w2:key id="empno" name="사번" dataType="text"></w2:key>
            			<w2:key id="nm" name="이름" dataType="text"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	
            </w2:dataCollection>
            <w2:workflowCollection>
            </w2:workflowCollection>
            
             <!-- 퇴직신고상세조회 -->
			<xf:submission id="sbm_HumApySvrDetail" ref='data:json,dma_search'
				target='data:json,{"id":"dma_hupApySvrDetail","key":"humApySvrVo"}' action="SvcHUMAPYSVRR02.pwkjson" method="post" mediatype="application/json"
				encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
				ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
			
			<!--관련부서확인사항-->
			<xf:submission id="sbm_selectListDeptChk" ref='data:json,dma_search'
				target='data:json,{"id":"dlt_deptCheck","key":"humApyDeptChkVoList"}' action="SvcHUMAPYSVRR03.pwkjson" method="post" mediatype="application/json"
				encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
				ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
			
			<!--반려자리스트-->
			<xf:submission id="sbm_selectListCompanion" ref='data:json,dma_search'
				target='data:json,{"id":"dlt_companion","key":"humApyCompanVoList"}' action="SvcHUMAPYSVRR04.pwkjson" method="post" mediatype="application/json"
				encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
				ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
			
			<!-- 담당자조회 -->
			<xf:submission id="sbm_mangerInfo" ref='data:json,dma_search'
				target='data:json,{"id":"dma_manger","key":"humApySvrVo"}' action="SvcHUMAPYSVRR05.pwkjson" method="post" mediatype="application/json"
				encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
				ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
			
			<!-- 연구담당자조회 -->
			<xf:submission id="sbm_resMangerInfo" ref='data:json,dma_search'
				target='data:json,{"id":"dma_res_manger","key":"humApySvrVo"}' action="SvcHUMAPYSVRR08.pwkjson" method="post" mediatype="application/json"
				encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
				ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
			
			<!-- 중복조회 -->
			<xf:submission id="sbm_duplCheck" ref='data:json,dma_search'
				target='' action="SvcHUMAPYSVRR06.pwkjson" method="post" mediatype="application/json"
				encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
				ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
			
        	<!-- 저장 -->
        	<xf:submission id="sbm_saveApy"
        		ref='data:json,[{"id":"dma_hupApySvrDetail", "key":"humApySvrVo"},{"id":"dlt_deptCheck", "key":"humApyDeptChkVoList"}]'
        		target='data:json,dma_search' action="SvcHUMAPYSVRM01.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	
        	<!-- 삭제 -->
        	<xf:submission id="sbm_delApy"
        		ref='data:json,dma_hupApySvrDetail'
        		target='' action="SvcHUMAPYSVRD01.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	
        	<!-- 결제처리 -->
        	<xf:submission id="sbm_saveApr"
        		ref='data:json,[{"id":"dma_hupApySvrDetail", "key":"humApySvrVo"},{"id":"dlt_deptCheck", "key":"humApyDeptChkVoList"}]'
        		target='' action="SvcHUMAPYSVRU01.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	
        	<!-- 반려 -->
        	<xf:submission id="sbm_delApr"
        		ref='data:json,[{"id":"dma_hupApySvrDetail", "key":"humApySvrVo"},{"id":"dlt_deptCheck", "key":"humApyDeptChkVoList"}]'
        		target='' action="SvcHUMAPYSVRU02.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	
        	<!-- 결제처리최종 -->
        	<xf:submission id="sbm_saveComApr"
        		ref='data:json,[{"id":"dma_hupApySvrDetail", "key":"humApySvrVo"},{"id":"dlt_deptCheck", "key":"humApyDeptChkVoList"}]'
        		target='' action="SvcHUMAPYSVRU03.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
			
			<!-- 업무인수자 퇴직자 부서 겸직여부 조회 -->
			<xf:submission id="sbm_adJobCheck" 
				ref='data:json,dma_hupApySvrDetail'	target='data:json,{"id":"dma_hupApySvrDetail","key":"humApySvrVo"}' 
				action="SvcHUMAPYSVRR10.pwkjson" method="post" 
				mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" 
				processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
			</xf:submission>
           
        </xf:model>
         <script type="text/javascript" lazy="false"><![CDATA[
	//자산 담당자 없는경우 or 기존 작성중인 퇴직신청이 있는경우 저장 막아야함 테스트 때문에 풀어놓음        
	/****************************************************
	 * 화면 설명 : 퇴직신청
	 * 변경 이력 : 2022-09-12	박영훈	최초 작성
	 * serviceId : H550
	 ****************************************************/
	scwin.onpageload = function() {   
		// 초기화
		com.file.init();
		// enter key event
		com.setEnterKeyEvent(grp_emp, scwin.btn_regSearch_onclick);
		com.setEnterKeyEvent(grp_area, scwin.btn_addrSearch_onclick);
		com.setEnterKeyEvent(grp_cEmp, scwin.btn_psnSearch_onclick);
		//신청상태에 따른 버튼 숨김
		trigger_ret.setStyle("display", "none");
		trigger_affir_prc.setStyle("display", "none");
		group_compan.hide();
		var codeOptions = [ { code : "HBL", compID :"ipsb_retire_resn" , filter : "mngmtItem1 == '퇴직'"}
						   ,{ code : "HDB", compID :"ipsb_trans_typ" }
						];
		
		com.setCmnCd(codeOptions, function() {
			
			var syspayno = "";
			
			syspayno = com.getParameter("syspayno");
			dma_hupApySvrDetail.set("regst_syspayno", syspayno);
			 
			if(dma_hupApySvrDetail.get("syspayno") == '' || dma_hupApySvrDetail.get("syspayno") == null){
				var req_empno = com.getLoginInfo("empno");
				syspayno = com.getLoginInfo("sn");
				dma_hupApySvrDetail.set("req_empno", req_empno);
			}
				
			dma_search.set("syspayno", syspayno);

			scwin.detailSet();
			
		});
	};
	
	scwin.onpageunload = function() {
		
	};
	
	scwin.gvar = {
		 sn : "" ,
		 todate : ""
	};
	
	function getDateStr(date) {
	    var sYear = date.getFullYear();
	    var sMonth = date.getMonth() + 1;
	    var sDate = date.getDate();
	
	    sMonth = sMonth > 9 ? sMonth : "0" + sMonth;
	    sDate  = sDate > 9 ? sDate : "0" + sDate;
	    return String(sYear) + String(sMonth) + String(sDate);
	}
	
	scwin.detailSet = function(reqNo){
			var req_no = reqNo || com.getParameter("req_no") || dma_search.get("req_no");
			
			if(!com.isEmpty(req_no)){
				dma_search.set("req_no", req_no);
				dma_hupApySvrDetail.set("req_no", req_no);
			}
			
			dma_search.set("role_type", "ASS");
				//전자결제떄 담당자 정보확인
				com.execute(sbm_mangerInfo, {
						
					successCallback : function(e) {
					 	if(dma_manger.get("syspayno") == null || dma_manger.get("syspayno") == ''){
					   		alert("자산관리담당자가 등록안되어 있습니다.\n 자산관리담당자 등록 후 진행 부탁 드립니다.");
					   		btn_save.setDisabled(true);
				  		}else{
					  	var manger = dma_manger.get("syspayno");
					  	dma_hupApySvrDetail.set("manager4_id", manger);
					  	}
					}
				});
			
			console.log("1111111111114");
			com.execute(sbm_HumApySvrDetail, {
					
				successCallback : function(e) {
					console.log("111111111115");
					var req_no = dma_hupApySvrDetail.get("req_no");
					dma_search.set("req_no", req_no);
					
					if (com.isEmpty(req_no)) {
						
						dma_hupApySvrDetail.set("empno", "");
						com.file.create(upload_A.getID(), {fileKey: 'H550', mode: 'edit'});
						if(dma_hupApySvrDetail.get("syspayno") == '' || dma_hupApySvrDetail.get("syspayno") == null){
							dma_search.set("syspayno", com.getLoginInfo("sn"));
						}
						dma_search.set("req_no", "H0F");
						com.biz.disabledButtons();
						console.log("111111111116");
						com.execute(sbm_duplCheck, {
								
							successCallback : function(e) {
								console.log("11111111117");
								var cnt = e.responseJSON.cnt;
								
								console.log("cnt--------------- : " + cnt);
								console.log(typeof cnt);
								
								if(cnt > 0){
									alert(ipt_nm.getValue().trim() + "(" + ipt_empno.getValue() + ")님으로 작성된 퇴직신청서가 있습니다.");
									btn_save.setDisabled(true); //테스트  
								}else{
									btn_save.setDisabled(false);		
								}
								dma_search.set("req_no", "");
							}
						});
				
					} else{
					
					var regSyspayno = dma_hupApySvrDetail.get("regst_syspayno");
					var syspayno = com.getLoginInfo("sn");
					
					com.biz.disabledButtons(dma_hupApySvrDetail.get("apr_state"), dma_hupApySvrDetail.get("req_no"));
					
					if(regSyspayno == syspayno){
						btn_del.setStyle("display", "inline-block");
					}else{
						btn_save.setDisabled(true);
						btn_apr.setDisabled(true);
					}
					
					var sciTechAnuty = dma_hupApySvrDetail.get("sci_tech_anuty");
					
					if (sciTechAnuty == "Y") {
						output80.show(); // 연금가입여부
						textbox4.show();
					} else {
						output80.hide();
						textbox4.hide();
					}
					var fileKey = dma_hupApySvrDetail.get("attach_file_no").trim() || "H550";
					com.file.create(upload_A.getID(), {'fileKey': fileKey, mode: 'edit'});	
					
					com.execute(sbm_selectListCompanion, {
							
						successCallback : function(e) {
							if(dlt_companion.getRowCount() <= 0){
								
								group_compan.hide();
							}else{
									group_compan.show();
							}
						}
						
					});
				  }
				  
	  			com.execute(sbm_selectListDeptChk, {
					successCallback : function(e) {
								
						var chkBoxReadFlg = 0; // 체크박스		
						var aprState = dma_hupApySvrDetail.get("apr_state");
						var rowcnt = grid_deptCheck.getRowCount(); 
						var occuGrp = dma_hupApySvrDetail.get("occugrp_cd"); // 정규직 판단 그룹코드
						var cardKeep = dma_hupApySvrDetail.get("card_keeper"); // 법인카드 소지여부 Y/N
						var param4 = com.getParameter('param4');
						var etcParam = com.getParameter("etcParam");
						
						console.log("aprState >>>"+aprState);
						console.log("rowcnt >>>"+rowcnt);
						console.log("occuGrp >>>"+occuGrp);
						console.log("cardKeep >>>"+cardKeep);
						if (aprState == "XAD020") {
							chkBoxReadFlg = 3; // 진행중 (진행중일경우 각 담당자가 반환여부를 체크 가능)
							if (param4 && param4 == 'apr') {
								trigger_ret.setStyle("display", "inline-block");
								trigger_affir_prc.setStyle("display", "inline-block");
							}
							
						} else if (aprState == "" || aprState == "XAD005" || aprState == "XAD010") {
							chkBoxReadFlg = 1; // 위치 변경으로 index 값 조정 // 신규,저장중,작성중
						} else if (aprState == "XAD070") {
							if (param4 && param4 == 'apr') {
								trigger_ret.setStyle("display", "inline-block");
								trigger_affir_prc.setStyle("display", "inline-block");
							}
						}
						
						if (chkBoxReadFlg > 0) { // 정규직 아닐시 상조회,학자회 대출금 반납확인 불필요 > 20181002 비정규직 또한 학자대출이 가능
							if (chkBoxReadFlg == 1 && occuGrp != "HAA010" && occuGrp != "HAA045") { // 비정규직 작성중
								for (var i=0; i<rowcnt; i++) {
									grid_deptCheck.setCellReadOnly(i, "retrn_yn", true); // 반납체크 전부 체크가능하게한후 아래항목 체크박스 조정
									grid_deptCheck.setCellReadOnly(i, "affir_yn", true); // 담당체크
									// grid1.setCellReadOnly(4, "retrn_yn", true); // 학자대출금 반납 // 20181002 비정규직 또한 학자대출이 가능하여 기능수정 요청 (김지현 행정원)
									// grid1.setCellReadOnly(4, "retrn_yn", false); // 학자대출금 반납
									// grid1.setCellReadOnly(5, "retrn_yn", false); // 상조회대출금 반납
									grid_deptCheck.setCellReadOnly(2, "retrn_yn", true); // 학자대출금 반납
									grid_deptCheck.setCellReadOnly(3, "retrn_yn", true); // 상조회대출금 반납
									dlt_deptCheck.setCellData(3, "rmk", "비정규직은 해당되지 않습니다");
									dlt_deptCheck.modifyRowStatus(3, 'R');
								}
							} else if (chkBoxReadFlg == 3 && occuGrp != "HAA010" && occuGrp != "HAA045") { // 비정규직 진행중
								for (var i=0; i<rowcnt; i++) {
									grid_deptCheck.setCellReadOnly(i, "retrn_yn", false);
									grid_deptCheck.setCellReadOnly(i, "affir_yn", false);
									// grid1.setCellReadOnly(4, "affir_yn", true); // 학자대출금 담당 // 20181002 비정규직 또한 학자대출이 가능하여 기능수정 요청 (김지현 행정원)
									// grid1.setCellReadOnly(4, "affir_yn", false); // 학자대출금 담당
									// grid1.setCellReadOnly(5, "affir_yn", true); // 상조회대출금 담당
									
									grid_deptCheck.setCellReadOnly(2, "affir_yn", false); // 학자대출금 담당
									grid_deptCheck.setCellReadOnly(3, "affir_yn", false); // 상조회대출금 담당
									
									if(grid_deptCheck.getCellDisplayData(i, 3)=="1"){
										grid_deptCheck.setCellReadOnly(i, "affir_yn", true);
										console.log(i);
									}
								}
							} else if (chkBoxReadFlg == 1 && (occuGrp == "HAA010" || occuGrp == "HAA045")) { // 정규직 작성중
								for (var i=0; i<rowcnt; i++) {
//									grid_deptCheck.setCellDisabled(i, "retrn_yn", true);
//									grid_deptCheck.setCellDisabled(i, "affir_yn", true);
									grid_deptCheck.setCellReadOnly(i, "retrn_yn", true);
									grid_deptCheck.setCellReadOnly(i, "affir_yn", true);
								}
							} else if (chkBoxReadFlg == 3 && (occuGrp == "HAA010" || occuGrp == "HAA045")) { // 정규직 진행중
								for (var i=0; i<rowcnt; i++) {
									grid_deptCheck.setCellReadOnly(i, "retrn_yn", false);
									grid_deptCheck.setCellReadOnly(i, "affir_yn", false);
									//Y로 저장된 값은 수정안됨
									if(grid_deptCheck.getCellDisplayData(i, 3)=="1"){
										console.log("xxxxxxx");
										grid_deptCheck.setCellReadOnly(i, "affir_yn", true);
									}
								}
							}
	
							// 법인카드 소지자 판단후 체크여부 컨트롤
							if (chkBoxReadFlg == 1 && cardKeep == "Y") { // 카드소지자 작성중,임시저장
								grid_deptCheck.setCellReadOnly(5, "retrn_yn", true); // 법인카드 반납
								grid_deptCheck.setCellReadOnly(5, "affir_yn", true); // 담당체크
							} else if (cardKeep == "N") { // 카드 미소지자
								grid_deptCheck.setCellReadOnly(5, "retrn_yn", true);
								grid_deptCheck.setCellReadOnly(5, "affir_yn", true);
								dlt_deptCheck.setCellData(5, "rmk", "법인카드 미소지자는 해당되지 않습니다.");
								dlt_deptCheck.modifyRowStatus(5, 'R');
							} else if (chkBoxReadFlg == 3 && cardKeep == "Y") { // 카드 소지자 진행중
								grid_deptCheck.setCellReadOnly(5, "retrn_yn", false);
								grid_deptCheck.setCellReadOnly(5, "affir_yn", false);
								if(grid_deptCheck.getCellDisplayData(i, 3)){
										grid_deptCheck.setCellReadOnly(i, "affir_yn", true);
								}
							}
							
							dlt_deptCheck.setCellAllData(3, "rmk", "비정규직은 해당되지 않습니다");
						}
						
						if (com.isNotEmpty(etcParam)) {
							if (!Array.isArray(etcParam)) {
								etcParam = [etcParam];
							}
							
							let disabledRowIndexArr = [];
							let initialRowIndexArr = [];
							// 부서 체크가 만약에 여러건일 경우
							for (var deptRole of etcParam) {
								// 모든 체크항목의 UnmatchedIndex를 찾는다
								disabledRowIndexArr.push(grid_deptCheck.getUnmatchedIndex("affir_item_cd", deptRole));
								initialRowIndexArr.push(grid_deptCheck.getMatchedIndex("affir_item_cd", deptRole)[0]);
							}
							if (disabledRowIndexArr.length > 0) {
								// UnmatchedIndex 중 겹치는 부분만 추출
								disabledRowIndexArr = disabledRowIndexArr
										.reduce((arr1, arr2) => arr1.filter(index => arr2.includes(index)));
								// 겹치는 부분만 disabled 처리
								for (var index of disabledRowIndexArr) {
									grid_deptCheck.setRowDisabled(index, true);
								}
							}
							if (initialRowIndexArr.length > 0) {
								// 담당자 결재 순서라면 해당 Row는 모두 빈칸처리
								for (var index of initialRowIndexArr) {
									grid_deptCheck.setCellReadOnly(index, "affir_yn", false);
									dlt_deptCheck.setCellData(index, "affir_yn", "");
									dlt_deptCheck.setCellData(index, "affir_ymd", "");
									dlt_deptCheck.setCellData(index, "nm", "");
								}
							}
							
						}
					}
			});				  
				  
				}
				
			});
			
			//날짜설정관련 
			var now = new Date();
			var year = now.getFullYear();
			var month = now.getMonth();
			var date = now.getDate();
			var firstDate = new Date(year, month , 1);
			var lastDate = new Date(year, month + 1, 0);
			var toDate = new Date(year, month , date);
			
			ipcld_reqYmd.setValue(getDateStr(toDate));
			scwin.gvar.todate = getDateStr(toDate);
	};
	
	scwin.getAprState = function(saveType){
		var aprStateStr = "";

		if (saveType == "APR") {
			aprStateStr = "XAD010";
		} else if (saveType == "SAVE") {
			if (dma_hupApySvrDetail.get("apr_state") == "") {
				aprStateStr = "XAD005";
			} else {
				aprStateStr = dma_hupApySvrDetail.get("apr_state");
			}
		}

		return aprStateStr;
	}
	
		
	scwin.btn_regSearch_onclick = function(e) {
		var data={empno : ipt_empno.getValue()};
		
		com.pop.open( com.pop.TYPE.HUM, data, function(ret){
			
			dma_hupApySvrDetail.set("syspayno", ret.syspayno);
 			dma_hupApySvrDetail.set("nm", ret.nm);
 			dma_hupApySvrDetail.set("dept_nm", ret.dept_nm);
 			dma_hupApySvrDetail.set("req_empno", ret.empno);
 			dma_hupApySvrDetail.set("posi_nm", ret.posi_nm);
 			dma_hupApySvrDetail.set("dept_cd", ret.dept_cd);
 			dma_hupApySvrDetail.set("dept_new_ymd", ret.dept_new_ymd);
 			
 			dma_search.set("syspayno", ret.syspayno);
 			
 			if(scwin.gvar.sn != ret.syspayno){
 			
 				scwin.gvar.sn = ret.syspayno;
 				
 				dma_search.set("syspayno", ret.syspayno);
 				scwin.detailSet(dma_hupApySvrDetail.get("req_no"));
	 		}
		});
	};
		
	scwin.btn_psnSearch_onclick = function(e) {
		var data={empno : ipt_empnoPsn.getValue()
		};
		
		com.pop.open( com.pop.TYPE.HUM, data, function(ret){
			if(dma_hupApySvrDetail.get("dept_nm") == ret.dept_nm || dma_hupApySvrDetail.get("posi_nm") == "연구별정(단)"){
				dma_hupApySvrDetail.set("empno", ret.empno);
	 			dma_hupApySvrDetail.set("psn_nm", ret.nm);
	 			dma_hupApySvrDetail.set("psn_no_syspayno", ret.syspayno);
	 			dma_hupApySvrDetail.set("psn_dept_nm", ret.dept_nm);
	 			dma_hupApySvrDetail.set("psn_posi_nm", ret.posi_nm);
	 			dma_hupApySvrDetail.set("psn_no_dept_cd", ret.dept_cd);
	 			dma_hupApySvrDetail.set("psn_no_dept_new_ymd", ret.dept_new_ymd);
	 			dma_hupApySvrDetail.set("psn_email", ret.email);
 			}else{
 				dma_hupApySvrDetail.set("psn_no_syspayno", ret.syspayno);
 				
	 			com.execute(sbm_adJobCheck, {
					successCallback : function(ret) {
						if(ret.responseJSON.elData.humApySvrVo.psn_adjob_dept_nm == dma_hupApySvrDetail.get("dept_nm")){
							dma_hupApySvrDetail.set("empno", ret.responseJSON.elData.humApySvrVo.empno);
				 			dma_hupApySvrDetail.set("psn_nm", ret.responseJSON.elData.humApySvrVo.psn_nm);
				 			dma_hupApySvrDetail.set("psn_no_syspayno", ret.responseJSON.elData.humApySvrVo.psn_no_syspayno);
				 			dma_hupApySvrDetail.set("psn_dept_nm", ret.responseJSON.elData.humApySvrVo.psn_dept_nm);
				 			dma_hupApySvrDetail.set("psn_posi_nm", ret.responseJSON.elData.humApySvrVo.psn_posi_nm);
				 			dma_hupApySvrDetail.set("psn_no_dept_cd", ret.responseJSON.elData.humApySvrVo.psn_no_dept_cd);
				 			dma_hupApySvrDetail.set("psn_no_dept_new_ymd", ret.responseJSON.elData.humApySvrVo.psn_no_dept_new_ymd);
				 			dma_hupApySvrDetail.set("psn_email", ret.responseJSON.elData.humApySvrVo.psn_email);
				 		}else{
					 		dma_hupApySvrDetail.set("empno", "");
				 			dma_hupApySvrDetail.set("psn_nm", "");
				 			dma_hupApySvrDetail.set("psn_no_syspayno", "");
				 			dma_hupApySvrDetail.set("psn_dept_nm", "");
				 			dma_hupApySvrDetail.set("psn_posi_nm", "");
				 			dma_hupApySvrDetail.set("psn_no_dept_cd", "");
				 			dma_hupApySvrDetail.set("psn_no_dept_new_ymd", "");
				 			dma_hupApySvrDetail.set("psn_email", "");
				 			
				 			alert("퇴직자와 동일한 부서의 업무인수자로 설정해주세요");
				 		}
					}
				});
	 		}
		});	
	};
	
	scwin.btn_save_onclick = function(e) {
		
		var syspayno = dma_hupApySvrDetail.get("syspayno");
		var req_empno = dma_hupApySvrDetail.get("req_empno");
		var nm = dma_hupApySvrDetail.get("nm");
				
		if(syspayno == null || req_empno == null|| nm== null){
			alert(nm+"퇴직자를 선택해 주십시오"+syspayno+"-"+req_empno);
			return;	
		}
				
		dma_hupApySvrDetail.set("middle_adjst_yn","N");
		dma_hupApySvrDetail.set("save_typ","SAVE");//전자결제 추가시 변경
		dma_hupApySvrDetail.set("apr_state",scwin.getAprState("SAVE"));//전자결제 추가시 변경
		dma_hupApySvrDetail.set("org_email",com.getLoginInfo('email'));//전자결제 추가시 변경
		dma_hupApySvrDetail.set("approval", "false");
		dma_hupApySvrDetail.set("retire_resn_nm", ipsb_retire_resn.getText());
		
		if (!scwin.vaildCheck("SAVE")) {//전자결제 추가시 변경
			return false;
		}
		
		var occutypCd = dma_hupApySvrDetail.get("occutyp_cd");
		
		if (occutypCd == "350000") {
			
			var pruseRespnPsn = dma_hupApySvrDetail.get("pruse_respn_psn");
			
			console.log("pruseRespnPsn    :"+pruseRespnPsn);
				
			dma_hupApySvrDetail.set("tc_manager_id",pruseRespnPsn);
		}		
		
		com.file.transport( function( attachObj){
			
			dma_hupApySvrDetail.set("attach_file_no", attachObj.upload_A);
			var attaches = [attachObj.upload_A];
			dma_hupApySvrDetail.set("validAttachNo", attaches.join(','));
			com.execute(sbm_saveApy, {				
				successCallback : function(e) {
					scwin.detailSet();
				}
			});
		});	
	};
	
	
	scwin.backToList = function(data) {
		com.moveList("H540", {});
	};
	
	scwin.vaildCheck = function(save_typ) {
		
		var now = new Date();
		var year = now.getFullYear();
		var month = now.getMonth();
		var date = now.getDate();
		var firstDate = new Date(year, month , 1);
		var lastDate = new Date(year, month + 1, 0);
		var toDate = new Date(year, month , date);
		
					
		// 신청일
		if (ipcld_reqYmd.getValue() == "") {
			alert("신청일을 선택해 주세요");

			return false;
		}

		// 퇴직희망일
		if (ipcld_retireHopYmd.getValue() == "") {
			alert("퇴직희망일을 선택해 주세요");

			return false;
		}

		// 퇴직일 30일 전까지 결재 상신 가능 적용
		var minValidRetireHopeYmd = WebSquare.date.dateAdd(getDateStr(toDate), 30);//

		if (true) {
			// 임시로 검증로직을 강제 무효화
		} else {
			if (["학생연구원","연수생","연구생"].indexOf(ipt_posiNm.getValue()) < 0) {
				if (["100044"].indexOf(ipt_empno.getValue()) != -1) {
					// 피치못할 사정으로 신청기한 제한에서 예외적용할 퇴직대상자인 경우 필터링 규칙 패스 적용
					// 정욱희(100044)
				} else if (save_typ == "REAPR") {
					// 관련부서 담당자 확인사항 처리시 필터링 규칙 패스 적용
				} else if (inputCalendarRetireHopeYmd.getValue() < minValidRetireHopeYmd) {//
					alert("퇴직희망일 30일 전까지 결재상신이 가능합니다.");

					return false;
				}
			}
		}


		// 퇴직사유
		if (ipsb_retire_resn.getValue() == "") {
			alert("퇴직사유를 선택해 주세요");

			return false;
		}

		// 이직진학유형
		if (ipsb_trans_typ.getValue() == "") {
			alert("이직,진학유형을 선택해 주세요");

			return false;
		}

		if (ipt_email.getValue() == "") {
			alert("개인메일 주소를 입력하세요.\n상용메일주소 입력 요망(kitech 메일 불가)");

			return false;
		} else {
			// kitech 메일을 사용했는지 검증
			var splitEmail = ipt_email.getValue().split("@");
			if(splitEmail.length == 1){
				alert("메일주소를 올바르게 입력하세요.");
				return false;
			}
			var splitEmail1 = splitEmail[1].split(".");
			if(splitEmail1[0] == "kitech" && ipt_reqNo.getValue() != "H0F20220008A" && ipt_reqNo.getValue() != "H0F2022000D3" && ipt_reqNo.getValue() != "H0F2022000D4" && ipt_reqNo.getValue() != "H0F2022000DD" ){
				alert("개인메일 주소를 입력하세요.\n상용메일주소 입력 요망(kitech 메일 불가)");
				return false;
			}
		}

		if (ipchk_essen.getValue() == "") {
			alert("퇴직시 개인정보 활용(필수적 정보) 동의여부 선택하여 주시기 바랍니다.");

			return false;
		}

		if (ipchk_opt.getValue() == "") {
			alert("퇴직시 개인정보 활용(선택적 정보) 동의여부 선택하여 주시기 바랍니다.");

			return false;
		}
	
		if (1 > com.file.action.getTotalFileCount(upload_A.getID())) {
			alert("사직서, 퇴직자서약서, 개인정보 동의서를 반드시 첨부하여 주시기 바랍니다.");

			return false;
		}//

		return true;

	}
	
	scwin.btn_del_onclick = function(e) {
		com.file.deleteAll( function(){
			com.execute(sbm_delApy, {
				
				successCallback : function(e) {
  						com.alert("message.xom.wq.023" /*정상적으로 처리되었습니다.*/, function () {
							scwin.checkList = [];
							scwin.backToList({});
						});
				}
				
			});
		});	
			
	};
	
	scwin.ipt_empno_onblur = function(e) {
		if(ipt_empno.getValue().trim() == ""){
			ipt_nm.setValue("");
		}
	};
	
	scwin.ipt_empnoPsn_onblur = function(e) {
		if(ipt_empnoPsn.getValue().trim() == ""){
			ipt_psnNm.setValue("");
		}
	};
	
	scwin.btn_addrSearch_onclick = function(e) {
		
		com.pop.open( com.pop.TYPE.ADDR, "", function(ret){
				
				dma_hupApySvrDetail.set("addr_postmt_no", ret.zipNo);
				dma_hupApySvrDetail.set("addr_base", ret.roadAddrPart1);
				dma_hupApySvrDetail.set("addr_detls", ret.roadAddrPart2);

		});
	};
	
	scwin.btn_list_onclick = function(e) {
		scwin.backToList();
	};
	
	
	scwin.btn_pcs_onclick = function(e) {
		var req_no = dma_hupApySvrDetail.get("req_no");
		var syspayno = dma_hupApySvrDetail.get("syspayno");
		
			var data = { "syspayno" :syspayno  
			             , req_no : req_no
						};
			
			var options = {
				id : "pcsListPop",
				popupName : "결재미처리현황",
				width : 1000, height: 500 
			};
			com.openPopup("/ui/hum/apy/HUM_APY_H550_02P.xml", options, data, function(retObj) {
			});
		
	};
	
	scwin.btn_anchor1_onclick = function() {
		var save = "10000001";
		var real = encodeURIComponent("[양식]사직서.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};	

	scwin.btn_anchor11_onclick = function() {
		var save = "10000002";
		var real = encodeURIComponent("[양식]퇴직자서약서.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};
	
	scwin.btn_anchor12_onclick = function() {
		var save = "10000016";
		var real = encodeURIComponent("[양식]개인정보 제공 동의서.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};
	
	scwin.btn_anchor13_onclick = function() {
		var save = "10000003";
		var real = encodeURIComponent("EIP이용안내.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};
	
	scwin.textbox4_onclick = function() {
		var save = "10000004";
		var real = encodeURIComponent("퇴직연금 급여지급청구서.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};
	
	scwin.btn_trigger1_onclick = function(e) {
		var save = "10000005";
		var real = encodeURIComponent("학생연구원 퇴직(연수종료)매뉴얼.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};
	
	scwin.btn_trigger2_onclick = function(e) {
		var save = "10000013";
		var real = encodeURIComponent("학생연구원 퇴직(연수종료) 첨부 양식.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};
	
	scwin.btn_trigger4_onclick = function(e) {
		var save = "10000100";
		var real = encodeURIComponent("[동영상]퇴직자 보안교육.wmv");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};

	
	scwin.btn_apr_onclick = function(e) {
		
		var syspayno = dma_hupApySvrDetail.get("syspayno");
		var req_empno = dma_hupApySvrDetail.get("req_empno");
		var nm = dma_hupApySvrDetail.get("nm");
				
		if(syspayno == null || req_empno == null|| nm== null){
			alert(nm+"퇴직자를 선택해 주십시오"+syspayno+"-"+req_empno);
			return;	
		}
				
		dma_hupApySvrDetail.set("middle_adjst_yn","N");
		dma_hupApySvrDetail.set("org_email",com.getLoginInfo('email'));
		
		if(dma_hupApySvrDetail.get("save_typ") == "SAVE"){
		dma_hupApySvrDetail.set("save_typ","APR");
		dma_hupApySvrDetail.set("apr_state",scwin.getAprState("APR"));
		}
		
		if(dma_hupApySvrDetail.get("save_typ") == "APR"){
		dma_hupApySvrDetail.set("save_typ","REAPR");
		dma_hupApySvrDetail.set("apr_state",scwin.getAprState("REAPR"));
		}
		
		if(dma_hupApySvrDetail.get("occugrp_cd") == "HAA010"){
			dma_hupApySvrDetail.set("aprLine","0");
			dma_hupApySvrDetail.set("aprLineTyp","ADR110");
		}else if(dma_hupApySvrDetail.get("occugrp_cd") == "HAA045"){
			dma_hupApySvrDetail.set("aprLine","11");
			dma_hupApySvrDetail.set("aprLineTyp","ADR120");
		}
		
		var infoCd = dma_hupApySvrDetail.get("nm") + "/" +dma_hupApySvrDetail.get("posi_nm") + "/" + dma_hupApySvrDetail.get("dept_nm")  + "/" +  dma_hupApySvrDetail.get("retire_hope_ymd");
		
		dma_hupApySvrDetail.set("aprState","XAD010");
		dma_hupApySvrDetail.set("info_cd",infoCd);
		dma_hupApySvrDetail.set("manager4_id",dma_manger.get("syspayno"));
		dma_hupApySvrDetail.set("approval", "true");
		dma_hupApySvrDetail.set("retire_resn_nm", ipsb_retire_resn.getText());
		
		if (!scwin.vaildCheck(dma_hupApySvrDetail.get("save_typ"))) {
			return false;
		}
		
		var occutypCd = dma_hupApySvrDetail.get("occutyp_cd");
		
		if (occutypCd == "350000") {
			var pruseRespnPsn = dma_hupApySvrDetail.get("pruse_respn_psn");
			console.log("pruseRespnPsn    :"+pruseRespnPsn);
			dma_hupApySvrDetail.set("tc_manager_id",pruseRespnPsn);
		}
		
		com.file.transport( function( attachObj){
			dma_hupApySvrDetail.set("attach_file_no", attachObj.upload_A);
			var attaches = [attachObj.upload_A];
			dma_hupApySvrDetail.set("validAttachNo", attaches.join(','));
			com.execute(sbm_saveApy, {
									
				successCallback : function(e) {
					com.movePageMenu("A001", { "reqNo" :  dma_hupApySvrDetail.get("req_no")});
				}
			});
		});	
	};
	
	scwin.getResManger = function(id) {
		var deptCd = dma_hupApySvrDetail.get("dept_cd");
		var deptNewYmd = dma_hupApySvrDetail.get("dept_new_ymd");

		dma_search.set("dept_cd",deptCd);
		dma_search.set("dept_new_ymd",deptNewYmd);
		var data={
			dept_cd : dma_hupApySvrDetail.get("dept_cd"),
			dept_new_ymd : dma_hupApySvrDetail.get("dept_new_ymd")
		};
		com.biz.getResMan(data, function(ret){		
			if(ret != undefined){
				dma_hupApySvrDetail.set("manager_id", ret.syspayno);
			}
//			else{
//				alert("연구관리담당자 정보가 존재하지 않습니다. \n소속부서 연구관리담당자에게 문의바랍니다.");
//				return;	
//			}
			dma_hupApySvrDetail.set("appont_typ", dma_hupApySvrDetail.get("retire_resn"));
			dma_hupApySvrDetail.set("appont_prcs_ymd", dma_hupApySvrDetail.get("retire_hope_ymd"));
			dma_hupApySvrDetail.set("appont_start_ymd", dma_hupApySvrDetail.get("appont_start_ymd"));
			
			if(id == "btn_save"){
				scwin.btn_save_onclick();
			}else if(id == "btn_apr"){
				scwin.btn_apr_onclick();
			}
		});
	};
	
	scwin.trigger_affir_prc_onclick = function(e) {
		var aprState = dma_hupApySvrDetail.get("apr_state");
		//(정규직)채용퇴직담당(1003132), (비정규직)채용퇴직담당(1003133), (기타)채용퇴직담당(1003134)
		var roleArr = ["1003132","1003133","1003134"];
		var roleChk = "f";
		
		for(var i in roleArr) {
			if(com.getLoginInfo("roleCode").indexOf(roleArr[i]) > -1) {
				roleChk = "t";				
			}
		}
		
		if(com.getLoginInfo("roleCode").indexOf("1003136") > -1){
			dma_hupApySvrDetail.set("food_manger_yn", "Y");
		}else{
			dma_hupApySvrDetail.set("food_manger_yn", "N");
		}
		
		dma_hupApySvrDetail.set("retire_resn_nm", ipsb_retire_resn.getText());
		
		if(aprState == "XAD070" || (aprState != "XAD080" && roleChk == "t")){
			//최종결제
			dma_hupApySvrDetail.set("apr_state","XAD100");
			dma_hupApySvrDetail.set("appont_prcs", "HCX010");
			dma_hupApySvrDetail.set("ref_tab", "humapysvr");
			com.execute(sbm_saveComApr, {
				successCallback : function(e) {
					com.openTabMenu("A004", {});
				}
			});
		}else{
//			if(aprState == 'XAD020'){
//				alert(dma_hupApySvrDetail.get("rowStatus"));
//				if (dma_hupApySvrDetail.get("rowStatus") != "U") {	
//					alert("관련부서 확인사항 중 담당확인이 체크되지 않았습니다"/*변경된 정보가 없습니다.*/);
//					return;
//				}	
//			}
			//담당자결제
			dma_hupApySvrDetail.set("apr_state","XAD020");
			com.execute(sbm_saveApr, {
				successCallback : function(e) {
					com.openTabMenu("A004", {});
				}
			});
		}
	};
	
	scwin.trigger_ret_onclick = function(e) {
		//반려
		dma_hupApySvrDetail.set("apr_state","XAD015");
		com.execute(sbm_delApr, {
			successCallback : function(e) {
				com.openTabMenu("A004", {});
			}
		});
	};
	
	
	scwin.apr_state_btn_onclick = function(e) {
		var reqNo =  dma_hupApySvrDetail.get("req_no");
		var aprNm = dma_hupApySvrDetail.get("apr_state_nm");
		if(reqNo != "" && aprNm != "저장중" || aprNm != "작성중"){
			var url = "/ui/apr/layoutSimple.xml";
			var option = { type: "browserPopup", width: 1350, height: 1480, id: "snapshotPop", popupName: "결재문서"};
			var data = { reqNo: reqNo, viewMode : "read", instStatus : (dma_hupApySvrDetail.get("apr_state") != "XAD100" ? "Running" : "Completed") } // instStatus" : "Completed",
			com.openPopup(url, option, data);
			
		}else{
			alert("결제후 열람이 가능합니다.");
		}
	};

	
	scwin.btn_trigger12_onclick = function(data) {
		var options = {
			id : "HumApySvrSecurePop",
			popupName : "퇴직 시 보안교육(보안상식)",
			width : 800, height: 400 
		};
		com.openPopup("/ui/hum/apy/HUM_APY_H550_03P.xml", options, data, function(retObj) {
			scwin.searchMroomReq();
		});
	};
	
	scwin.btn_trigger13_onclick = function(data) {
		var save = "10000032";
		var real = encodeURIComponent("(YS 포스트닥터 퇴직양식) 서식9_사업 참여자 종료결과 보고.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};
	
	scwin.btn_trigger14_onclick = function(data) {
		var save = "10000031";
		var real = encodeURIComponent("(이공계인턴십 퇴직양식) [서식11]연수 종료통지서.hwp");	
	
		var url = "/SvcAttachDown.do?fileName=hum/"+save+"&realName="+real+"&bizKind=OLD";
		
		window.open(url, '_blank').focus();
	};
	
	scwin.btn_assPop_onclick = function(e) {
		//var url = "https://dbiz.kitech.re.kr/websquare/websquare.jsp?w2xPath=/kitech/ass/com/AssComUserPopup.xml&userSyapayno=" + dma_hupApySvrDetail.get("syspayno") + "&biz3=true";
		//window.open(url, "", "width=780px,height=365px,toolbar=no,menubar=no,scrollbars=yes,statusbar=no,resizable=yes");
		
		var options = {
			id : "crudOnePop",
			popupName : "보유자산목록",
			width : 1400, height: 450,
			
		};
		
		var data = {user_syspayno : dma_hupApySvrDetail.get("syspayno")
				  };
				  
		console.log(data.user_syspayno);		  
		
		com.openPopup("/ui/hum/pop/HUM_POP_H550D_01P.xml", options, data, function(retObj) {
		});
		
	};
	
	scwin.grid_deptCheck_onviewchange = function(info) {
		dma_hupApySvrDetail.set("rowStatus", "U"); // 상태 : 수정
	};

	]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<w2:wframe id="" src="/cm/xml/contentTitle.xml" style=""></w2:wframe>
    	<xf:group id="" class="pageWrap">
    		<xf:group class="searchSection step" id="" style="">
    			<xf:group class="le" id="" style="">
    				<xf:trigger class="btn" id="btn_list" style="" type="button" ev:onclick="scwin.btn_list_onclick">
    					<xf:label><![CDATA[목록]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    			<xf:group class="btnbox" id="">
    				<xf:trigger class="btn" id="apr_state_btn" style="" type="button" ev:onclick="scwin.apr_state_btn_onclick">
    					<xf:label><![CDATA[결재진행상황]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn blue" id="btn_apr" style="" type="button" ev:onclick="scwin.getResManger('btn_apr')">
    					<xf:label><![CDATA[결재신청]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<xf:group class="titleSection" id="" style="">
    			<w2:textbox class="tit_tbl" id="" label="퇴직자정보" style="" tagname="h3"></w2:textbox>
    			<xf:group class="ri" id="" style="">
    			</xf:group>
    		</xf:group>
    		<xf:group tagname="table" style="" id="" class="w2tb tbl">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="퇴직 신청 기본정보"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group tagname="col" style="width:140px;"></xf:group>
    				<xf:group tagname="col" style=""></xf:group>
    				<xf:group tagname="col" style="width:140px;"></xf:group>
    				<xf:group tagname="col" style=""></xf:group>
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox tagname="span" style="" id="" label="개인정보(성명)"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<xf:group id="" class="flex">
    						<xf:group style="width: 120px;" id="grp_emp" class="inpSch">
    							<xf:input adjustMaxLength="false" style="" id="ipt_empno" title="개인정보(성명)명" class="inp"
    								ref="data:dma_hupApySvrDetail.req_empno" ev:onblur="scwin.ipt_empno_onblur">
    							</xf:input>
    							<xf:trigger style="" id="btn_regSearch" type="button" title="개인정보(성명) 조회" class="btn"
    								ev:onclick="scwin.btn_regSearch_onclick">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:input adjustMaxLength="false" style="" id="ipt_nm" title="개인정보(성명) 상세" class="inp full"
    							ref="data:dma_hupApySvrDetail.nm" readOnly="true">
    						</xf:input>
    					</xf:group>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox tagname="span" style="" id="" label="부서"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="" id="ipt_deptCd" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.dept_nm"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th" style="">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="직급" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td" style="">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="" id="ipt_posiNm" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.posi_nm"></w2:textbox>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="신청일" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:inputCalendar calendarValueType="yearMonthDate" class="inpcal req" focusOnDateSelect="false" footerDiv="false"
    						id="ipcld_reqYmd" placeholder="시작일" renderDiv="true" rightAlign="false" style="" title="신청일"
    						ref="data:dma_hupApySvrDetail.req_ymd">
    					</w2:inputCalendar>
    					<w2:attributes></w2:attributes>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="결재상태" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="" id="" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.apr_state_nm"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="문서번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="" id="ipt_reqNo" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.req_no"></w2:textbox>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group style="" id="" class="titleSection">
    			<w2:textbox tagname="h3" style="" id="" label="신고내용" class="tit_tbl"></w2:textbox>
    			<xf:group class="ri" id="" style="">
    				<xf:trigger class="btn" id="btn_pcs" style="" type="button" ev:onclick="scwin.btn_pcs_onclick">
    					<xf:label><![CDATA[결재미처리현황]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption" text="신고내용  상세내용"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:140px;" tagname="col"></xf:group>
    				<xf:group style="width:20%" tagname="col"></xf:group>
    				<xf:group style="width:20%" tagname="col"></xf:group>
    				<xf:group style="width:20%" tagname="col"></xf:group>
    				<xf:group style="width:20%" tagname="col"></xf:group>
    				<xf:group style="width:20%" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="입원일" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="" id="" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.entr_ymd"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="계약종료일(계약직)" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.contrct_cls_ymd"></w2:textbox>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="집전화번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="" style="" title="집전화번호"
    						ref="data:dma_hupApySvrDetail.home_tel">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="휴대전화번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="" style="" title="휴대전화번호"
    						ref="data:dma_hupApySvrDetail.mobile">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="개인메일주소" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="ipt_email" style="" title="개인정보(성명) 상세"
    						ref="data:dma_hupApySvrDetail.email">
    					</xf:input>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="현주소" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<xf:group class="flex" id="" style="">
    						<xf:group class="inpSch fix" id="grp_area" style="width:120px;">
    							<xf:input adjustMaxLength="false" class="inp" id="ipt_zipNo" style="" title="우편번호 "
    								ref="data:dma_hupApySvrDetail.addr_postmt_no">
    							</xf:input>
    							<xf:trigger class="btn" id="btn_addrSearch" style="" type="button" title="우편번호 조회"
    								ev:onclick="scwin.btn_addrSearch_onclick">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:input adjustMaxLength="false" class="inp" id="ipt_roadAddrPart1" style="width: 150px;" title="주소 상세 1"
    							ref="data:dma_hupApySvrDetail.addr_base">
    						</xf:input>
    						<xf:input adjustMaxLength="false" class="inp" id="ipt_roadAddrPart2" style="width: 150px;" title="주소상세 2"
    							ref="data:dma_hupApySvrDetail.addr_detls">
    						</xf:input>
    					</xf:group>
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="퇴직희망일" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:inputCalendar calendarValueType="yearMonthDate" class="inpcal req" focusOnDateSelect="false" footerDiv="false"
    						id="ipcld_retireHopYmd" placeholder="시작일" renderDiv="true" rightAlign="false" style="" title="퇴직희망일"
    						ref="data:dma_hupApySvrDetail.retire_hope_ymd">
    					</w2:inputCalendar>
    					<w2:attributes></w2:attributes>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="퇴직사유" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="- 선택 -" class="sel  req"
    						direction="auto" disabled="false" disabledClass="w2selectbox_disabled" id="ipsb_retire_resn"
    						ref="data:dma_hupApySvrDetail.retire_resn" style="" submenuSize="auto" title="퇴직사유">
    						<xf:choices></xf:choices>
    					</xf:select1>
    					<w2:attributes></w2:attributes>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="동일 ID 사용" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<xf:select appearance="full" class="chkGroup" cols="" id="" ref="data:dma_hupApySvrDetail.equal_id_yn"
    						renderType="checkboxgroup" rows="checkboxEqualIdYn" selectedindex="-1" style="">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[사용시 체크]]></xf:label>
    								<xf:value><![CDATA[Y]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select>
    					<w2:attributes></w2:attributes>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="이직(진학)유형" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="- 선택 -" class="sel req"
    						direction="auto" disabled="false" disabledClass="w2selectbox_disabled" id="ipsb_trans_typ"
    						ref="data:dma_hupApySvrDetail.trans_typ" style="" submenuSize="auto" title="이직(진학)유형">
    						<xf:choices></xf:choices>
    					</xf:select1>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="이직(진학)기관명" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full req" id="" style="" title="이직(진학)기관명"
    						ref="data:dma_hupApySvrDetail.trans_agncy_nm">
    					</xf:input>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="활용책임자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="" id="" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.pruse_respn_psn_nm"></w2:textbox>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="업무인수자" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<xf:group id="" class="flex">
    						<xf:group class="inpSch" id="grp_cEmp" style="width: 120px;">
    							<xf:input adjustMaxLength="false" class="inp req" id="ipt_empnoPsn" style="" title="업무인수자명"
    								ref="data:dma_hupApySvrDetail.empno" ev:onkeypress="scwin.ipt_empnoPsn_onkeypress" ev:onblur="scwin.ipt_empnoPsn_onblur">
    							</xf:input>
    							<xf:trigger class="btn" id="btn_psnSearch" style="" type="button" title="업무인수자 조회"
    								ev:onclick="scwin.btn_psnSearch_onclick">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:input adjustMaxLength="false" style="" id="ipt_psnNm" title="업무인수자 상세" class="inp req full"
    							ref="data:dma_hupApySvrDetail.psn_nm" readOnly="true">
    						</xf:input>
    					</xf:group>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="직급" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="" id="" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.psn_posi_nm"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" style="" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="부서" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" style="" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="" id="" label="" style="" tagname="span" ref="data:dma_hupApySvrDetail.psn_dept_nm"></w2:textbox>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr" style="">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="퇴직시 개인정보 활용" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="필수적 정보" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<xf:select1 appearance="full" class="radioGroup" cols="" id="ipchk_essen"
    						ref="data:dma_hupApySvrDetail.data_essen_yn" renderType="radiogroup" rows="" selectedIndex="-1" style="" title="출장연계">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[동의]]></xf:label>
    								<xf:value><![CDATA[Y]]></xf:value>
    							</xf:item>
    							<xf:item>
    								<xf:label><![CDATA[비동의]]></xf:label>
    								<xf:value><![CDATA[N]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select1>
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:colspan>1</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox id="" label="선택적 정보" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes>
    						<w2:colspan>2</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:select1 appearance="full" class="radioGroup" cols="" id="ipchk_opt" ref="data:dma_hupApySvrDetail.data_opt_yn"
    						renderType="radiogroup" rows="" selectedIndex="-1" style="">
    						<xf:choices>
    							<xf:item>
    								<xf:label><![CDATA[동의]]></xf:label>
    								<xf:value><![CDATA[Y]]></xf:value>
    							</xf:item>
    							<xf:item>
    								<xf:label><![CDATA[비동의]]></xf:label>
    								<xf:value><![CDATA[N]]></xf:value>
    							</xf:item>
    						</xf:choices>
    					</xf:select1>
    				</xf:group>
    			</xf:group>
    			<xf:group style="" tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="첨부파일" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<xf:group style="width:100%;height:150px;">
    						<xf:group id="upload_A" style="width:100%;height:100%;" />
    					</xf:group>
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="helparea" id="" style="">
    			<xf:group id="" style="" tagname="ul">
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label="결재미처리현황을 확인하여 정리하신후 결재신청을 하시기 바랍니다." style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label="퇴직급여명세서 수령용 이메일 주소 기입 요망" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label="외부 메일 주소 입력 必 (kitech 메일 불가)" style="" tagname="span"></w2:textbox>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="titleSection" id="" style="">
    			<w2:textbox class="tit_tbl" id="" label="관련부서 확인사항" style="" tagname="h3"></w2:textbox>
    			<xf:group class="ri" id="" style="">
    				<xf:trigger class="btn" id="btn_assPop" style="" type="button" ev:onclick="scwin.btn_assPop_onclick">
    					<xf:label><![CDATA[개인보유자산목록]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<w2:gridView autoFit="allColumn" class="grid" dataList="data:dlt_deptCheck" defaultCellHeight="28"
    			evenRowBackgroundColor="#f7faff" id="grid_deptCheck" noResultMessage="조회 결과가 없습니다." noResultMessageClass="noResult"
    			rowMouseOverColor="#e7f0fb" rowNumBackgroundColor="#fff" rowNumHeaderValue="No." rowNumVisible="true" rowNumWidth="60"
    			rowStatusHeaderValue="상태" rowStatusVisible="false" rowStatusWidth="50" scrollByColumn="false" scrollByColumnAdaptive="false"
    			selectedCellColor="#fbf2cd" selectedRowColor="#fbf2cd" style="height: 85px;" summaryAuto="true" visibleRowNum="5"
    			rowNumStatusResize="false" ev:onviewchange="scwin.grid_deptCheck_onviewchange">
    			<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
    			<w2:header id="header1" style="">
    				<w2:row id="row1" style="">
    					<w2:column displayMode="label" id="column7" inputType="text" style="height:28px;" value="확인사항" width="100"></w2:column>
    					<w2:column displayMode="label" id="column5" inputType="text" style="height:28px;" value="반납여부" width="100"></w2:column>
    					<w2:column displayMode="label" id="column3" inputType="text" style="height:28px;" value="업무담당" width="100"></w2:column>
    					<w2:column displayMode="label" id="column20" inputType="text" style="height:28px;" value="담당확인" width="70"></w2:column>
    					<w2:column displayMode="label" id="column29" inputType="text" style="height:28px;" value="확인일" width="70"></w2:column>
    					<w2:column displayMode="label" id="column30" inputType="text" style="height:28px" value="확인자" width="70"></w2:column>
    					<w2:column displayMode="label" id="column32" inputType="text" style="height:28px" value="비고" width="200"></w2:column>
    					<w2:column displayMode="label" id="column99" inputType="text" style="height:28px" width="200" hidden="true"></w2:column>
    				</w2:row>
    			</w2:header>
    			<w2:gBody id="gBody1" style="">
    				<w2:row id="row2" style="">
    					<w2:column displayMode="label" id="cd_nm" inputType="text" readOnly="true" style="height:28px;" width="100"></w2:column>
    					<w2:column displayMode="label" escape="false" id="retrn_yn" inputType="checkbox" readOnly="true"
    						style="height:28px;" width="100" valueType="binary">
    					</w2:column>
    					<w2:column displayMode="label" escape="false" id="mngmt_item_1" inputType="text" readOnly="true"
    						style="height:28px;" width="100">
    					</w2:column>
    					<w2:column class="" displayMode="label" id="affir_yn" inputType="checkbox" readOnly="true" style="height:28px;"
    						width="70" valueType="binary">
    					</w2:column>
    					<w2:column displayMode="label" id="affir_ymd" inputType="text" readOnly="true" style="height:28px;" width="70"></w2:column>
    					<w2:column displayMode="label" id="nm" inputType="text" readOnly="true" style="height:28px" value="" width="70">
    					</w2:column>
    					<w2:column displayMode="label" id="rmk" inputType="text" readOnly="true" style="height:28px" value="" width="200"
    						class="le">
    					</w2:column>
    					<w2:column displayMode="label" id="affir_item_cd" inputType="text" readOnly="true" style="height:28px" value=""
    						width="200" class="le">
    					</w2:column>
    				</w2:row>
    			</w2:gBody>
    		</w2:gridView>
    		<w2:gridView autoFit="allColumn" class="grid" dataList="data:dlt_companion" defaultCellHeight="28"
    			evenRowBackgroundColor="#f7faff" id="group_compan" noResultMessage="조회 결과가 없습니다." noResultMessageClass="noResult"
    			rowMouseOverColor="#e7f0fb" rowNumBackgroundColor="#fff" rowNumHeaderValue="No." rowNumStatusResize="false" rowNumVisible="true"
    			rowNumWidth="60" rowStatusHeaderValue="상태" rowStatusVisible="false" rowStatusWidth="50" scrollByColumn="false"
    			scrollByColumnAdaptive="false" selectedCellColor="#fbf2cd" selectedRowColor="#fbf2cd" style="height: 85px;" summaryAuto="true"
    			visibleRowNum="5">
    			<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
    			<w2:header id="header1" style="">
    				<w2:row id="row1" style="">
    					<w2:column displayMode="label" id="column7" inputType="text" style="height:28px;" value="반려자" width="100"></w2:column>
    					<w2:column displayMode="label" id="column5" inputType="text" style="height:28px;" value="반려의견" width="300"></w2:column>
    					<w2:column displayMode="label" id="column3" inputType="text" style="height:28px;" value="반려일시" width="100"></w2:column>
    				</w2:row>
    			</w2:header>
    			<w2:gBody id="gBody1" style="">
    				<w2:row id="row2" style="">
    					<w2:column displayMode="label" id="reject_name" inputType="text" readOnly="true" style="height:28px;" width="100"></w2:column>
    					<w2:column displayMode="label" escape="false" id="reject_contents" inputType="text" readOnly="true"
    						style="height:28px;" width="300">
    					</w2:column>
    					<w2:column displayMode="label" escape="false" id="reject_wdate" inputType="text" readOnly="true"
    						style="height:28px;" width="100">
    					</w2:column>
    				</w2:row>
    			</w2:gBody>
    		</w2:gridView>
    		<xf:group class="helparea" id="" style="">
    			<w2:textbox class="helptitle" id="" label="업무인수자는 퇴직자의 결재 진행건에 대한 대결자로 지정됩니다." style=""></w2:textbox>
    			<xf:group id="" style="" tagname="ul">
    				<xf:group id="" tagname="li">
    					<w2:textbox id="" label="사직서, 퇴직자서약서, 개인정보 동의서를 반드시 첨부하여 주시기 바랍니다.(양식 다운로드)" style="" tagname="span" class="red"></w2:textbox>
    					<w2:anchor class="linkfile singleLine" id="btn_anchor1" outerDiv="false" style=""
    						ev:onclick="scwin.btn_anchor1_onclick">
    						<xf:label><![CDATA[사직서]]></xf:label>
    					</w2:anchor>
    					<w2:anchor class="linkfile singleLine" id="btn_anchor11" outerDiv="false" style=" margin-left:10px"
    						ev:onclick="scwin.btn_anchor11_onclick">
    						<xf:label><![CDATA[퇴직자서약서]]></xf:label>
    					</w2:anchor>
    					<w2:anchor class="linkfile singleLine" id="btn_anchor12" outerDiv="false" style=" margin-left:10px"
    						ev:onclick="scwin.btn_anchor12_onclick">
    						<xf:label><![CDATA[개인정보 동의서]]></xf:label>
    					</w2:anchor>
    					<w2:anchor class="linkfile singleLine" id="btn_anchor13" outerDiv="false" style=" margin-left:10px"
    						ev:onclick="scwin.btn_anchor13_onclick">
    						<xf:label><![CDATA[EIP이용안내]]></xf:label>
    					</w2:anchor>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id=""
    						label="4대보험 공단에서는 보험료 청구 시 매월 1일 재직여부를 기준으로 1개월 치 보험료(일할계산 미적용)를 청구하므로,&lt;br/&gt; &amp;nbsp; 퇴직일을 매월 2일~4일 등으로 설정 시 퇴직 월의 일할계산급여보다 4대보험료가 높은 경우 마이너스 급여가 발생할 수 있습니다."
    						style="" tagname="span" escape="false">
    					</w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="output80" label="퇴직연금 가입자의 경우, 퇴직연금 급여지급청구서를 작성하여 급여담당자에게 제출하여주시기바랍니다." style=""
    						tagname="span">
    					</w2:textbox>
    					<w2:anchor class="linkfile singleLine" id="textbox4" outerDiv="false" style=""
    						ev:onclick="scwin.textbox4_onclick">
    						<xf:label><![CDATA[퇴직연금 급여지급청구서]]></xf:label>
    					</w2:anchor>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label="별정직, 비상근 퇴직시 업무인수인계자 학생인력 불가" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red dis_block" id="" label="사직서, 퇴직자서약서에 작성날짜 작성시 퇴직일 또는 퇴직일 이전만 가능" style="" tagname="span">
    					</w2:textbox>
    					<w2:textbox class="red dis_block" id="" label="ex) 퇴직일 : 2016.6.1" style="" tagname="span"></w2:textbox>
    					<w2:textbox class="red dis_block " id="" label="작성날짜 : 2016.6.1 or 2016.5.31 (o)" style="margin-left: 20px"
    						tagname="span">
    					</w2:textbox>
    					<w2:textbox class="red dis_block" id="" label=" 2016.6.2 (x)" style="margin-left: 79px" tagname="span"></w2:textbox>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group style="" id="" class="btnGroup">
    			<xf:group class="le" id="" style="">
    				<xf:trigger class="btn pro gray" id="btn_trigger1" style="" type="button" ev:onclick="scwin.btn_trigger1_onclick">
    					<xf:label><![CDATA[학생연구원 퇴직 (연수종료)매뉴얼]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn pro gray" id="btn_trigger2" style="" type="button" ev:onclick="scwin.btn_trigger2_onclick">
    					<xf:label><![CDATA[학생연구원 퇴직(연수종료)첨부 양식]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn pro gray" id="btn_trigger4" style="" type="button" ev:onclick="scwin.btn_trigger4_onclick">
    					<xf:label><![CDATA[퇴직 시 보안교육(퇴직자용)]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn pro gray" id="btn_trigger12" style="" type="button" ev:onclick="scwin.btn_trigger12_onclick">
    					<xf:label><![CDATA[퇴직 시 보안교육(보안상식)]]></xf:label>
    				</xf:trigger><br/>
    				<xf:trigger class="btn pro gray" id="btn_trigger13" style="" type="button" ev:onclick="scwin.btn_trigger13_onclick">
    					<xf:label><![CDATA[YS 포스트닥터퇴직 첨부 양식]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn pro gray" id="btn_trigger14" style="" type="button" ev:onclick="scwin.btn_trigger14_onclick">
    					<xf:label><![CDATA[이공계인턴십 퇴직 첨부 양식]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    			<xf:group id="" class="ri">
    				<xf:trigger class=" btn pro conf" id="trigger_ret" style="display:" type="button"
    					ev:onclick="scwin.trigger_ret_onclick">
    					<xf:label><![CDATA[반려]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="trigger_affir_prc" style="display:" type="button"
    					ev:onclick="scwin.trigger_affir_prc_onclick">
    					<xf:label><![CDATA[처리]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="btn_del" style="" type="button" ev:onclick="scwin.btn_del_onclick">
    					<xf:label><![CDATA[삭제]]></xf:label>
    				</xf:trigger>
    				<xf:trigger style="" id="btn_save" type="button" class=" btn pro conf" ev:onclick="scwin.getResManger('btn_save')">
    					<xf:label><![CDATA[저장]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    </body>
</html>