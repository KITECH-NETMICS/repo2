<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_programName="적립형공제 신청">
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
        	<xf:instance>
        		<data xmlns="" />
        	</xf:instance>
        	<w2:dataCollection baseNode="map">
        		<w2:dataMap baseNode="map" id="dma_search">
        			<w2:keyInfo>
        				<w2:key id="req_no" name="req_no" dataType="text"></w2:key>
        				<w2:key id="syspayno" name="syspayno" dataType="text"></w2:key>
        				<w2:key id="salry_cd" name="salry_cd" dataType="text"></w2:key>
        				<w2:key id="base_ymd" name="base_ymd" dataType="text"></w2:key>


        				<w2:key id="cmd" name="cmd" dataType="text"></w2:key>
        				<w2:key id="apr_state" name="apr_state" dataType="text"></w2:key>
        				<w2:key id="serviceId" name="serviceId" dataType="text"></w2:key>
        				<w2:key id="uiId" name="uiId" dataType="text"></w2:key>
        				<w2:key id="param4" name="param4" dataType="text"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        		<w2:dataMap baseNode="map" id="dma_info">
        			<w2:keyInfo>
        				<w2:key id="req_no" name="req_no" dataType="text"></w2:key>
        				<w2:key id="req_ymd" name="req_ymd" dataType="text"></w2:key>
        				<w2:key id="empno" name="empno" dataType="text"></w2:key>
        				<w2:key id="nm" name="nm" dataType="text"></w2:key>
        				<w2:key id="dept_nm" name="dept_nm" dataType="text"></w2:key>
        				<w2:key id="posi_nm" name="posi_nm" dataType="text"></w2:key>
        				<w2:key id="req_typ_nm" name="req_typ_nm" dataType="text"></w2:key>
        				<w2:key id="incrdecr_amt" name="incrdecr_amt" dataType="text"></w2:key>
        				<w2:key id="tot_bankaccnt_no" name="총구좌수" dataType="text"></w2:key>
        				<w2:key id="tot_amt" name="tot_amt" dataType="text"></w2:key>
        				<w2:key id="apr_state_nm" name="apr_state_nm" dataType="text"></w2:key>
        				<w2:key id="entr_ymd" name="entr_ymd" dataType="text"></w2:key>
        				<w2:key id="resid_no" name="resid_no" dataType="text"></w2:key>
        				<w2:key id="req_typ" name="신청유형" dataType="text"></w2:key>
        				<w2:key id="dept_cd" name="dept_cd" dataType="text"></w2:key>
        				<w2:key id="posi_cd" name="posi_cd" dataType="text"></w2:key>
        				<w2:key id="apr_state" name="apr_state" dataType="text"></w2:key>
        				<w2:key id="syspayno" name="syspayno" dataType="text"></w2:key>
        				<w2:key id="dept_cd" name="dept_cd" dataType="text"></w2:key>
        				<w2:key id="dept_new_ymd" name="dept_new_ymd" dataType="text"></w2:key>
        				<w2:key id="postmt_no" name="자택주소" dataType="text"></w2:key>
        				<w2:key id="base_addr" name="자택주소" dataType="text"></w2:key>
        				<w2:key id="detls_addr" name="자택주소" dataType="text"></w2:key>
        				<w2:key id="cmpy_postmt_no" name="회사주소" dataType="text"></w2:key>
        				<w2:key id="cmpy_base_addr" name="회사주소" dataType="text"></w2:key>
        				<w2:key id="cmpy_detls_addr" name="회사주소" dataType="text"></w2:key>
        				<w2:key id="home_tel" name="home_tel" dataType="text"></w2:key>
        				<w2:key id="mobile" name="mobile" dataType="text"></w2:key>
        				<w2:key id="ext_no" name="ext_no" dataType="text"></w2:key>
        				<w2:key id="email" name="email" dataType="text"></w2:key>
        				<w2:key id="req_befr_bankaccnt_no" name="현구좌수" dataType="text"></w2:key>
        				<w2:key id="incrdecr_bankaccnt_no" name="incrdecr_bankaccnt_no" dataType="text"></w2:key>
        				<w2:key id="req_cause" name="req_cause" dataType="text"></w2:key>
        				<w2:key id="attach_file_no" name="attach_file_no" dataType="text"></w2:key>
        				<w2:key id="regst_syspayno" name="regst_syspayno" dataType="text"></w2:key>
        				<w2:key id="calc_base" name="calc_base" dataType="text"></w2:key>
        				<w2:key id="fretax_amt" name="fretax_amt" dataType="text"></w2:key>
        				<w2:key id="calc_base_2" name="calc_base_2" dataType="text"></w2:key>
        				<w2:key id="addr_postmt_no" name="addr_postmt_no" dataType="text"></w2:key>
        				<w2:key id="addr_base" name="addr_base" dataType="text"></w2:key>
        				<w2:key id="addr_detls" name="addr_detls" dataType="text"></w2:key>
        				>
        				<w2:key id="cole_yn" name="cole_yn" dataType="text"></w2:key>
        				<w2:key id="savng_shape_dedct" name="savng_shape_dedct" dataType="text"></w2:key>
        				<w2:key id="total_sema_amt" name="total_sema_amt" dataType="text"></w2:key>
        				<w2:key id="info_cd" name="info_cd" dataType="text"></w2:key>
        				<w2:key id="approval" name="approval" dataType="text"></w2:key>
        				<w2:key id="service_id" name="service_id" dataType="text"></w2:key>
        				<w2:key id="doc_id" name="doc_id" dataType="text"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        		<w2:dataList baseNode="list" repeatNode="map" id="dlt_reject" saveRemovedData="true">
        			<w2:columnInfo>
        				<w2:column id="empname" name="반려자명" dataType="text"></w2:column>
        				<w2:column id="contents" name="반려비고" dataType="text"></w2:column>
        				<w2:column id="created_date" name="반려일자" dataType="text"></w2:column>
        			</w2:columnInfo>
        		</w2:dataList>
        		<w2:dataList baseNode="list" repeatNode="map" id="dlt_incrdecr_bank_accnt" saveRemovedData="true">
        			<w2:columnInfo>
        				<w2:column id="code" name="code" dataType="number"></w2:column>
        				<w2:column id="value" name="value" dataType="text"></w2:column>
        			</w2:columnInfo>
        		</w2:dataList>
        	</w2:dataCollection>
        	<w2:workflowCollection></w2:workflowCollection>
        	<xf:submission id="sbm_selectHumApySema" ref="data:json,dma_search" target="" action="SvcHUMAPYSEMASS01.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_selectHumApySemaEmpInfo" ref="data:json,dma_search" target="" action="SvcHUMAPYSEMASS03.pwkjson"
        		method="post" mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler=""
        		mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_selectHumApySemaDupCheck" ref="data:json,dma_search" target="" action="SvcHUMAPYSEMASS02.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="" ev:submit="" ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_saveHumApySema" ref="data:json,dma_info" target="data:json,dma_search" action="SvcHUMAPYSEMASI01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_deleteHumApySema" ref="data:json,dma_info" target="" action="SvcHUMAPYSEMASD01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_aprAgr" ref="data:json,dma_info" target="" action="SvcHUMAPYSEMASM01.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_aprReject" ref="data:json,dma_info" target="" action="SvcHUMAPYSEMASM02.pwkjson" method="post" mediatype="application/json"
        		encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <script type="text/javascript" lazy="false"><![CDATA[
    /****************************************************
 	 * 화면 설명 : 적립형공제 신청
 	 * 변경 이력 : 2023-09-25	김상미	최초 작성
 	 * 서비스아이디 : H586
 	 ****************************************************/  
 
 	scwin.data={};

 	/**
	 * 페이지 로딩 이벤트
	 */ 	         
	scwin.onpageload = function() {
		var param = com.getParameter();
		scwin.data.service_id="H586";	
		scwin.data.doc_id = "H17";		
		scwin.data.set_comp = false;
		scwin.data.today = com.getServerDateTime();	
		ica_req_ymd.setValue(scwin.data.today);
		grd_reject.hide();
		btn_confirm.hide();
		btn_print.setDisabled(true);
		btn_reject.hide();	
	
		com.biz.disabledButtons(dma_info.get("apr_state"), dma_info.get("req_no"));
		scwin.initPage(param);		
	};
	
	scwin.onpageunload = function() {
		
	};

	/**
	* 화면 초기 세팅
	*/
	scwin.initPage = function(param) {
		// 공통코드
		var codeOptions = [ { code : "HSE", compID : "sbx_req_typ"} //신청유형
		                  , { code : "XAB", compID : "sbx_domain"}  //이메일도메인
		               ];	
		               	
		com.setCmnCd(codeOptions, function() {
			scwin.setSbxIncrdecrBankAccntNoItem();
		});

		//관리자권한 확인
		com.biz.checkRole({ serviceId : scwin.data.service_id, roleCodes : com.getLoginInfo('roleCode')}, function(e) {
			scwin.data.isRoleYn = e.isRoleYn;
		});	

		scwin.data.roleCode = com.getLoginInfo('roleCode');		
		if (scwin.data.roleCode.indexOf("1003123") > -1 || scwin.data.roleCode.indexOf("1010001") > -1 || scwin.data.roleCode.indexOf("1010109") > -1 ){
			scwin.data.isRoleYn = true;
		}
			
		// 첨부파일 컴포넌트 초기화
		com.file.init();
		
		// 첨부파일
		com.file.create(upload_A.getID(), {fileKey: scwin.data.service_id, mode: 'edit'});
		
		if (param != undefined) {
			dma_search.setJSON(param);
		}
		
		dma_search.set("salry_cd", "560"); // 급여코드(적립형공제) 세팅
		dma_search.set("syspayno", com.getLoginInfo("sn"));
		
		var msg = "적립형공제 신청 및 승인은 매월 10일 마감, 10일 이후 신청 건은 익월 처리됩니다.";

		//넘어온 파라메터가 없으면 신규 처리
		if (dma_search.get("req_no") !="") {
			if ( dma_search.get("cmd") =="Vw") {
				com.alert(msg, function(){
					scwin.search();
				});			
			} else {
				scwin.search();			
			}
		}else{
			com.alert(msg, function(){
				scwin.searchEmp();
			});	
		}
	};	

	/**
	* 가입(증감)구좌수 selectbox option setting
	*/	
	scwin.setSbxIncrdecrBankAccntNoItem = function(){
		var idx = 0;
		
   		for (var i=5; i<=200; i+=5) {
	   		var data = {code:i, value:i};
			dlt_incrdecr_bank_accnt.setRowJSON(idx, data, false);
			idx++;
		}	
		
		dlt_incrdecr_bank_accnt.sort("code", 2);
		sbx_incrdecr_bank_accnt_no.setSelectedIndex(0);
	};
	
	/**
	 * 조회 실행
	 */		
	scwin.search = function() {
		com.execute(sbm_selectHumApySema, {
			successCallback : function(e) {
				dma_info.setJSON(e.responseJSON.elData.infoVo);

				if (dma_info.get("apr_state")=="XAD015") {
					dlt_reject.setJSON(e.responseJSON.elData.docList, false);
					if (dlt_reject.getTotalRow() > 0) {
						grd_reject.show();
					}						
				}
				
				scwin.setComp();
				//첨부파일 세팅
				var vMode = "edit";
				if (dma_info.get("apr_state") >= "XAD020") {
					vMode = "view";
				}				
				var attachFileNo = dma_info.get("attach_file_no").trim();
				com.file.create(upload_A.getID(), {fileKey: (attachFileNo == "") ? scwin.data.service_id :attachFileNo, mode: vMode});
				
				scwin.compControll();
			}
		});		
	};

	/**
	 * 신규등록 화면 오픈시 신청자 정보 조회 실행
	 */		
	scwin.searchEmp = function() {
		com.execute(sbm_selectHumApySemaEmpInfo, {
			successCallback : function(e) {
				dma_info.setJSON(e.responseJSON.elData);	
				scwin.setComp();					
				scwin.searchDupCheck();
			}
		});		
	};
	
	/**
	 * 입력항목 세팅
	 */	
	scwin.setComp = function() {
		//이메일 정보 세팅
		if (dma_info.get("email") !="" && dma_info.get("email").indexOf("@") > -1) {
			var email = dma_info.get("email").split("@");
			ibx_email.setValue(email[0]);
			ibx_domain.setValue(email[1]);
			sbx_domain.setValue(email[1]);
		}				

		// 신청 계좌수
		var incrdecrBankaccntNo = dma_info.get("incrdecr_bankaccnt_no" );
		// 없을시 디폴터로 5 입력
		if (incrdecrBankaccntNo != undefined && incrdecrBankaccntNo != "") {
			sbx_incrdecr_bank_accnt_no.setValue(incrdecrBankaccntNo);
		}			

		if (dma_info.get("savng_shape_dedct") !="Y") {
			dma_info.set("req_befr_bankaccnt_no", "0");
			dma_info.set("tot_bankaccnt_no", "0");
		}
			
		dma_info.set("postmt_no", dma_info.get("addr_postmt_no"));
		dma_info.set("base_addr", dma_info.get("addr_base"));
		dma_info.set("detls_addr", dma_info.get("addr_detls"));		
		
		if (!scwin.data.set_comp){
			var apr = dma_info.get("apr_state_nm");
			if (apr !="결재완료" && dma_info.get("savng_shape_dedct") == "Y") {
				sbx_req_typ.deleteItem(0, false);
			} else if (apr != "결재완료" && dma_info.get("savng_shape_dedct") == "N") {
				sbx_req_typ.deleteItem(1, false);
				sbx_req_typ.deleteItem(1, false);
				sbx_req_typ.deleteItem(1, false);
				sbx_req_typ.deleteItem(1, false);
			}
		}
		
		sbx_req_typ.setValue(dma_info.get("req_typ"));

		if (dma_info.get("savng_shape_dedct") == "Y" || tbx_req_no.getValue() != "") { // 가입구분해서 구좌셋팅
			tbx_tot_bank_accnt_no.setValue(dma_info.get("tot_bankaccnt_no")); // 총 구좌 수
			
			if (dma_info.get("req_befr_bankaccnt_no") ==""){
				tbx_req_befr_bank_accnt_no.setValue(dma_info.get("tot_bankaccnt_no"));
			}else{
				tbx_req_befr_bank_accnt_no.setValue(dma_info.get("req_befr_bankaccnt_no")); // 현 구좌수
			}
		} else {
			tbx_req_befr_bank_accnt_no.setValue("0");
			tbx_tot_bank_accnt_no.setValue("0");
		}
		scwin.data.set_comp = true;		
	}

	/**
	 * 신규등록 화면 오픈시 진행중인 신쳥서 유무 조회
	 */		
	scwin.searchDupCheck = function() {
		com.execute(sbm_selectHumApySemaDupCheck, {
			successCallback : function(e) {
				var msg = com.getLoginInfo("cn") 
					+ "("+com.getLoginInfo("empno")+")님으로  작성중인 적립형공제신청서가 있습니다.\n이전문서를 확인하시기 바랍니다.";
				var cnt = 0;
				if (cnt > 0) {
					com.alert(msg);
					btn_save.setDisabled(true);
				}
			}
		});		
	};
		
	/**
	 * 목록 버튼 클릭
	 */		
	scwin.btn_list_onclick = function(e) {
		scwin.backToList();		
	};

	/**
	 * 목록 페이지로 이동
	 */	
	scwin.backToList = function(){
		var data ={};
		com.moveList('H576'); 
	};		
	
	/**
	 * 인쇄 버튼 클릭 이벤트
	 */			
	scwin.btn_print_onclick = function(e) {
		var ozrCode = "";
		//oz팝업 호출시 전달할 파라메터
		var node ="";
		var reqTyp = sbx_req_typ.getValue();
		
		if (reqTyp == "HSE010") {// 적립형공제 가입신청서
			node = "reqNo=" + dma_info.get("req_no") 
					+ "&incrdecrBankaccntNo=" + sbx_incrdecr_bank_accnt_no.getValue() 
					+ "&amt=" + dma_info.get("total_sema_amt")
					+ "&nowDt=" + ica_req_ymd.getValue()
					+ "&syspayno=" + dma_info.get("syspayno");						
			ozrCode = "H103";		
		} else if (reqTyp == "HSE020" || reqTyp == "HSE030") {// 적립형공제 증,감좌 신청서
			node = "reqNo=" + dma_info.get("req_no") 
					+ "&reqTyp=" + reqTyp
					+ "&nowDt=" + ica_req_ymd.getValue()
					+ "&syspayno=" + dma_info.get("syspayno");						
			ozrCode = "H104";				
		} else if (reqTyp == "HSE040") {// 적립형공제 해지신청서
			node = "reqNo=" + dma_info.get("req_no") 
					+ "&syspayno=" + dma_info.get("syspayno")
					+ "&nowDt=" + ica_req_ymd.getValue();
			ozrCode = "H105";		
		}
		
		com.oz.openPopup({
			ozrCode: ozrCode,
			param: node    
        });			
	};
	
	scwin.btn_apr_onclick = function(e) {
		dma_info.set("req_typ", sbx_req_typ.getValue());
		scwin.data.approval = true;		
		if (!scwin.preSave()) {
			return;
		}
		com.confirm("결재신청 하시겠습니까?", function(ret) {
			if (ret) {
				var infoCd = "[적립형공제신청][신청자명 : "+tbx_nm.getValue()+" "+tbx_posi_nm.getValue()+" / 신청내용 : "+txa_req_cause.getValue()+"]";
				dma_info.set("info_cd", infoCd);
				dma_info.set("approval", "true");				
				scwin.saveTrans();	
			}
		});		
	};

	/**
	 * 신청유형 변경 이벤트
	 */		
	scwin.sbx_req_typ_onviewchange = function(info) {
		if (this.getValue() == "HSE040" || this.getValue() == "HSE050") { // 해지 또는 보류
			sbx_incrdecr_bank_accnt_no.setValue("");
			sbx_incrdecr_bank_accnt_no.setDisabled( true );
		} else {
			sbx_incrdecr_bank_accnt_no.setDisabled( false );
		}
		scwin.replaceAccntAmt();			
	};	

	/**
	 * 총구좌수, 구좌당금액, 총금액 변경
	 */			
	scwin.replaceAccntAmt = function() {
		debugger;
      	var inBankAccnt = sbx_incrdecr_bank_accnt_no.getValue();
   		var befreBankAccnt = tbx_req_befr_bank_accnt_no.getValue();
   		var totBankAccnt = 0;
   		
   		if(inBankAccnt != ""){
			if (sbx_req_typ.getValue() == "HSE030") { // 감좌
				 if (parseInt(inBankAccnt) > parseInt(befreBankAccnt)) {
					com.alert("감좌구좌수가 현 구좌수보다 높을수 없습니다.");
					tbx_tot_bank_accnt_no.setValue(befreBankAccnt);
					var valBankAmt = tbx_amt.getValue().replaceAll(",","");
					var totBankAmt = parseInt(befreBankAccnt) * parseInt(valBankAmt);
					tbx_total_sema_amt.setValue(totBankAmt);
				} else if (parseInt(befreBankAccnt) - parseInt(inBankAccnt) < 5) {
					com.alert("감좌신청시 총금액은 최소구좌 (5만원,5구좌)이여야 합니다.");
					tbx_tot_bank_accnt_no.setValue(befreBankAccnt);
					var valBankAmt = tbx_amt.getValue().replaceAll(",","");
					var totBankAmt = parseInt(befreBankAccnt) * parseInt(valBankAmt);
					tbx_total_sema_amt.setValue(totBankAmt);
				} else {
					totBankAccnt = parseInt(befreBankAccnt) - parseInt(inBankAccnt);
					var valBankAmt = tbx_amt.getValue().replaceAll(",","");
					var totBankAmt = totBankAccnt * parseInt(valBankAmt);
					tbx_tot_bank_accnt_no.setValue(totBankAccnt);
					tbx_total_sema_amt.setValue(totBankAmt);
				}
			} else { // 가입, 증좌
				totBankAccnt = parseInt(inBankAccnt) + parseInt(befreBankAccnt);
				var valBankAmt = tbx_amt.getValue().replaceAll(",","");
				var totBankAmt = totBankAccnt * parseInt(valBankAmt);
				tbx_tot_bank_accnt_no.setValue(totBankAccnt);
				tbx_total_sema_amt.setValue(totBankAmt);
			}
		} else {			
			if (sbx_req_typ.getValue() == "HSE050") { // 보류					
				tbx_tot_bank_accnt_no.setValue(0);
				tbx_total_sema_amt.setValue(0);
			} else if (sbx_req_typ.getValue() == "HSE040") { // 해지
				tbx_tot_bank_accnt_no.setValue(befreBankAccnt);

				var valBankAmt = outputAmt.getValue().replaceAll(",","");
				var totBankAmt = befreBankAccnt * parseInt(valBankAmt);

				tbx_total_sema_amt.setValue(totBankAmt);
			}
		}	
	};
	
	/**
	 * 자택주소 우편변호 조회
	 */		
	scwin.btn_search_post_home_onclick = function(e) {
		com.pop.open(com.pop.TYPE.ADDR, "", function(ret) {
			dma_info.set("postmt_no", ret.zipNo);
			dma_info.set("base_addr", ret.addrPart1);
			dma_info.set("detls_addr", ret.addrPart2);
		});			
	};
	
	/**
	 * 회사주소 우편변호 조회
	 */			
	scwin.btn_search_post_comp_onclick = function(e) {
		com.pop.open(com.pop.TYPE.ADDR, "", function(ret) {
			console.log(ret);
			dma_info.set("cmpy_postmt_no", ret.zipNo);
			dma_info.set("cmpy_base_addr", ret.addrPart1);
			dma_info.set("cmpy_detls_addr", ret.addrPart2);
		});			
	};

	/**
	 * 이메일 도메인 selectbox 선택 변경 이벤트
	 */		
	scwin.sbx_domain_onchange = function(info) {
		if (info.newValue !="") {
			ibx_domain.setValue(this.getText());
		} else {
			ibx_domain.setValue("");
		}		
	};
	
	/**
	 * 가입(증감)구좌수 변경 이벤트
	 */	
	scwin.sbx_incrdecr_bank_accnt_no_onviewchange = function(info) {
		if (sbx_req_typ.getValue()=="") {
			com.alert("신청유형을 선택후 입력해주세요.");
			sbx_incrdecr_bank_accnt_no.setValue("");
			return;
		}
		scwin.replaceAccntAmt();		
	};
	
	/**
     * 적립형공제 양식 다운
     */	
	scwin.btn_docu_down_onclick = function() {
		scwin.downFileinfo("적립형공제.zip", "10000015");			
	};
	
	/**
     * 파일 다운로드
     */
	scwin.downFileinfo = function downFileinfo(file_nm,file_no) {
		var url = "/SvcAttachDown.do?fileName=web_folder/bizdoc/hum/"+file_no+"&realName="+encodeURIComponent(file_nm)+"&bizKind=OLD";		
		window.open(url, '_blank').focus();
	};

	/**
	 * 처리 버튼 클릭 이벤트
	 */			
	scwin.btn_confirm_onclick = function(e) {
		if (!scwin.data.isRoleYn) {
			com.alert("관리자외에는 처리 하실 수 없습니다.");
		}
		
		if (scwin.validate()) {
			com.confirm("승인처리 하시겠습니까?", function(ret) { 		
				if (ret) {
					if (sbx_req_typ.getValue() == "HSE040" || sbx_req_typ.getValue() == "HSE050") { // 해지신청시
						dma_info.set("tot_bankaccnt_no", 0);
						dma_info.set("savng_shape_dedct", "N");
					} else {
						dma_info.set("savng_shape_dedct", "Y");
					}	
			
					//dma_info email 세팅
					scwin.setEmail();
											
					dma_info.set("addr_postmt_no", dma_info.get("postmt_no"));
					dma_info.set("addr_base", dma_info.get("base_addr"));
					dma_info.set("addr_detls", dma_info.get("detls_addr"));								

					com.execute(sbm_aprAgr, {
						successCallback : function(e) {
							com.alert("승인처리 되었습니다");
							com.openTabMenu("A004", {});
						}
					});
				}
			});
		}		
	};
	
	/**
	 * 반려 버튼 클릭 이벤트
	 */		
	scwin.btn_reject_onclick = function(e) {
		if (!scwin.data.isRoleYn) {
			com.alert("관리자외에는 반려를 하실 수 없습니다.");
		}
		var options = {
		    id: "APR02P",
		    popupName: "반려의견",
		    width: 500,
		    height: 300
		};
		com.openPopup("/ui/apr/APR_C001_03P.xml", options, "", function(retObj) {
		    if (retObj.comments != null) {
		        dma_info.set("comments", retObj.comments);
		        com.execute(sbm_aprReject, {
		            successCallback: function(e) {
		                com.alert("반려처리 되었습니다");
						com.openTabMenu("A004", {});
		            }
		        });
		    }
		});		
	};

	/**
	 * 삭제 버튼 클릭 이벤트
	 */		
	scwin.btn_del_onclick = function(e) {
		scwin.remove();		
	};
	
	/**
	 * 삭제 실행
	 */		
	scwin.remove = function() {
		dma_info.set("regst_syspayno", com.getLoginInfo("sn"));
		dma_info.set("updt_syspayno", com.getLoginInfo("sn"));

		com.confirm("message.xom.wq.022"/*삭제 하시겠습니까?*/, function(ret) {
			if (ret) {
				com.file.deleteAll(function(){				
					com.execute(sbm_deleteHumApySema, {
						successCallback : function(e) { // 성공 콜백
							com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
								if (dma_search.get("param4") == "apr") {
									com.openTabMenu("A010", {});
								} else {
									scwin.backToList();							
								}
							});
						}
					});
				});
			}
		});
	};
	
	/**
	 * 저장 버튼 클릭 이벤트
	 */	
	scwin.btn_save_onclick = function(e) {
		scwin.data.approval = false;		
		dma_info.set("req_typ", sbx_req_typ.getValue());
		if (!scwin.preSave())
		{
			return;
		}		
		
		com.confirm("message.xom.wq.017"/*저장 하시겠습니까?*/, function(ret) {
			if (ret) {
				dma_info.set("approval", "false");
				scwin.saveTrans();					
			}
		});		
	};

		
	/**
	 * 저장 실행
	 */	
	scwin.saveTrans = function() {	
		com.file.transport(function(attachObj) {	
			var attaches = [];
			if (JSON.stringify(attachObj.upload_A) != '{}') {
				attaches.push(attachObj.upload_A);
				dma_info.set("attach_file_no", attachObj.upload_A);			
			}
			dma_info.set("validAttachNo", attaches.join(","));				
			scwin.save();
		});	
	};

	/**
	 * 저장 실행
	 */	
	scwin.save = function() {					
		//dma_info email 세팅
		scwin.setEmail();
		
		if (sbx_req_typ.getValue() == "HSE040" || sbx_req_typ.getValue() == "HSE050") {
			dma_info.set("tot_bankaccnt_no", "0");
		}	
		dma_info.set("req_befr_bankaccnt_no", tbx_req_befr_bank_accnt_no.getValue());
		dma_info.set("tot_bankaccnt_no", tbx_tot_bank_accnt_no.getValue());
		dma_info.set("doc_id", scwin.data.doc_id);
		dma_info.set("service_id", scwin.data.service_id);
		dma_info.set("incrdecr_bankaccnt_no", sbx_incrdecr_bank_accnt_no.getValue());
					
		com.execute(sbm_saveHumApySema, {
			successCallback : function(e) { // 성공 콜백
				com.alert("message.xom.wq.023"/*정상적으로 처리되었습니다.*/, function() {
					scwin.postSave();
				});
			} 
		});

	};

	/**
	 * 저장전 확인
	 */	
	scwin.preSave = function() {
		if (!scwin.validate()) {
			return false;
		}

		if ((sbx_req_typ.getValue() == "HSE010" || sbx_req_typ.getValue() == "HSE020" || sbx_req_typ.getValue() == "HSE030") 
			&& sbx_incrdecr_bank_accnt_no.getValue() == "") {
			com.alert("가입(증감)구좌수를 입력하세요.");
			return false;
		}
				
		if (com.file.action.getTotalFileCount(upload_A.getID()) < 1) {
			com.alert("신청유형별 첨부파일 필수입니다.");
			return false;
		}
		
		// 가입구분해서  최근 가입일:가입희망일 비교
		var savngShapeDedct = dma_info.get("savng_shape_dedct"); // 가입여부 Y/N
		
		if (savngShapeDedct=="Y") {
			if (!(sbx_req_typ.getValue() == "HSE040" || sbx_req_typ.getValue() == "HSE050")) { // 해지가 아닐때
				var semaDt 	= tbx_amt.getValue(); // 과거 공제신청일 YYYYMM
				var nowDt   = scwin.data.today; // 현재 신청일
				var nowDt   = ica_req_ymd.getValue(); // YYYYMMDD
				var nowYm   = nowDt.substring(0,6); // YYYYMM
				var nowDay  = nowDt.substring(6,8); // DD

				// 신청일 = 21일(급여일)이전일때
				// 해당월기준 기존신청월 3개월 내로는 재신청 불가
				if (nowDay < 21) {
					if (nowYm - (Number(semaDt) +2) ==  0
					|| nowYm - (Number(semaDt) +2) == -1
					|| nowYm - (Number(semaDt) +2) == -2) {
						com.alert("마지막 공제기간이 3개월 이내면 신청이 불가능합니다");
						return false;
					}
				}

				// 신청일 = 21일(급여일)이후일때
				// 익월기준 기존신청월 3개월 내로는 재신청 불가
				if (nowDay >= 21) {
					if (Number(nowYm+1) - (Number(semaDt) +2) == -1
					|| Number(nowYm+1) - (Number(semaDt) +2) ==  0
					|| Number(nowYm+1) - (Number(semaDt) +2) ==  1) {
						com.alert("마지막 공제기간이 3개월 이내면 신청이 불가능합니다");
						return false;
					}
				}
			}
		}				
		return true;	
	};

	/**
     * 검증
     */	
	scwin.validate = function() {
		if (!com.validateData(dma_info,[
			{ id : "req_ymd", mandatory : true},
			{ id : "req_typ", mandatory : true},
			{ id : "postmt_no", mandatory : true},
			{ id : "base_addr", mandatory : true},
			{ id : "detls_addr", mandatory : true},
			{ id : "cmpy_postmt_no", mandatory : true},
			{ id : "cmpy_base_addr", mandatory : true},
			{ id : "cmpy_detls_addr", mandatory : true},			
		], false)) return false;
		
		if (!com.isDate(ica_req_ymd.getValue(), false)) {
			return false;
		}
		
		return true;	
	};
	
	/**
     * 저장 후 처리
     */
	scwin.postSave = function() {
		if (!scwin.data.approval) {
			com.confirm("결재신청 하시겠습니까?", function(ret) {
				if (ret) {
					scwin.data.approval = true;
					var infoCd = "[적립형공제신청][신청자명 : "+tbx_nm.getValue()+" "+tbx_posi_nm.getValue()+" / 신청내용 : "+txa_req_cause.getValue()+"]";
					dma_info.set("info_cd", infoCd);					
					dma_info.set("req_no", dma_search.get("req_no"));
					dma_info.set("approval", "true");
					scwin.save();
				} else {
					scwin.search();
				}							
			});
		} else {
			//결재신청 후에는 결재진행함으로 이동
			com.openTabMenu("A005", {});
		}	
	};	
	
	/**
	 * 화면 콤포넌트 컨트롤
	 */	
	scwin.compControll = function() {
	    com.biz.disabledButtons(dma_info.get("apr_state"), dma_info.get("req_no"));

		if (dma_info.get("req_no") != "") {
			//저장되면 인쇄버튼 활성화
			btn_print.setDisabled(false);
		}
		
		if (dma_info.get("apr_state") >= "XAD020") {
			//관리자이고, 담당자확인 상태일 때만 반려/처리버튼 노출.
			com.biz.checkRole({ serviceId : scwin.data.service_id, roleCodes : com.getLoginInfo('roleCode')}, function(e) {
				scwin.data.isRoleYn = e.isRoleYn;
				if (scwin.data.isRoleYn && dma_info.get("apr_state") == "XAD070") {
					btn_confirm.show("");
					btn_reject.show("");
				}				
			});			

			var disableArr = ["ica_req_ymd","ibx_email","ibx_domain"
							,"ibx_home_tel","ibx_mobile","ibx_ext_no"
							,"ibx_postmt_no","ibx_base_addr","ibx_detls_addr"
							,"ibx_cmpy_postmt_no","ibx_cmpy_base_addr","ibx_cmpy_detls_addr"
							,"txa_req_cause","btn_search_post_comp","btn_search_post_home"
							,"sbx_incrdecr_bank_accnt_no","sbx_req_typ","sbx_domain"];			
			scwin.setDisable(disableArr, true);

			if (dma_info.get("apr_state") == "XAD100") {
				//1003123 역할 보유자만 결재완료 후 반려처리 가능.
				if (scwin.data.roleCode.indexOf("1003123") > -1) {
					btn_reject.show("");					
				}
			}
		} else {
			if (tbx_empno.getValue() != com.getLoginInfo("empno")) {
				btn_save.setDisabled(true);
				btn_apr.setDisabled(true);
				btn_del.setDisabled(true);
			}
		}
	};
	
	/**
	* 컴포넌트 disable true/false 처리
	*/	
	scwin.setDisable = function(arr, flag) {
		for (var i = 0; i < arr.length; i++) {
			$p.getComponentById(arr[i]).setDisabled(flag);
		}
	};	

	/**
	* 이메일 항목 세팅
	*/
	scwin.setEmail = function () {
		if (ibx_email.getValue() != "" && ibx_domain.getValue() !="") {
			var email = ibx_email.getValue()+"@"+ibx_domain.getValue();
			dma_info.set("email", email);
		}
	};]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">
    	<w2:wframe id="wfm_title" src="/cm/xml/contentTitle.xml" style=""></w2:wframe>
    	<xf:group class="pageWrap" id="grp_base_info" style="">
    		<xf:group class="searchSection step" id="" style="">
    			<xf:group class="le" id="">
    				<xf:trigger class="btn " id="btn_list" style="" type="button" ev:onclick="scwin.btn_list_onclick">
    					<xf:label><![CDATA[목록]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    			<xf:group class="btnbox" id="">
    				<xf:trigger class="btn icon print" id="btn_print" style="" type="button" ev:onclick="scwin.btn_print_onclick">
    					<xf:label><![CDATA[인쇄]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn blue" id="btn_apr" style="" type="button" ev:onclick="scwin.btn_apr_onclick">
    					<xf:label><![CDATA[결재신청]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<w2:gridView autoFit="allColumn" class="grid" dataList="data:dlt_reject" defaultCellHeight="28" evenRowBackgroundColor="#f7faff"
    			id="grd_reject" noResultMessage="조회 결과가 없습니다." noResultMessageClass="noResult" rowMouseOverColor="#e7f0fb"
    			rowNumBackgroundColor="#fff" rowNumHeaderValue="No." rowNumVisible="true" rowNumWidth="60" rowStatusHeaderValue="상태"
    			rowStatusVisible="false" rowStatusWidth="50" scrollByColumn="false" scrollByColumnAdaptive="false" selectedCellColor="#fbf2cd"
    			selectedRowColor="#fbf2cd" style="height: 85px;" visibleRowNum="10">
    			<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
    			<w2:header id="header1" style="">
    				<w2:row id="row1" style="">
    					<w2:column displayMode="label" id="column41" inputType="text" style="height:28px" value="반려자" width="100"></w2:column>
    					<w2:column displayMode="label" id="column9" inputType="text" style="height:28px;" value="반려의견" width="800"></w2:column>
    					<w2:column width="100" inputType="text" style="height:28px" id="column43" value="반려일시" displayMode="label"></w2:column>
    				</w2:row>
    			</w2:header>
    			<w2:gBody id="gBody1" style="">
    				<w2:row id="row2" style="">
    					<w2:column displayMode="label" id="empname" inputType="text" style="height:28px" value="" width="100" readOnly="true"></w2:column>
    					<w2:column displayMode="label" id="contents" inputType="text" readOnly="true" style="height:28px;" value=""
    						width="800">
    					</w2:column>
    					<w2:column width="100" inputType="text" style="height:28px" id="created_date" value="" displayMode="label" readOnly="true"></w2:column>
    				</w2:row>
    			</w2:gBody>
    		</w2:gridView>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:200px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:200px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:200px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="개인번호(성명)" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt" id="tbx_empno" label="" style="" tagname="span" ref="data:dma_info.empno"></w2:textbox>
    					<w2:textbox class="" id="tbx_nm10" label="(" style="" tagname="span"></w2:textbox>
    					<w2:textbox class="" id="tbx_nm" label="" style="display:inline-block;min-width:20px;" tagname="span" ref="data:dma_info.nm"></w2:textbox>
    					<w2:textbox class="" id="tbx_nm20" label=")" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:textbox id="" label="부서" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt" id="tbx_dept_nm" label="" style="" tagname="span" ref="data:dma_info.dept_nm"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes></w2:attributes>
    					<w2:textbox id="" label="직급" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt" id="tbx_posi_nm" label="" style="" tagname="span" ref="data:dma_info.posi_nm"></w2:textbox>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox class="blue" id="" label="신청일" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:inputCalendar calendarValueType="yearMonthDate" class="inpcal" focusOnDateSelect="false" footerDiv="false"
    						id="ica_req_ymd" renderDiv="true" rightAlign="false" style="max-width: 200px;" ref="data:dma_info.req_ymd" readOnly="true">
    					</w2:inputCalendar>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="결재상태" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt" id="tbx_apr_state_nm" label="" style="" tagname="span" ref="data:dma_info.apr_state_nm"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox id="" label="신청번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt" id="tbx_req_no" label="" style="" tagname="span" ref="data:dma_info.req_no"></w2:textbox>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="titleSection" id="" style="">
    			<w2:textbox class="tit_tbl" id="" label="신청 내용" style="" tagname="h3"></w2:textbox>
    		</xf:group>
    		<xf:group class="w2tb tbl" id="" style="" tagname="table">
    			<w2:attributes>
    				<w2:summary></w2:summary>
    			</w2:attributes>
    			<xf:group tagname="caption"></xf:group>
    			<xf:group tagname="colgroup">
    				<xf:group style="width:200px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:200px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    				<xf:group style="width:200px;" tagname="col"></xf:group>
    				<xf:group style="" tagname="col"></xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox class="blue" id="" label="신청유형" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="" chooseOptionLabel="-선택-" class="sel" direction="auto"
    						disabled="false" disabledClass="w2selectbox_disabled" id="sbx_req_typ" style="max-width: 200px;"
    						submenuSize="auto" ev:onviewchange="scwin.sbx_req_typ_onviewchange">
    						<xf:choices></xf:choices>
    					</xf:select1>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="입원일" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt" id="tbx_req_ymd" label="" style="" tagname="span" ref="data:dma_info.entr_ymd" displayFormat="####-##-##"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="주민번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<w2:textbox class="txt" id="tbx_resid_no" label="" style="" tagname="span" ref="data:dma_info.resid_no"></w2:textbox>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox class="blue" id="" label="자택주소" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:group class="flex" id="" style="">
    						<xf:group class="inpSch fix" id="" style="width:120px;">
    							<xf:input adjustMaxLength="false" class="inp" id="ibx_postmt_no" style="" ref="data:dma_info.postmt_no" allowChar="0-9,-" readOnly="true"></xf:input>
    							<xf:trigger class="btn" id="btn_search_post_home" style="" type="button" ev:onclick="scwin.btn_search_post_home_onclick">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:input adjustMaxLength="false" class="inp full" id="ibx_base_addr" style="max-width: 300px;" ref="data:dma_info.base_addr" readOnly="true" maxByteLength="200"></xf:input>
    						<xf:input adjustMaxLength="false" class="inp full" id="ibx_detls_addr" style="max-width: 300px;" ref="data:dma_info.detls_addr" maxByteLength="150"></xf:input>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>
    					<w2:textbox class="blue" id="" label="회사주소" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:group class="flex" id="" style="">
    						<xf:group class="inpSch fix" id="" style="width:120px;">
    							<xf:input adjustMaxLength="false" class="inp" id="ibx_cmpy_postmt_no" style="" ref="data:dma_info.cmpy_postmt_no" allowChar="0-9,-" readOnly="true" maxlength="5"></xf:input>
    							<xf:trigger class="btn" id="btn_search_post_comp" style="" type="button" ev:onclick="scwin.btn_search_post_comp_onclick">
    								<xf:label><![CDATA[검색]]></xf:label>
    							</xf:trigger>
    						</xf:group>
    						<xf:input adjustMaxLength="false" class="inp full" id="ibx_cmpy_base_addr" style="max-width: 300px;" ref="data:dma_info.cmpy_base_addr" readOnly="true" maxByteLength="200"></xf:input>
    						<xf:input adjustMaxLength="false" class="inp full" id="ibx_cmpy_detls_addr" style="max-width: 300px;" ref="data:dma_info.cmpy_detls_addr" maxByteLength="150"></xf:input>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="자택전화번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="ibx_home_tel" style="max-width: 200px;" title="" ref="data:dma_info.home_tel" allowChar="0-9,-" maxlength="20"></xf:input>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="휴대폰" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="ibx_mobile" style="max-width: 200px;" title="" ref="data:dma_info.mobile" maxlength="20"></xf:input>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="회사전화번호" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<xf:input adjustMaxLength="false" class="inp full" id="ibx_ext_no" style="max-width: 200px;" title="" ref="data:dma_info.ext_no" maxlength="20" allowChar="0-9,-"></xf:input>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="전자우편" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes>
    						<w2:colspan>3</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:group id="" class="flex">
    						<xf:input adjustMaxLength="false" class="inp full" id="ibx_email" style="max-width: 100px;" title="" maxlength="50"></xf:input>
    						<w2:textbox class="txt" id="" label="@" style="" tagname="span"></w2:textbox>
    						<xf:input adjustMaxLength="false" class="inp full" id="ibx_domain" style="max-width: 150px;" title="" maxlength="50"></xf:input>
    						<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="직접입력" class="sel"
    							direction="auto" disabled="false" disabledClass="w2selectbox_disabled" id="sbx_domain" ref="" style="max-width: 200px;"
    							submenuSize="auto" ev:onchange="scwin.sbx_domain_onchange">
    							<xf:choices></xf:choices>
    						</xf:select1>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="가입(증감)구좌수" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes></w2:attributes>
    					<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="-선택-" class="sel"
    						direction="auto" disabled="false" disabledClass="w2selectbox_disabled" id="sbx_incrdecr_bank_accnt_no" ref=""
    						style="max-width: 200px;" submenuSize="auto" ev:onviewchange="scwin.sbx_incrdecr_bank_accnt_no_onviewchange">
    						<xf:choices>
    							<xf:itemset nodeset="data:dlt_incrdecr_bank_accnt">
    								<xf:label ref="value"></xf:label>
    								<xf:value ref="code"></xf:value>
    							</xf:itemset>
    						</xf:choices>
    					</xf:select1>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="현(변경전)구좌수" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td ri">
    					<w2:attributes>
    					</w2:attributes>
    					<w2:textbox class="txt ri" id="tbx_req_befr_bank_accnt_no" label="" style="" tagname="span" dataType="number" displayFormat="#,###"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td">
    					<w2:attributes>
    						<w2:colspan>2</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    				</xf:group>    				
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="총구좌수" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td ri">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt ri" id="tbx_tot_bank_accnt_no" label="" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="구좌당금액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td ri">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt ri" id="tbx_amt" label="" style="" tagname="span" ref="data:dma_info.calc_base" dataType="number" displayFormat="#,###"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="th" class="w2tb_th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="총금액" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group tagname="td" class="w2tb_td ri">
    					<w2:attributes></w2:attributes>
    					<w2:textbox class="txt ri" id="tbx_total_sema_amt" label="" style="" tagname="span" ref="data:dma_info.total_sema_amt" dataType="number" displayFormat="#,###"></w2:textbox>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:textbox class="" id="" label="사유" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:textarea class="" id="txa_req_cause" style="height:80px;" title="" ref="data:dma_info.req_cause" maxByteLength="255"></xf:textarea>
    				</xf:group>
    			</xf:group>
    			<xf:group tagname="tr">
    				<xf:group class="w2tb_th" tagname="th">
    					<w2:attributes>
    						<w2:scope>row</w2:scope>
    					</w2:attributes>
    					<w2:span class="bul_req" id="" label="[필수입력항목]" style=""></w2:span>    					
    					<w2:textbox id="" label="첨부파일" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group class="w2tb_td" tagname="td">
    					<w2:attributes>
    						<w2:colspan>5</w2:colspan>
    						<w2:rowspan>1</w2:rowspan>
    					</w2:attributes>
    					<xf:group class="fileuploadBox" id="upload_A" style="height:150px;"></xf:group>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="btnGroup" id="" style="">
    			<xf:group class="le" id="" style=""></xf:group>
    			<xf:group class="ri" id="">
    				<xf:trigger class="btn pro" id="btn_confirm" style="" type="button" ev:onclick="scwin.btn_confirm_onclick">
    					<xf:label><![CDATA[처리]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn pro" id="btn_reject" style="" type="button" ev:onclick="scwin.btn_reject_onclick">
    					<xf:label><![CDATA[반려]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class="btn pro" id="btn_del" style="" type="button" ev:onclick="scwin.btn_del_onclick">
    					<xf:label><![CDATA[삭제]]></xf:label>
    				</xf:trigger>
    				<xf:trigger class=" btn pro conf" id="btn_save" style="" type="button" ev:onclick="scwin.btn_save_onclick">
    					<xf:label><![CDATA[저장]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>    		
    		<xf:group class="helparea" id="" style="">
    			<xf:group id="" style="" tagname="ol">
    				<xf:group id="" tagname="li">
    					<w2:textbox class="red" id="" label='"가입" 첨부 서류 : 적립형공제 가입 신청서, 개인정보 수집·이용·제공 동의서' style="" tagname="span"></w2:textbox>
    					<w2:textbox class="red dis_block" id="" label="(공제회 사이트로 신청했을 시 EIP에선 별도 첨부 없이 구좌수만 입력 후 신청)" style=""
    						tagname="span">
    					</w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label='"중도해지" 첨부 서류 : 적립형공제 급여지급 청구서, 개인정보 수집·이용·제공 동의서, 신분증사본, 통장사본' style=""
    						tagname="span">
    					</w2:textbox>
    					<w2:anchor id="btn_docu_down" outerDiv="false" style="" class="linkfile" ev:onclick="scwin.btn_docu_down_onclick">
    						<xf:label><![CDATA[적립형공제 양식 다운]]></xf:label>
    					</w2:anchor>
    					<w2:textbox class="blue" id="" label="※ 첨부파일은 PDF파일 50MB이하, 하나의 파일로 병합하여 올려주시기 바랍니다." style="" tagname="span">
    					</w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label="증/감좌 : 적립형공제급여 증, 감좌 신청서" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label="1구좌 = 10,000원 / 5구좌 단위 변경, 최대 총 200구좌까지 가입 가능 / 최종 변경(신규) 후 3개월 이후 변경 가능"
    						style="" tagname="span">
    					</w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label="매월 10일 마감. 10일 이후의 신청 건은 익월 접수 및 처리" style="" tagname="span"></w2:textbox>
    				</xf:group>
    				<xf:group id="" style="" tagname="li">
    					<w2:textbox class="red" id="" label="과학기술인공제회 공제사업실 : 1577-0789(내선2)" style="" tagname="span"></w2:textbox>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    	</xf:group>
    </body>
</html>
